<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Better Programmer - Premium Programming E-Books Library</title>
  <!-- Icons & Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #000000;
      --bg-secondary: #000814;
      --bg-gradient: linear-gradient(135deg, #000000 0%, #000814 50%, #001233 100%);
      --text-primary: #e0f7ff;
      --text-secondary: #88d3fa;
      --accent: #00b4ff;
      --accent-glow: rgba(0, 180, 255, 0.7);
      --accent-secondary: #0066ff;
      --border: #003566;
      --success: #00ff88;
      --warning: #ffcc00;
      --error: #ff4444;
      --glow-blue: #00b4ff;
      --neon-blue: #00d4ff;
      --admin-purple: #9d00ff;
      --admin-glow: rgba(157, 0, 255, 0.7);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--bg-gradient);
      color: var(--text-primary);
      font-family: 'Roboto', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }

    /* Parallax background */
    .parallax-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(0, 180, 255, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(0, 102, 255, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%);
      z-index: -1;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(15px);
      border-bottom: 2px solid var(--border);
      animation: slideDown 0.5s ease-out;
      box-shadow: 0 5px 30px rgba(0, 180, 255, 0.2);
    }

    @keyframes slideDown {
      from { transform: translateY(-100%); }
      to { transform: translateY(0); }
    }

    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    .hamburger-btn,
    .close-btn {
      display: none;
      font-size: 2rem;
      color: var(--accent);
      cursor: pointer;
      transition: transform 0.3s;
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .hamburger-btn:hover,
    .close-btn:hover {
      transform: scale(1.1);
      text-shadow: 0 0 20px var(--accent-glow);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      animation: glowPulse 2s infinite alternate;
      cursor: pointer;
    }

    @keyframes glowPulse {
      0% { 
        filter: drop-shadow(0 0 5px var(--accent-glow));
        transform: scale(1);
      }
      100% { 
        filter: drop-shadow(0 0 25px var(--accent-glow));
        transform: scale(1.02);
      }
    }

    .logo .material-symbols-rounded {
      font-size: 3rem;
      color: var(--neon-blue);
      text-shadow: 0 0 20px var(--accent-glow);
    }

    .logo h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      letter-spacing: 2px;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 20px rgba(0, 180, 255, 0.5);
    }

    .search-container {
      flex: 1;
      max-width: 500px;
      margin: 0 40px;
    }

    .search-box {
      position: relative;
    }

    .search-box input {
      width: 100%;
      padding: 16px 60px 16px 24px;
      background: rgba(0, 53, 102, 0.3);
      border: 2px solid transparent;
      border-radius: 50px;
      color: var(--text-primary);
      font-size: 1rem;
      transition: all 0.3s;
      backdrop-filter: blur(10px);
    }

    .search-box input:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 30px var(--accent-glow);
      background: rgba(0, 53, 102, 0.5);
    }

    .search-icon {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--neon-blue);
      font-size: 1.8rem;
      cursor: pointer;
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .links {
      display: flex;
      gap: 30px;
      list-style: none;
    }

    .links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s;
      position: relative;
      padding: 8px 4px;
      text-shadow: 0 0 10px rgba(0, 180, 255, 0.3);
      cursor: pointer;
    }

    .links a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--neon-blue);
      transition: width 0.3s;
      box-shadow: 0 0 10px var(--accent-glow);
    }

    .links a:hover,
    .links a.active {
      color: var(--neon-blue);
      text-shadow: 0 0 15px var(--accent-glow);
    }

    .links a:hover::after,
    .links a.active::after {
      width: 100%;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .login-btn {
      background: transparent;
      border: 2px solid var(--neon-blue);
      color: var(--neon-blue);
      padding: 12px 28px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.4s;
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 10px var(--accent-glow);
      box-shadow: 0 0 15px rgba(0, 180, 255, 0.3);
    }

    .login-btn:hover {
      background: var(--neon-blue);
      color: #000;
      box-shadow: 0 0 40px var(--accent-glow);
      transform: translateY(-2px);
    }

    .admin-btn {
      background: transparent;
      border: 2px solid var(--admin-purple);
      color: var(--admin-purple);
      padding: 12px 28px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.4s;
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 10px var(--admin-glow);
      box-shadow: 0 0 15px rgba(157, 0, 255, 0.3);
    }

    .admin-btn:hover {
      background: var(--admin-purple);
      color: #000;
      box-shadow: 0 0 40px var(--admin-glow);
      transform: translateY(-2px);
    }

    .cart-btn {
      position: relative;
      background: transparent;
      border: none;
      color: var(--neon-blue);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 8px;
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--error);
      color: white;
      font-size: 0.8rem;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(255, 68, 68, 0.8);
    }

    /* Notification Toast */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 16px 24px;
      background: var(--bg-secondary);
      border-left: 4px solid var(--neon-blue);
      border-radius: 8px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 180, 255, 0.3);
      transform: translateX(150%);
      transition: transform 0.3s;
      z-index: 2000;
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast.success {
      border-left-color: var(--success);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 255, 136, 0.3);
    }

    .toast.error {
      border-left-color: var(--error);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 68, 68, 0.3);
    }

    .toast.admin {
      border-left-color: var(--admin-purple);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8), 0 0 20px var(--admin-glow);
    }

    /* Enhanced Popup - Redesigned */
    .blur-bg-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(15px);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s;
      z-index: 10;
    }

    .show-popup .blur-bg-overlay {
      opacity: 1;
      pointer-events: auto;
    }

    .form-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      width: 90%;
      max-width: 500px;
      background: var(--bg-secondary);
      border: 2px solid var(--neon-blue);
      border-radius: 20px;
      opacity: 0;
      pointer-events: none;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index: 20;
      box-shadow: 0 0 60px var(--accent-glow);
      overflow: hidden;
      padding: 40px;
    }

    .show-popup .form-popup {
      opacity: 1;
      pointer-events: auto;
      transform: translate(-50%, -50%) scale(1);
    }

    .form-popup .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 2rem;
      color: var(--neon-blue);
      cursor: pointer;
      z-index: 21;
      text-shadow: 0 0 15px var(--accent-glow);
    }

    .form-popup h2 {
      text-align: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 2.5rem;
      margin-bottom: 30px;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 20px rgba(0, 180, 255, 0.5);
    }

    .input-field {
      position: relative;
      margin-bottom: 25px;
    }

    .input-field input,
    .input-field select,
    .input-field textarea {
      width: 100%;
      padding: 16px 20px;
      background: rgba(0, 53, 102, 0.3);
      border: 2px solid var(--border);
      border-radius: 15px;
      color: var(--text-primary);
      font-size: 1rem;
      transition: all 0.3s;
    }

    .input-field input:focus,
    .input-field select:focus,
    .input-field textarea:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 20px var(--accent-glow);
      background: rgba(0, 53, 102, 0.5);
    }

    .input-field label {
      position: absolute;
      top: 16px;
      left: 20px;
      color: var(--text-secondary);
      transition: all 0.3s;
      pointer-events: none;
      background: var(--bg-secondary);
      padding: 0 8px;
    }

    .input-field input:focus ~ label,
    .input-field input:valid ~ label,
    .input-field input:not(:placeholder-shown) ~ label,
    .input-field textarea:focus ~ label,
    .input-field textarea:valid ~ label,
    .input-field textarea:not(:placeholder-shown) ~ label {
      top: -10px;
      left: 15px;
      font-size: 0.9rem;
      color: var(--neon-blue);
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .phone-field {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 10px;
    }

    .phone-field select {
      width: 100%;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%2300b4ff'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
      padding-right: 40px;
    }

    .phone-field input {
      width: 100%;
    }

    form button {
      width: 100%;
      background: linear-gradient(135deg, var(--neon-blue), var(--accent-secondary));
      color: #000;
      padding: 16px;
      border-radius: 15px;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.4s;
      border: none;
      font-family: 'Orbitron', sans-serif;
      margin-top: 10px;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    }

    form button:hover {
      box-shadow: 0 0 40px var(--accent-glow);
      transform: translateY(-5px);
    }

    .bottom-link {
      text-align: center;
      margin-top: 30px;
      color: var(--text-secondary);
    }

    .bottom-link a {
      color: var(--neon-blue);
      font-weight: 600;
      text-decoration: none;
      transition: color 0.3s;
      text-shadow: 0 0 10px var(--accent-glow);
      cursor: pointer;
    }

    .bottom-link a:hover {
      color: var(--accent-secondary);
      text-shadow: 0 0 20px rgba(0, 102, 255, 0.8);
    }

    .policy-text {
      display: flex;
      align-items: center;
      margin: 20px 0;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    .policy-text input {
      margin-right: 10px;
      accent-color: var(--neon-blue);
    }

    .policy-text a {
      color: var(--neon-blue);
      text-decoration: none;
      text-shadow: 0 0 10px var(--accent-glow);
      cursor: pointer;
    }

    .form-popup .signup,
    .form-popup.show-signup .login {
      display: none;
    }

    .form-popup.show-signup .signup {
      display: block;
    }

    .form-popup.login-form {
      display: block;
    }

    /* Main Content Area */
    .main-content {
      display: block;
    }

    .profile-content,
    .faq-content,
    .categories-content,
    .ebooks-content,
    .admin-content,
    .book-detail-content,
    .blog-content {
      display: none;
    }

    /* Hero Section */
    .hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 140px 20px 80px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 30% 50%, rgba(0, 180, 255, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 70% 30%, rgba(0, 102, 255, 0.15) 0%, transparent 50%);
      z-index: -1;
    }

    .hero-title {
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(4rem, 10vw, 10rem);
      font-weight: 900;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: transparent;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      -webkit-background-clip: text;
      background-clip: text;
      margin-bottom: 40px;
      animation: titleGlow 3s infinite alternate;
      text-shadow: 0 0 30px rgba(0, 180, 255, 0.5);
    }

    @keyframes titleGlow {
      0% {
        filter: drop-shadow(0 0 20px var(--accent-glow));
        letter-spacing: 0.3em;
      }
      100% {
        filter: drop-shadow(0 0 80px var(--accent-glow));
        letter-spacing: 0.35em;
      }
    }

    .hero-subtitle h2 {
      font-size: clamp(2rem, 5vw, 3rem);
      margin-bottom: 20px;
      background: linear-gradient(to right, var(--neon-blue), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 20px rgba(0, 180, 255, 0.5);
    }

    .hero-subtitle p {
      font-size: clamp(1.2rem, 2vw, 1.4rem);
      color: var(--text-secondary);
      max-width: 700px;
      margin: 0 auto 50px;
      line-height: 1.6;
      text-shadow: 0 0 10px rgba(0, 180, 255, 0.2);
    }

    .cta-btn {
      background: linear-gradient(135deg, var(--neon-blue), var(--accent-secondary));
      color: #000;
      padding: 20px 60px;
      border-radius: 50px;
      font-size: clamp(1.2rem, 2vw, 1.6rem);
      font-weight: 700;
      text-decoration: none;
      box-shadow: 0 0 40px var(--accent-glow);
      transition: all 0.5s;
      border: none;
      cursor: pointer;
      font-family: 'Orbitron', sans-serif;
      display: inline-block;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    }

    .cta-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 80px var(--accent-glow);
    }

    /* Blog Section Styles */
    .blog-section {
      padding: 120px 20px;
      position: relative;
    }

    .blog-section h2 {
      text-align: center;
      font-size: clamp(2rem, 5vw, 3rem);
      margin-bottom: 80px;
      color: var(--neon-blue);
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
      text-shadow: 0 0 20px var(--accent-glow);
    }

    .blog-section h2::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      border-radius: 2px;
      box-shadow: 0 0 20px var(--accent-glow);
    }

    .blog-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 40px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .blog-card {
      background: var(--bg-secondary);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 30px rgba(0, 180, 255, 0.1);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid var(--border);
      position: relative;
      cursor: pointer;
    }

    .blog-card:hover {
      transform: translateY(-20px) scale(1.02);
      border-color: var(--neon-blue);
      box-shadow: 0 30px 80px rgba(0, 180, 255, 0.3), 0 0 60px var(--accent-glow);
    }

    .blog-card img {
      width: 100%;
      height: 250px;
      object-fit: cover;
    }

    .blog-content {
      padding: 30px;
    }

    .blog-content h3 {
      font-size: 1.5rem;
      margin-bottom: 15px;
      color: var(--neon-blue);
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .blog-content p {
      color: var(--text-secondary);
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .blog-meta {
      display: flex;
      justify-content: space-between;
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-top: 20px;
    }

    /* Blog Detail Page */
    .blog-detail-content {
      max-width: 1000px;
      margin: 140px auto 60px;
      padding: 0 20px;
    }

    .blog-detail-header {
      text-align: center;
      margin-bottom: 60px;
    }

    .blog-detail-header h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 3.5rem;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 20px;
      text-shadow: 0 0 30px rgba(0, 180, 255, 0.5);
    }

    .blog-detail-meta {
      display: flex;
      justify-content: center;
      gap: 30px;
      color: var(--text-secondary);
      margin-bottom: 40px;
    }

    .blog-detail-image {
      width: 100%;
      height: 500px;
      object-fit: cover;
      border-radius: 20px;
      margin-bottom: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9), 0 0 40px var(--accent-glow);
    }

    .blog-detail-body {
      font-size: 1.2rem;
      line-height: 1.8;
      color: var(--text-secondary);
      margin-bottom: 60px;
    }

    .blog-detail-body h2,
    .blog-detail-body h3 {
      color: var(--neon-blue);
      margin: 40px 0 20px;
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .blog-detail-body p {
      margin-bottom: 20px;
    }

    .back-to-blog {
      text-align: center;
      margin-top: 60px;
    }

    /* Sections */
    .photo-gallery,
    .featured-books {
      padding: 120px 20px;
      position: relative;
    }

    .photo-gallery h2,
    .featured-books h2 {
      text-align: center;
      font-size: clamp(2rem, 5vw, 3rem);
      margin-bottom: 80px;
      color: var(--neon-blue);
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
      text-shadow: 0 0 20px var(--accent-glow);
    }

    .photo-gallery h2::after,
    .featured-books h2::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      border-radius: 2px;
      box-shadow: 0 0 20px var(--accent-glow);
    }

    .gallery-grid,
    .books-grid,
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 40px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9), 0 0 30px rgba(0, 180, 255, 0.2);
      transition: all 0.6s;
      border: 1px solid var(--border);
      cursor: pointer;
    }

    .gallery-item img {
      width: 100%;
      height: 450px;
      object-fit: cover;
      transition: transform 0.6s, filter 0.6s;
    }

    .gallery-item:hover {
      transform: translateY(-10px);
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.9), 0 0 50px var(--accent-glow);
      border-color: var(--neon-blue);
    }

    .gallery-item:hover img {
      transform: scale(1.1);
      filter: brightness(1.2) saturate(1.2);
    }

    .book-card {
      background: var(--bg-secondary);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 30px rgba(0, 180, 255, 0.1);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid var(--border);
      position: relative;
    }

    .book-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(0, 180, 255, 0.1), rgba(0, 102, 255, 0.1));
      opacity: 0;
      transition: opacity 0.5s;
    }

    .book-card:hover {
      transform: translateY(-20px) scale(1.02);
      border-color: var(--neon-blue);
      box-shadow: 0 30px 80px rgba(0, 180, 255, 0.3), 0 0 60px var(--accent-glow);
    }

    .book-card:hover::before {
      opacity: 1;
    }

    .book-cover-img {
      width: 100%;
      height: 400px;
      object-fit: contain;
      background: linear-gradient(135deg, #000, var(--bg-primary));
      padding: 20px;
    }

    .book-info {
      padding: 30px;
      text-align: center;
      position: relative;
      z-index: 1;
    }

    .book-info h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: var(--neon-blue);
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .book-info p {
      color: var(--text-secondary);
      margin-bottom: 20px;
      text-shadow: 0 0 5px rgba(0, 180, 255, 0.2);
    }

    .book-price {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--neon-blue);
      margin: 10px 0;
      text-shadow: 0 0 15px var(--accent-glow);
    }

    .buy-btn,
    .read-btn,
    .details-btn {
      background: linear-gradient(135deg, var(--neon-blue), var(--accent-secondary));
      color: #000;
      padding: 14px 40px;
      border-radius: 50px;
      font-weight: 700;
      cursor: pointer;
      border: none;
      transition: all 0.4s;
      font-family: 'Orbitron', sans-serif;
      display: inline-block;
      text-decoration: none;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
      box-shadow: 0 0 20px rgba(0, 180, 255, 0.3);
    }

    .buy-btn:hover,
    .read-btn:hover,
    .details-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 40px var(--accent-glow);
    }

    .read-btn {
      background: linear-gradient(135deg, var(--success), #00cc88);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
    }

    .details-btn {
      background: linear-gradient(135deg, #9d00ff, #ff00ff);
      box-shadow: 0 0 20px rgba(157, 0, 255, 0.3);
    }

    .free-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      background: var(--success);
      color: #000;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.9rem;
      z-index: 2;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
    }

    /* Cookie Banner */
    .cookie-banner {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--bg-secondary);
      padding: 20px 40px;
      border-radius: 50px;
      border: 2px solid var(--neon-blue);
      box-shadow: 0 0 40px var(--accent-glow);
      display: none;
      align-items: center;
      gap: 30px;
      z-index: 100;
      backdrop-filter: blur(10px);
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from { transform: translate(-50%, 100%); }
      to { transform: translate(-50%, 0); }
    }

    .cookie-banner p {
      color: var(--text-secondary);
      text-shadow: 0 0 10px rgba(0, 180, 255, 0.2);
    }

    .cookie-banner button {
      background: var(--neon-blue);
      color: #000;
      padding: 12px 30px;
      border-radius: 50px;
      font-weight: 700;
      cursor: pointer;
      border: none;
      transition: all 0.3s;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    }

    .cookie-banner button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px var(--accent-glow);
    }

    /* Cart Sidebar */
    .cart-sidebar {
      position: fixed;
      top: 0;
      right: -400px;
      width: 400px;
      height: 100vh;
      background: var(--bg-secondary);
      box-shadow: -10px 0 60px rgba(0, 0, 0, 0.9), -5px 0 30px rgba(0, 180, 255, 0.2);
      transition: right 0.4s;
      z-index: 1001;
      padding: 40px 30px;
      overflow-y: auto;
      border-left: 2px solid var(--neon-blue);
    }

    .cart-sidebar.active {
      right: 0;
    }

    .cart-items {
      margin-top: 30px;
    }

    .cart-item {
      display: flex;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
    }

    .cart-item img {
      width: 80px;
      height: 100px;
      object-fit: cover;
      margin-right: 20px;
      border-radius: 10px;
    }

    /* Book Detail Page Styles */
    .book-detail-content {
      max-width: 1400px;
      margin: 140px auto 60px;
      padding: 0 20px;
    }

    .book-detail-header {
      text-align: center;
      margin-bottom: 60px;
    }

    .book-detail-header h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 3.5rem;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 20px;
      text-shadow: 0 0 30px rgba(0, 180, 255, 0.5);
    }

    .book-detail-header p {
      color: var(--text-secondary);
      font-size: 1.2rem;
      max-width: 600px;
      margin: 0 auto;
      text-shadow: 0 0 10px rgba(0, 180, 255, 0.2);
    }

    .book-detail-section {
      background: rgba(0, 8, 20, 0.7);
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 30px rgba(0, 180, 255, 0.1);
      transition: all 0.3s;
    }

    .book-detail-section:hover {
      border-color: var(--neon-blue);
      box-shadow: 0 20px 80px rgba(0, 180, 255, 0.3), 0 0 40px var(--accent-glow);
    }

    .book-detail-grid {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 60px;
    }

    .book-cover-large {
      width: 100%;
      max-width: 400px;
      border-radius: 15px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9), 0 0 40px var(--accent-glow);
      border: 2px solid var(--neon-blue);
      margin: 0 auto;
    }

    .book-info-detail h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: var(--neon-blue);
      text-shadow: 0 0 20px var(--accent-glow);
    }

    .book-meta {
      display: flex;
      gap: 30px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-secondary);
    }

    .meta-item .material-symbols-rounded {
      color: var(--neon-blue);
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .book-price-large {
      font-family: 'Orbitron', sans-serif;
      font-size: 3rem;
      color: var(--neon-blue);
      margin: 30px 0;
      text-shadow: 0 0 20px var(--accent-glow);
    }

    .free-badge-large {
      display: inline-block;
      background: var(--success);
      color: #000;
      padding: 10px 25px;
      border-radius: 25px;
      font-weight: 700;
      font-size: 1.2rem;
      margin-left: 20px;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
    }

    .book-description {
      font-size: 1.1rem;
      line-height: 1.8;
      color: var(--text-secondary);
      margin-bottom: 40px;
      text-shadow: 0 0 5px rgba(0, 180, 255, 0.2);
    }

    .detail-actions {
      display: flex;
      gap: 20px;
      margin-top: 40px;
      flex-wrap: wrap;
    }

    .detail-btn {
      padding: 18px 40px;
      border-radius: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Orbitron', sans-serif;
      border: none;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 1.1rem;
    }

    .detail-btn.buy {
      background: linear-gradient(135deg, var(--neon-blue), var(--accent-secondary));
      color: #000;
      box-shadow: 0 0 30px var(--accent-glow);
    }

    .detail-btn.buy:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 50px var(--accent-glow);
    }

    .detail-btn.read {
      background: linear-gradient(135deg, var(--success), #00cc88);
      color: #000;
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
    }

    .detail-btn.read:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 50px rgba(0, 255, 136, 0.7);
    }

    .detail-btn.back {
      background: transparent;
      border: 2px solid var(--neon-blue);
      color: var(--neon-blue);
      box-shadow: 0 0 20px rgba(0, 180, 255, 0.3);
    }

    .detail-btn.back:hover {
      background: var(--neon-blue);
      color: #000;
      box-shadow: 0 0 30px var(--accent-glow);
    }

    .book-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 50px;
    }

    .stat-item {
      background: rgba(0, 53, 102, 0.3);
      border: 1px solid var(--border);
      border-radius: 15px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s;
    }

    .stat-item:hover {
      border-color: var(--neon-blue);
      box-shadow: 0 0 20px var(--accent-glow);
      transform: translateY(-5px);
    }

    .stat-item h4 {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .stat-item p {
      color: var(--neon-blue);
      font-size: 2rem;
      font-weight: 700;
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 15px var(--accent-glow);
    }

    /* Profile Page Styles */
    .profile-container,
    .faq-container,
    .categories-container,
    .ebooks-container,
    .admin-container {
      max-width: 1400px;
      margin: 140px auto 60px;
      padding: 0 20px;
    }

    .profile-header,
    .faq-header,
    .categories-header,
    .ebooks-header,
    .admin-header {
      text-align: center;
      margin-bottom: 60px;
    }

    .profile-header h1,
    .faq-header h1,
    .categories-header h1,
    .ebooks-header h1,
    .admin-header h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 3.5rem;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 20px;
      text-shadow: 0 0 30px rgba(0, 180, 255, 0.5);
    }

    .admin-header h1 {
      background: linear-gradient(90deg, var(--admin-purple), #ff00ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 30px var(--admin-glow);
    }

    .profile-header p,
    .faq-header p,
    .categories-header p,
    .ebooks-header p,
    .admin-header p {
      color: var(--text-secondary);
      font-size: 1.2rem;
      max-width: 600px;
      margin: 0 auto;
      text-shadow: 0 0 10px rgba(0, 180, 255, 0.2);
    }

    .admin-header p {
      color: var(--admin-purple);
      text-shadow: 0 0 10px var(--admin-glow);
    }

    .profile-section,
    .faq-section,
    .categories-section,
    .ebooks-section,
    .admin-section {
      background: rgba(0, 8, 20, 0.7);
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 30px rgba(0, 180, 255, 0.1);
      transition: all 0.3s;
    }

    .admin-section {
      border: 2px solid var(--admin-purple);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 30px var(--admin-glow);
    }

    .profile-section:hover,
    .faq-section:hover,
    .categories-section:hover,
    .ebooks-section:hover {
      border-color: var(--neon-blue);
      box-shadow: 0 20px 80px rgba(0, 180, 255, 0.3), 0 0 40px var(--accent-glow);
    }

    .admin-section:hover {
      border-color: var(--admin-purple);
      box-shadow: 0 20px 80px rgba(157, 0, 255, 0.3), 0 0 40px var(--admin-glow);
    }

    .profile-section h2,
    .faq-section h2,
    .categories-section h2,
    .ebooks-section h2,
    .admin-section h2 {
      color: var(--neon-blue);
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      margin-bottom: 30px;
      text-shadow: 0 0 15px var(--accent-glow);
    }

    .admin-section h2 {
      color: var(--admin-purple);
      text-shadow: 0 0 15px var(--admin-glow);
    }

    .profile-section h2::after,
    .faq-section h2::after,
    .categories-section h2::after,
    .ebooks-section h2::after {
      content: '';
      display: block;
      width: 80px;
      height: 3px;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      margin-top: 10px;
      border-radius: 2px;
      box-shadow: 0 0 10px var(--accent-glow);
    }

    .admin-section h2::after {
      background: linear-gradient(90deg, var(--admin-purple), #ff00ff);
      box-shadow: 0 0 10px var(--admin-glow);
    }

    /* User Info Grid */
    .user-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .info-card {
      background: rgba(0, 53, 102, 0.3);
      border: 1px solid var(--border);
      border-radius: 15px;
      padding: 20px;
      transition: all 0.3s;
    }

    .info-card:hover {
      border-color: var(--neon-blue);
      box-shadow: 0 0 20px var(--accent-glow);
      transform: translateY(-5px);
    }

    .info-card h3 {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .info-card p {
      color: var(--text-primary);
      font-size: 1.2rem;
      font-weight: 500;
      text-shadow: 0 0 10px rgba(0, 180, 255, 0.3);
    }

    .payment-methods {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 30px;
    }

    .payment-card {
      background: linear-gradient(135deg, rgba(0, 180, 255, 0.1), rgba(0, 102, 255, 0.1));
      border: 1px solid var(--border);
      border-radius: 15px;
      padding: 20px;
      min-width: 250px;
      transition: all 0.3s;
    }

    .payment-card:hover {
      border-color: var(--neon-blue);
      box-shadow: 0 0 25px var(--accent-glow);
    }

    .payment-card h3 {
      color: var(--neon-blue);
      margin-bottom: 15px;
      font-family: 'Orbitron', sans-serif;
    }

    .payment-card p {
      color: var(--text-secondary);
      font-family: monospace;
      font-size: 1.1rem;
      letter-spacing: 1px;
    }

    .add-payment-form {
      background: rgba(0, 53, 102, 0.3);
      border: 1px solid var(--border);
      border-radius: 15px;
      padding: 30px;
      margin-top: 30px;
      display: none;
    }

    .add-payment-form.show {
      display: block;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .input-group {
      position: relative;
    }

    .input-group input {
      width: 100%;
      padding: 15px 20px;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid var(--border);
      border-radius: 10px;
      color: var(--text-primary);
      font-size: 1rem;
      transition: all 0.3s;
    }

    .input-group input:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 15px var(--accent-glow);
    }

    .input-group label {
      position: absolute;
      top: 15px;
      left: 20px;
      color: var(--text-secondary);
      transition: all 0.3s;
      pointer-events: none;
      background: var(--bg-secondary);
      padding: 0 8px;
    }

    .input-group input:focus ~ label,
    .input-group input:valid ~ label {
      top: -10px;
      left: 12px;
      font-size: 0.8rem;
      color: var(--neon-blue);
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .form-buttons {
      display: flex;
      gap: 20px;
      margin-top: 30px;
    }

    .btn {
      padding: 12px 30px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Orbitron', sans-serif;
      border: none;
      text-decoration: none;
      display: inline-block;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--neon-blue), var(--accent-secondary));
      color: #000;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
      box-shadow: 0 0 20px var(--accent-glow);
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 30px var(--accent-glow);
    }

    .btn-secondary {
      background: transparent;
      border: 2px solid var(--neon-blue);
      color: var(--neon-blue);
      text-shadow: 0 0 10px var(--accent-glow);
      box-shadow: 0 0 15px rgba(0, 180, 255, 0.3);
    }

    .btn-secondary:hover {
      background: var(--neon-blue);
      color: #000;
      box-shadow: 0 0 30px var(--accent-glow);
    }

    .btn-danger {
      background: linear-gradient(135deg, #ff4444, #ff6666);
      color: white;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
      box-shadow: 0 0 20px rgba(255, 68, 68, 0.5);
    }

    .btn-danger:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 30px rgba(255, 68, 68, 0.7);
    }

    /* Categories Page Styles */
    .categories-section {
      margin-bottom: 40px;
    }

    .category-card {
      background: rgba(0, 53, 102, 0.3);
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 40px;
      text-align: center;
      transition: all 0.3s;
      cursor: pointer;
    }

    .category-card:hover {
      border-color: var(--neon-blue);
      box-shadow: 0 0 40px var(--accent-glow);
      transform: translateY(-10px);
    }

    .category-card .material-symbols-rounded {
      font-size: 4rem;
      color: var(--neon-blue);
      margin-bottom: 20px;
      text-shadow: 0 0 20px var(--accent-glow);
    }

    .category-card h3 {
      font-size: 1.8rem;
      margin-bottom: 15px;
      color: var(--text-primary);
    }

    .category-card p {
      color: var(--text-secondary);
      margin-bottom: 20px;
    }

    .category-count {
      display: inline-block;
      background: rgba(0, 180, 255, 0.2);
      color: var(--neon-blue);
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 600;
      text-shadow: 0 0 10px var(--accent-glow);
    }

    /* FAQ Page Styles */
    .faq-section {
      margin-bottom: 40px;
    }

    .faq-search {
      max-width: 600px;
      margin: 0 auto 40px;
    }

    .faq-search input {
      width: 100%;
      padding: 18px 24px;
      background: rgba(0, 53, 102, 0.3);
      border: 2px solid var(--border);
      border-radius: 50px;
      color: var(--text-primary);
      font-size: 1.1rem;
      transition: all 0.3s;
    }

    .faq-search input:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 30px var(--accent-glow);
      background: rgba(0, 53, 102, 0.5);
    }

    .faq-category {
      margin-bottom: 50px;
    }

    .faq-category h3 {
      color: var(--neon-blue);
      font-family: 'Orbitron', sans-serif;
      font-size: 1.8rem;
      margin-bottom: 25px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--border);
      text-shadow: 0 0 15px var(--accent-glow);
    }

    .faq-item {
      background: rgba(0, 53, 102, 0.2);
      border: 1px solid var(--border);
      border-radius: 15px;
      margin-bottom: 15px;
      overflow: hidden;
      transition: all 0.3s;
    }

    .faq-item:hover {
      border-color: var(--neon-blue);
      box-shadow: 0 0 20px rgba(0, 180, 255, 0.2);
    }

    .faq-question {
      padding: 25px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s;
    }

    .faq-question:hover {
      background: rgba(0, 180, 255, 0.1);
    }

    .faq-question h4 {
      color: var(--text-primary);
      font-size: 1.2rem;
      font-weight: 600;
      margin: 0;
      flex: 1;
      text-shadow: 0 0 10px rgba(0, 180, 255, 0.3);
    }

    .faq-question .material-symbols-rounded {
      color: var(--neon-blue);
      font-size: 1.8rem;
      transition: transform 0.3s;
      text-shadow: 0 0 10px var(--accent-glow);
    }

    .faq-answer {
      padding: 0 25px;
      max-height: 0;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .faq-answer p {
      color: var(--text-secondary);
      line-height: 1.7;
      padding: 0 0 25px;
      margin: 0;
      text-shadow: 0 0 5px rgba(0, 180, 255, 0.2);
    }

    .faq-item.active .faq-question {
      background: rgba(0, 180, 255, 0.15);
    }

    .faq-item.active .faq-answer {
      max-height: 500px;
      padding: 0 25px;
    }

    .faq-item.active .faq-question .material-symbols-rounded {
      transform: rotate(180deg);
    }

    /* Admin Panel Styles */
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: rgba(157, 0, 255, 0.1);
      border: 2px solid var(--admin-purple);
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      transition: all 0.3s;
    }

    .stat-card:hover {
      box-shadow: 0 0 30px var(--admin-glow);
      transform: translateY(-5px);
    }

    .stat-card .material-symbols-rounded {
      font-size: 3rem;
      color: var(--admin-purple);
      margin-bottom: 15px;
      text-shadow: 0 0 15px var(--admin-glow);
    }

    .stat-card h3 {
      color: var(--text-primary);
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 0 10px rgba(157, 0, 255, 0.5);
    }

    .stat-card p {
      color: var(--text-secondary);
      font-size: 1rem;
    }

    .admin-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .admin-table th {
      background: rgba(157, 0, 255, 0.2);
      color: var(--admin-purple);
      padding: 15px;
      text-align: left;
      border-bottom: 2px solid var(--admin-purple);
      text-shadow: 0 0 10px var(--admin-glow);
    }

    .admin-table td {
      padding: 15px;
      border-bottom: 1px solid rgba(157, 0, 255, 0.2);
      color: var(--text-primary);
    }

    .admin-table tr:hover {
      background: rgba(157, 0, 255, 0.1);
    }

    .admin-action-btn {
      padding: 8px 16px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-family: 'Orbitron', sans-serif;
      font-weight: 600;
      transition: all 0.3s;
      margin: 0 5px;
    }

    .btn-edit {
      background: rgba(0, 180, 255, 0.2);
      color: var(--neon-blue);
      border: 1px solid var(--neon-blue);
    }

    .btn-delete {
      background: rgba(255, 68, 68, 0.2);
      color: var(--error);
      border: 1px solid var(--error);
    }

    .btn-view {
      background: rgba(0, 255, 136, 0.2);
      color: var(--success);
      border: 1px solid var(--success);
    }

    .btn-details {
      background: rgba(157, 0, 255, 0.2);
      color: var(--admin-purple);
      border: 1px solid var(--admin-purple);
    }

    .btn-edit:hover {
      background: var(--neon-blue);
      color: #000;
      box-shadow: 0 0 20px var(--accent-glow);
    }

    .btn-delete:hover {
      background: var(--error);
      color: white;
      box-shadow: 0 0 20px rgba(255, 68, 68, 0.5);
    }

    .btn-view:hover {
      background: var(--success);
      color: #000;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
    }

    .btn-details:hover {
      background: var(--admin-purple);
      color: #000;
      box-shadow: 0 0 20px var(--admin-glow);
    }

    .add-book-form,
    .add-blog-form {
      background: rgba(157, 0, 255, 0.1);
      border: 2px solid var(--admin-purple);
      border-radius: 15px;
      padding: 30px;
      margin-top: 30px;
      display: none;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      color: var(--admin-purple);
      margin-bottom: 8px;
      font-weight: 500;
      text-shadow: 0 0 10px var(--admin-glow);
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      padding: 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid var(--border);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 1rem;
      transition: all 0.3s;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--admin-purple);
      box-shadow: 0 0 20px var(--admin-glow);
    }

    .form-group textarea {
      min-height: 100px;
      resize: vertical;
    }

    .admin-form-buttons {
      display: flex;
      gap: 20px;
      margin-top: 30px;
    }

    .admin-btn-primary {
      background: linear-gradient(135deg, var(--admin-purple), #ff00ff);
      color: white;
      padding: 12px 30px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-family: 'Orbitron', sans-serif;
      font-weight: 600;
      transition: all 0.3s;
    }

    .admin-btn-primary:hover {
      box-shadow: 0 0 30px var(--admin-glow);
      transform: translateY(-3px);
    }

    /* E-Books Page Styles */
    .ebooks-filter {
      display: flex;
      gap: 20px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }

    .filter-select {
      padding: 12px 20px;
      background: rgba(0, 53, 102, 0.3);
      border: 2px solid var(--border);
      border-radius: 10px;
      color: var(--text-primary);
      font-size: 1rem;
      min-width: 200px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .filter-select:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 20px var(--accent-glow);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-secondary);
    }

    .empty-state .material-symbols-rounded {
      font-size: 4rem;
      color: var(--neon-blue);
      margin-bottom: 20px;
      text-shadow: 0 0 20px var(--accent-glow);
    }

    .empty-state h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: var(--text-primary);
    }

    /* Contact Support */
    .contact-support {
      background: linear-gradient(135deg, rgba(0, 180, 255, 0.1), rgba(0, 102, 255, 0.1));
      border: 2px solid var(--neon-blue);
      border-radius: 20px;
      padding: 40px;
      text-align: center;
      margin-top: 60px;
      box-shadow: 0 0 40px var(--accent-glow);
    }

    .contact-support h3 {
      color: var(--neon-blue);
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      margin-bottom: 20px;
      text-shadow: 0 0 20px var(--accent-glow);
    }

    .contact-support p {
      color: var(--text-secondary);
      margin-bottom: 30px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Mobile Responsiveness */
    @media (max-width: 950px) {
      .hamburger-btn,
      .close-btn {
        display: block;
      }

      .search-container {
        display: none;
      }

      .links {
        position: fixed;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100vh;
        background: var(--bg-secondary);
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transition: 0.4s;
        gap: 40px;
        z-index: 999;
        border-right: 2px solid var(--neon-blue);
      }

      .links.show-menu {
        left: 0;
      }

      .form-popup {
        padding: 30px 20px;
      }

      .cart-sidebar {
        width: 100%;
        right: -100%;
      }

      .header-actions {
        gap: 10px;
      }

      .profile-header h1,
      .faq-header h1,
      .categories-header h1,
      .ebooks-header h1,
      .admin-header h1,
      .book-detail-header h1,
      .blog-detail-header h1 {
        font-size: 2.5rem;
      }

      .gallery-grid,
      .books-grid,
      .categories-grid,
      .blog-grid {
        grid-template-columns: 1fr;
      }

      .admin-stats {
        grid-template-columns: 1fr;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .admin-form-buttons {
        flex-direction: column;
      }

      .ebooks-filter {
        flex-direction: column;
      }

      .book-detail-grid {
        grid-template-columns: 1fr;
        gap: 30px;
      }

      .book-cover-large {
        max-width: 300px;
      }

      .detail-actions {
        flex-direction: column;
      }

      .detail-btn {
        width: 100%;
      }
    }

    @media (max-width: 768px) {
      .hero-title {
        letter-spacing: 0.2em;
      }

      .cookie-banner {
        flex-direction: column;
        text-align: center;
        padding: 20px;
        width: 90%;
      }

      .header-actions {
        flex-direction: column;
        align-items: flex-end;
      }

      .profile-section,
      .faq-section,
      .categories-section,
      .ebooks-section,
      .admin-section,
      .book-detail-section,
      .blog-detail-body {
        padding: 20px;
      }

      .admin-table {
        display: block;
        overflow-x: auto;
      }

      .book-info-detail h2 {
        font-size: 2rem;
      }

      .book-price-large {
        font-size: 2.5rem;
      }

      .book-stats {
        grid-template-columns: repeat(2, 1fr);
      }

      .blog-detail-image {
        height: 300px;
      }
    }
  </style>
</head>

<body>
  <div class="parallax-bg"></div>
  
  <header>
    <nav class="navbar">
      <span class="hamburger-btn material-symbols-rounded">menu</span>
      <a href="#" class="logo" id="home-logo">
        <span class="material-symbols-rounded">code</span>
        <h2>Better Programmer</h2>
      </a>
      <div class="search-container">
        <div class="search-box">
          <input type="search" placeholder="Search e-books..." id="search-input">
          <span class="material-symbols-rounded search-icon" id="search-btn">search</span>
        </div>
      </div>
      <ul class="links">
        <span class="close-btn material-symbols-rounded">close</span>
        <li><a href="#" class="nav-link" data-page="home">Home</a></li>
        <li><a href="#" class="nav-link" data-page="ebooks">E-Books</a></li>
        <li><a href="#" class="nav-link" data-page="categories">Categories</a></li>
        <li><a href="#" class="nav-link" data-page="faq">FAQ</a></li>
        <li><a href="#" class="nav-link" data-page="profile">Profile</a></li>
        <li><a href="#" class="nav-link" data-page="admin" id="admin-nav" style="display: none;">Admin</a></li>
      </ul>
      <div class="header-actions">
        <button class="cart-btn" id="cart-btn">
          <span class="material-symbols-rounded">shopping_cart</span>
          <span class="cart-count" id="cart-count">0</span>
        </button>
        <button class="login-btn" id="login-btn">SIGN IN</button>
        <button class="admin-btn" id="admin-btn" style="display: none;">ADMIN</button>
      </div>
    </nav>
  </header>

  <!-- Cart Sidebar -->
  <div class="cart-sidebar" id="cart-sidebar">
    <h2>Shopping Cart</h2>
    <div class="cart-items" id="cart-items">
      <!-- Cart items will be dynamically added here -->
    </div>
    <button id="checkout-btn" class="buy-btn" style="width: 100%; margin-top: 20px;">Checkout</button>
  </div>

  <!-- Notification Toast -->
  <div class="toast" id="toast"></div>

  <!-- Popup Overlays -->
  <div class="blur-bg-overlay"></div>

  <!-- Login Form -->
  <div class="form-popup login-form" id="login-popup">
    <span class="close-btn material-symbols-rounded">close</span>
    <h2>Welcome Back</h2>
    <form id="login-form">
      <div class="input-field">
        <input type="email" required id="login-email">
        <label>Email Address</label>
      </div>
      <div class="input-field">
        <input type="password" required id="login-password">
        <label>Password</label>
      </div>
      <button type="submit">LOG IN</button>
    </form>
    <div class="bottom-link">
      Don't have an account? <a href="#" id="show-signup">Sign Up</a>
    </div>
  </div>

  <!-- Signup Form -->
  <div class="form-popup signup-form" id="signup-popup" style="display: none;">
    <span class="close-btn material-symbols-rounded">close</span>
    <h2>Join Better Programmer</h2>
    <form id="signup-form">
      <div class="input-field">
        <input type="text" required id="signup-name">
        <label>Full Name</label>
      </div>
      <div class="input-field">
        <input type="email" required id="signup-email">
        <label>Email Address</label>
      </div>
      <div class="input-field phone-field">
        <select id="country-code" required>
          <option value="+995"> +995</option>
          <option value="+1"> +1</option>
          <option value="+44"> +44</option>
          <option value="+33"> +33</option>
          <option value="+49"> +49</option>
          <option value="+7"> +7</option>
        </select>
        <input type="tel" id="phone-number" required placeholder="Phone Number" pattern="[0-9]{9,15}">
        <label style="display: none;">Phone Number</label>
      </div>
      <div class="input-field">
        <input type="number" min="13" max="120" required id="signup-age">
        <label>Age</label>
      </div>
      <div class="input-field">
        <input type="password" required id="signup-password" minlength="8">
        <label>Password (min 8 characters)</label>
      </div>
      <div class="input-field">
        <input type="password" required id="signup-confirm-password">
        <label>Confirm Password</label>
      </div>
      <div class="policy-text">
        <input type="checkbox" required id="terms-checkbox">
        <label>I agree to the <a href="#" onclick="app.showToast('Terms & Conditions: This is a demo site. All data is stored in your browser. No real purchases.', 'info')">Terms & Conditions</a></label>
      </div>
      <button type="submit">CREATE ACCOUNT</button>
    </form>
    <div class="bottom-link">
      Already have an account? <a href="#" id="show-login">Log In</a>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content" id="main-content">
    <!-- Hero Section -->
    <section class="hero" id="home">
      <h1 class="hero-title">BETTER PROGRAMMER</h1>
      <div class="hero-subtitle">
        <h2>Master the Code. Master the Future.</h2>
        <p>Premium programming e-books  Expert insights  Become unstoppable</p>
        <button class="cta-btn" id="explore-btn">Explore Library</button>
      </div>
    </section>

    <!-- Blog Section -->
    <section class="blog-section" id="blog-section">
      <h2>Programming Insights & News</h2>
      <div class="blog-grid" id="blog-grid">
        <!-- Blog posts loaded dynamically -->
      </div>
    </section>

    <!-- Featured Books -->
    <section class="featured-books" id="books">
      <h2>Featured E-Books</h2>
      <div class="books-grid" id="featured-books-grid">
        <!-- Featured books loaded dynamically -->
      </div>
    </section>
  </div>

  <!-- Blog Detail Content Area -->
  <div class="blog-content" id="blog-detail-content">
    <!-- Blog detail will be loaded dynamically -->
  </div>

  <!-- Book Detail Content Area -->
  <div class="book-detail-content" id="book-detail-content">
    <!-- Book detail will be loaded dynamically -->
  </div>

  <!-- E-Books Content Area -->
  <div class="ebooks-content" id="ebooks-content">
    <div class="ebooks-container">
      <div class="ebooks-header">
        <h1>E-BOOKS LIBRARY</h1>
        <p>Browse our complete collection of programming e-books</p>
      </div>

      <div class="ebooks-section">
        <div class="ebooks-filter">
          <select class="filter-select" id="category-filter">
            <option value="all">All Categories</option>
            <option value="web">Web Development</option>
            <option value="mobile">Mobile Development</option>
            <option value="data">Data Science</option>
            <option value="ai">AI & Machine Learning</option>
            <option value="devops">DevOps</option>
            <option value="algorithms">Algorithms</option>
          </select>
          <select class="filter-select" id="price-filter">
            <option value="all">All Prices</option>
            <option value="free">Free</option>
            <option value="paid">Paid</option>
            <option value="under-20">Under $20</option>
            <option value="20-50">$20 - $50</option>
            <option value="over-50">Over $50</option>
          </select>
          <select class="filter-select" id="sort-filter">
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="price-low">Price: Low to High</option>
            <option value="price-high">Price: High to Low</option>
            <option value="popular">Most Popular</option>
          </select>
        </div>

        <div class="books-grid" id="all-books-grid">
          <!-- All books loaded dynamically -->
        </div>
      </div>
    </div>
  </div>

  <!-- Categories Content Area -->
  <div class="categories-content" id="categories-content">
    <div class="categories-container">
      <div class="categories-header">
        <h1>CATEGORIES</h1>
        <p>Explore programming e-books by category</p>
      </div>

      <div class="categories-section">
        <div class="categories-grid">
          <div class="category-card" data-category="web">
            <span class="material-symbols-rounded">language</span>
            <h3>Web Development</h3>
            <p>Master frontend and backend web technologies</p>
            <span class="category-count" id="web-count">0 Books</span>
          </div>
          <div class="category-card" data-category="mobile">
            <span class="material-symbols-rounded">smartphone</span>
            <h3>Mobile Development</h3>
            <p>Build iOS and Android applications</p>
            <span class="category-count" id="mobile-count">0 Books</span>
          </div>
          <div class="category-card" data-category="data">
            <span class="material-symbols-rounded">analytics</span>
            <h3>Data Science</h3>
            <p>Data analysis, visualization, and statistics</p>
            <span class="category-count" id="data-count">0 Books</span>
          </div>
          <div class="category-card" data-category="ai">
            <span class="material-symbols-rounded">psychology</span>
            <h3>AI & Machine Learning</h3>
            <p>Artificial intelligence and ML algorithms</p>
            <span class="category-count" id="ai-count">0 Books</span>
          </div>
          <div class="category-card" data-category="devops">
            <span class="material-symbols-rounded">settings</span>
            <h3>DevOps</h3>
            <p>Deployment, containers, and infrastructure</p>
            <span class="category-count" id="devops-count">0 Books</span>
          </div>
          <div class="category-card" data-category="algorithms">
            <span class="material-symbols-rounded">code</span>
            <h3>Algorithms</h3>
            <p>Data structures and problem solving</p>
            <span class="category-count" id="algorithms-count">0 Books</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Profile Content Area -->
  <div class="profile-content" id="profile-content">
    <div class="profile-container">
      <div class="profile-header">
        <h1>MY PROFILE</h1>
        <p>Manage your account, view purchased books, and update payment methods</p>
      </div>

      <!-- User Information -->
      <div class="profile-section">
        <h2>Personal Information</h2>
        <div class="user-info-grid" id="user-details">
          <!-- User info will be loaded here -->
        </div>
      </div>

      <!-- Payment Methods -->
      <div class="profile-section">
        <h2>Payment Methods</h2>
        <div class="payment-methods" id="payment-list">
          <!-- Payment methods will be loaded here -->
        </div>
        <button id="add-payment-btn" class="btn-secondary" style="margin-top: 20px;">
          <span class="material-symbols-rounded">add</span>
          Add Payment Method
        </button>
        
        <div class="add-payment-form" id="add-payment-form">
          <form id="add-payment">
            <div class="form-row">
              <div class="input-group">
                <input type="text" required id="card-number" pattern="\d{16}" placeholder="1234 5678 9012 3456">
                <label>Card Number</label>
              </div>
              <div class="input-group">
                <input type="text" required id="card-expiry" placeholder="MM/YY" pattern="\d{2}/\d{2}">
                <label>Expiry Date</label>
              </div>
              <div class="input-group">
                <input type="text" required id="card-cvv" pattern="\d{3,4}" placeholder="123">
                <label>CVV</label>
              </div>
            </div>
            <div class="form-buttons">
              <button type="submit" class="btn-primary">Add Card</button>
              <button type="button" id="cancel-payment" class="btn-secondary">Cancel</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Purchased Books -->
      <div class="profile-section">
        <h2>My Library</h2>
        <div id="purchased-list">
          <!-- Purchased books will be loaded here -->
        </div>
      </div>

      <!-- Account Actions -->
      <div class="profile-section" style="text-align: center;">
        <div class="form-buttons" style="justify-content: center;">
          <button id="logout-btn" class="btn-danger">
            <span class="material-symbols-rounded">logout</span>
            Logout
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- FAQ Content Area -->
  <div class="faq-content" id="faq-content">
    <div class="faq-container">
      <div class="faq-header">
        <h1>FREQUENTLY ASKED QUESTIONS</h1>
        <p>Find answers to common questions about Better Programmer e-books</p>
      </div>

      <!-- FAQ Search -->
      <div class="faq-search">
        <input type="text" id="faq-search-input" placeholder="Search for questions...">
      </div>

      <!-- FAQ Categories -->
      <div class="faq-section">
        <!-- Account & Registration -->
        <div class="faq-category">
          <h3>Account & Registration</h3>
          <div class="faq-item">
            <div class="faq-question">
              <h4>How do I create an account?</h4>
              <span class="material-symbols-rounded">expand_more</span>
            </div>
            <div class="faq-answer">
              <p>Click the "SIGN IN" button in the top right corner, then select "Sign Up" to create a new account. You'll need to provide your name, email, phone number, age, and create a password. After registration, you can immediately start browsing and purchasing e-books.</p>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question">
              <h4>Is there a minimum age requirement?</h4>
              <span class="material-symbols-rounded">expand_more</span>
            </div>
            <div class="faq-answer">
              <p>Yes, you must be at least 13 years old to create an account on Better Programmer. This is to ensure compliance with international data protection regulations and to provide age-appropriate content.</p>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question">
              <h4>Can I change my account information?</h4>
              <span class="material-symbols-rounded">expand_more</span>
            </div>
            <div class="faq-answer">
              <p>Currently, account information changes require contacting our support team. We're working on adding profile editing features in future updates. For now, please contact support@betterprogrammer.com for assistance with account updates.</p>
            </div>
          </div>
        </div>

        <!-- Purchases & Payments -->
        <div class="faq-category">
          <h3>Purchases & Payments</h3>
          <div class="faq-item">
            <div class="faq-question">
              <h4>What payment methods do you accept?</h4>
              <span class="material-symbols-rounded">expand_more</span>
            </div>
            <div class="faq-answer">
              <p>We accept major credit cards including Visa, MasterCard, and American Express. You can securely add your payment methods in your profile section. All payments are processed through secure, encrypted channels to ensure your financial information is protected.</p>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question">
              <h4>Are there any free e-books available?</h4>
              <span class="material-symbols-rounded">expand_more</span>
            </div>
            <div class="faq-answer">
              <p>Yes! We offer several free e-books to help you get started. Look for the "FREE" badge on book covers. Free e-books can be added directly to your library without payment. We regularly update our free selection, so check back often for new additions.</p>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question">
              <h4>Can I get a refund for my purchase?</h4>
              <span class="material-symbols-rounded">expand_more</span>
            </div>
            <div class="faq-answer">
              <p>Due to the digital nature of our products, we offer refunds within 14 days of purchase if you haven't accessed the e-book. To request a refund, please contact our support team with your order details. Refunds are processed within 5-7 business days.</p>
            </div>
          </div>
        </div>

        <!-- E-Book Access & Reading -->
        <div class="faq-category">
          <h3>E-Book Access & Reading</h3>
          <div class="faq-item">
            <div class="faq-question">
              <h4>How do I access my purchased e-books?</h4>
              <span class="material-symbols-rounded">expand_more</span>
            </div>
            <div class="faq-answer">
              <p>Once purchased, e-books are available in your profile under "My Library." Simply click the "Read Now" button on any purchased book to start reading immediately in your browser. All e-books are stored in your account and can be accessed from any device with internet connection.</p>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question">
              <h4>Can I download e-books for offline reading?</h4>
              <span class="material-symbols-rounded">expand_more</span>
            </div>
            <div class="faq-answer">
              <p>Currently, our e-books are only available for online reading through our platform. We're working on developing offline reading capabilities. For now, you need an internet connection to access your e-books, but you can read them on any device with a web browser.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Support -->
      <div class="contact-support">
        <h3>Still Have Questions?</h3>
        <p>Can't find what you're looking for? Contact our support team for help.</p>
        <a href="mailto:support@betterprogrammer.com" class="btn-primary" style="margin-top: 20px; display: inline-block;">
          <span class="material-symbols-rounded">mail</span>
          Contact Support
        </a>
      </div>
    </div>
  </div>

  <!-- Admin Content Area -->
  <div class="admin-content" id="admin-content">
    <div class="admin-container">
      <div class="admin-header">
        <h1>ADMIN PANEL</h1>
        <p>Manage users, books, and platform settings</p>
      </div>

      <!-- Admin Statistics -->
      <div class="admin-section">
        <h2>Platform Statistics</h2>
        <div class="admin-stats">
          <div class="stat-card">
            <span class="material-symbols-rounded">group</span>
            <h3 id="total-users">0</h3>
            <p>Total Users</p>
          </div>
          <div class="stat-card">
            <span class="material-symbols-rounded">menu_book</span>
            <h3 id="total-books">0</h3>
            <p>Total Books</p>
          </div>
          <div class="stat-card">
            <span class="material-symbols-rounded">shopping_cart</span>
            <h3 id="total-sales">0</h3>
            <p>Total Sales</p>
          </div>
          <div class="stat-card">
            <span class="material-symbols-rounded">attach_money</span>
            <h3 id="total-revenue">$0</h3>
            <p>Total Revenue</p>
          </div>
        </div>
      </div>

      <!-- User Management -->
      <div class="admin-section">
        <h2>User Management</h2>
        <div class="admin-table-container">
          <table class="admin-table" id="users-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Joined</th>
                <th>Purchases</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="users-table-body">
              <!-- Users loaded dynamically -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Book Management -->
      <div class="admin-section">
        <h2>Book Management</h2>
        <button id="add-book-btn" class="admin-btn-primary">
          <span class="material-symbols-rounded">add</span>
          Add New Book
        </button>

        <div class="add-book-form" id="add-book-form" style="display: none;">
          <h3>Add New Book</h3>
          <form id="new-book-form">
            <div class="form-grid">
              <div class="form-group">
                <label>Book Title *</label>
                <input type="text" required id="book-title" placeholder="Clean Code">
              </div>
              <div class="form-group">
                <label>Author *</label>
                <input type="text" required id="book-author" placeholder="Robert C. Martin">
              </div>
              <div class="form-group">
                <label>Category *</label>
                <select required id="book-category">
                  <option value="web">Web Development</option>
                  <option value="mobile">Mobile Development</option>
                  <option value="data">Data Science</option>
                  <option value="ai">AI & Machine Learning</option>
                  <option value="devops">DevOps</option>
                  <option value="algorithms">Algorithms</option>
                </select>
              </div>
              <div class="form-group">
                <label>Price ($) *</label>
                <input type="number" step="0.01" required id="book-price" placeholder="29.99">
              </div>
              <div class="form-group">
                <label>Cover Image URL *</label>
                <input type="url" required id="book-image" placeholder="https://example.com/book.jpg">
              </div>
              <div class="form-group">
                <label>PDF URL *</label>
                <input type="url" required id="book-pdf" placeholder="https://example.com/book.pdf">
              </div>
              <div class="form-group">
                <label>Payment Link</label>
                <input type="url" id="book-payment-link" placeholder="https://payment.example.com">
              </div>
              <div class="form-group">
                <label>Description *</label>
                <textarea id="book-description" placeholder="Book description..." required></textarea>
              </div>
              <div class="form-group">
                <label>Pages</label>
                <input type="number" id="book-pages" placeholder="300">
              </div>
              <div class="form-group">
                <label>Language</label>
                <input type="text" id="book-language" placeholder="English">
              </div>
              <div class="form-group">
                <label>Rating (1-5)</label>
                <input type="number" step="0.1" min="0" max="5" id="book-rating" placeholder="4.5">
              </div>
            </div>
            <div class="admin-form-buttons">
              <button type="submit" class="admin-btn-primary">Add Book</button>
              <button type="button" id="cancel-book" class="btn-secondary">Cancel</button>
            </div>
          </form>
        </div>

        <div class="admin-table-container" style="margin-top: 30px;">
          <table class="admin-table" id="books-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Author</th>
                <th>Category</th>
                <th>Price</th>
                <th>Sales</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="books-table-body">
              <!-- Books loaded dynamically -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Blog Management -->
      <div class="admin-section">
        <h2>Blog Management</h2>
        <button id="add-blog-btn" class="admin-btn-primary">
          <span class="material-symbols-rounded">add</span>
          Add New Blog Post
        </button>

        <div class="add-blog-form" id="add-blog-form" style="display: none;">
          <h3>Add New Blog Post</h3>
          <form id="new-blog-form">
            <div class="form-grid">
              <div class="form-group">
                <label>Blog Title *</label>
                <input type="text" required id="blog-title" placeholder="The Future of Web Development">
              </div>
              <div class="form-group">
                <label>Author *</label>
                <input type="text" required id="blog-author" placeholder="John Doe">
              </div>
              <div class="form-group">
                <label>Category *</label>
                <select required id="blog-category">
                  <option value="web">Web Development</option>
                  <option value="mobile">Mobile Development</option>
                  <option value="data">Data Science</option>
                  <option value="ai">AI & Machine Learning</option>
                  <option value="devops">DevOps</option>
                  <option value="news">Industry News</option>
                  <option value="tutorials">Tutorials</option>
                </select>
              </div>
              <div class="form-group">
                <label>Image URL *</label>
                <input type="url" required id="blog-image" placeholder="https://example.com/blog.jpg">
              </div>
              <div class="form-group">
                <label>Content *</label>
                <textarea id="blog-content" placeholder="Blog content..." required rows="10"></textarea>
              </div>
              <div class="form-group">
                <label>Excerpt (Short Description)</label>
                <textarea id="blog-excerpt" placeholder="Short description..." rows="3"></textarea>
              </div>
            </div>
            <div class="admin-form-buttons">
              <button type="submit" class="admin-btn-primary">Add Blog Post</button>
              <button type="button" id="cancel-blog" class="btn-secondary">Cancel</button>
            </div>
          </form>
        </div>

        <div class="admin-table-container" style="margin-top: 30px;">
          <table class="admin-table" id="blogs-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Author</th>
                <th>Category</th>
                <th>Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="blogs-table-body">
              <!-- Blogs loaded dynamically -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Cookie Banner -->
  <div id="cookie-banner" class="cookie-banner">
    <p>We use cookies to improve your experience. By continuing, you agree to our use of cookies.</p>
    <button id="accept-cookies">Accept</button>
  </div>

  <script>
    // Enhanced JavaScript with all features including Blog System and Fixed Admin Panel
    const app = {
      // Admin credentials
      ADMIN_EMAIL: 'better@gmail.com',
      ADMIN_PASSWORD: 'admin',

      // Initialize all functionality
      init() {
        this.loadData();
        this.setupEventListeners();
        this.updateUI();
        this.showCookieBanner();
        this.checkPageState();
        this.loadBooks();
        this.loadBlogPosts();
        this.updateCategoryCounts();
        this.initFAQ();
      },

      // Data management
      loadData() {
        // Initialize users if not exists
        if (!localStorage.getItem('users')) {
          // Create admin user
          const adminUser = {
            name: 'Admin User',
            email: this.ADMIN_EMAIL,
            password: this.ADMIN_PASSWORD,
            phone: '+995123456789',
            age: 30,
            purchased: [],
            payments: [],
            joinDate: new Date().toISOString(),
            isAdmin: true
          };
          
          localStorage.setItem('users', JSON.stringify([adminUser]));
        }

        // Initialize cart if not exists
        if (!localStorage.getItem('cart')) {
          localStorage.setItem('cart', JSON.stringify([]));
        }

        // Initialize books if not exists
        if (!localStorage.getItem('books')) {
          const defaultBooks = {
            'clean-code': {
              id: 'clean-code',
              title: 'Clean Code',
              author: 'Robert C. Martin',
              price: 29.99,
              category: 'algorithms',
              image: 'https://m.media-amazon.com/images/I/71T7aD3EOTL.jpg',
              pdf: 'https://eloquentjavascript.net/Eloquent_JavaScript.pdf',
              description: 'Even bad code can function. But if code isn\'t clean, it can bring a development organization to its knees. Every year, countless hours and significant resources are lost because of poorly written code. But it doesn\'t have to be that way.',
              sales: 1250,
              pages: 464,
              language: 'English',
              rating: 4.7,
              addedDate: new Date().toISOString()
            },
            'pragmatic': {
              id: 'pragmatic',
              title: 'The Pragmatic Programmer',
              author: 'David Thomas & Andrew Hunt',
              price: 39.99,
              category: 'web',
              image: 'https://m.media-amazon.com/images/I/911WvX7M98L.jpg',
              pdf: 'https://eloquentjavascript.net/Eloquent_JavaScript.pdf',
              description: 'The Pragmatic Programmer is one of those rare tech books you\'ll read, re-read, and read again over the years. Whether you\'re new to the field or an experienced practitioner, you\'ll come away with fresh insights each and every time.',
              sales: 980,
              pages: 352,
              language: 'English',
              rating: 4.8,
              addedDate: new Date().toISOString()
            },
            'eloquent-js': {
              id: 'eloquent-js',
              title: 'Eloquent JavaScript',
              author: 'Marijn Haverbeke',
              price: 0,
              category: 'web',
              image: 'https://eloquentjavascript.net/img/cover.jpg',
              pdf: 'https://eloquentjavascript.net/Eloquent_JavaScript.pdf',
              description: 'This is a book about JavaScript, programming, and the wonders of the digital. You can read it online here, or buy your own paperback copy. Written by Marijn Haverbeke.',
              sales: 3500,
              pages: 472,
              language: 'English',
              rating: 4.6,
              addedDate: new Date().toISOString()
            }
          };
          localStorage.setItem('books', JSON.stringify(defaultBooks));
        }

        // Initialize blog posts if not exists
        if (!localStorage.getItem('blogs')) {
          const defaultBlogs = {
            'future-web': {
              id: 'future-web',
              title: 'The Future of Web Development: 2024 Trends',
              author: 'Sarah Johnson',
              category: 'web',
              image: 'https://images.unsplash.com/photo-1555066931-4365d14d8f22?auto=format&fit=crop&w=1600&q=80',
              content: `
                <h2>The Rise of AI-Powered Development</h2>
                <p>Artificial Intelligence is revolutionizing how we build web applications. From code generation to automated testing, AI tools are becoming essential in every developer's toolkit.</p>
                
                <h2>WebAssembly Takes Center Stage</h2>
                <p>WebAssembly continues to gain traction, enabling high-performance applications to run directly in the browser. Expect to see more complex applications moving to WASM in 2024.</p>
                
                <h2>Serverless Architecture Matures</h2>
                <p>Serverless computing has moved beyond hype to become a mainstream architecture choice for scalable web applications.</p>
                
                <h2>Edge Computing for Faster Performance</h2>
                <p>Distributing computation to edge locations brings content closer to users, resulting in dramatically improved performance.</p>
              `,
              excerpt: 'Explore the latest trends shaping web development in 2024, from AI integration to edge computing.',
              date: new Date().toISOString(),
              views: 1245
            },
            'ai-programming': {
              id: 'ai-programming',
              title: 'How AI is Changing Programming Forever',
              author: 'Michael Chen',
              category: 'ai',
              image: 'https://images.unsplash.com/photo-1517180102446-f3ece451e9d8?auto=format&fit=crop&w=1600&q=80',
              content: `
                <h2>The AI Assistant Revolution</h2>
                <p>Tools like GitHub Copilot and Amazon CodeWhisperer are transforming how developers write code. These AI assistants can generate entire functions, suggest improvements, and even debug code.</p>
                
                <h2>From Coding to Prompt Engineering</h2>
                <p>Developers are increasingly becoming "prompt engineers" - experts at crafting instructions that guide AI to produce desired outcomes.</p>
                
                <h2>Automated Code Review</h2>
                <p>AI-powered code review tools are becoming sophisticated enough to catch bugs, suggest optimizations, and enforce coding standards automatically.</p>
                
                <h2>The Future Developer Skill Set</h2>
                <p>Future developers will need to master AI collaboration, understanding how to effectively work alongside intelligent coding assistants.</p>
              `,
              excerpt: 'Discover how artificial intelligence is revolutionizing programming practices and developer workflows.',
              date: new Date().toISOString(),
              views: 1876
            },
            'rust-growth': {
              id: 'rust-growth',
              title: 'Why Rust is the Fastest Growing Programming Language',
              author: 'Alex Rivera',
              category: 'news',
              image: 'https://images.unsplash.com/photo-1534665482403-a909d0560ff0?auto=format&fit=crop&w=1600&q=80',
              content: `
                <h2>Memory Safety Without Garbage Collection</h2>
                <p>Rust's ownership model provides memory safety guarantees without the performance overhead of garbage collection, making it ideal for systems programming.</p>
                
                <h2>WebAssembly Excellence</h2>
                <p>Rust has become the language of choice for WebAssembly development, offering both performance and safety for web applications.</p>
                
                <h2>Industry Adoption</h2>
                <p>Major companies like Microsoft, Google, and Amazon are increasingly adopting Rust for critical systems and infrastructure.</p>
                
                <h2>Developer Satisfaction</h2>
                <p>Rust consistently ranks as the "most loved" programming language in developer surveys, indicating high satisfaction among its users.</p>
              `,
              excerpt: 'Learn why Rust continues to gain popularity and what makes it unique in the programming landscape.',
              date: new Date().toISOString(),
              views: 956
            }
          };
          localStorage.setItem('blogs', JSON.stringify(defaultBlogs));
        }

        // Initialize sales data if not exists
        if (!localStorage.getItem('sales')) {
          localStorage.setItem('sales', JSON.stringify([]));
        }
      },

      // Get all books
      getBooks() {
        return JSON.parse(localStorage.getItem('books') || '{}');
      },

      // Save books
      saveBooks(books) {
        localStorage.setItem('books', JSON.stringify(books));
      },

      // Get all blog posts
      getBlogs() {
        return JSON.parse(localStorage.getItem('blogs') || '{}');
      },

      // Save blogs
      saveBlogs(blogs) {
        localStorage.setItem('blogs', JSON.stringify(blogs));
      },

      // Initialize FAQ functionality
      initFAQ() {
        // FAQ accordion functionality
        document.querySelectorAll('.faq-question').forEach(question => {
          question.addEventListener('click', () => {
            const item = question.parentElement;
            const isActive = item.classList.contains('active');
            
            // Close all FAQ items
            document.querySelectorAll('.faq-item').forEach(el => {
              el.classList.remove('active');
            });
            
            // Open clicked item if it wasn't active
            if (!isActive) {
              item.classList.add('active');
            }
          });
        });

        // FAQ search functionality
        const faqSearchInput = document.getElementById('faq-search-input');
        if (faqSearchInput) {
          faqSearchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase().trim();
            const faqItems = document.querySelectorAll('.faq-item');
            
            faqItems.forEach(item => {
              const question = item.querySelector('.faq-question h4').textContent.toLowerCase();
              const answer = item.querySelector('.faq-answer p').textContent.toLowerCase();
              const shouldShow = question.includes(searchTerm) || answer.includes(searchTerm);
              
              item.style.display = shouldShow ? 'block' : 'none';
              
              // Show/hide categories if all items are hidden
              const category = item.closest('.faq-category');
              if (category) {
                const visibleItems = Array.from(category.querySelectorAll('.faq-item'))
                  .filter(i => i.style.display !== 'none');
                category.style.display = visibleItems.length > 0 ? 'block' : 'none';
              }
            });
          });
        }
      },

      // Page state management
      currentPage: 'home',

      // Check page state from URL hash
      checkPageState() {
        const hash = window.location.hash.substring(1);
        const validPages = ['home', 'profile', 'faq', 'categories', 'ebooks', 'admin', 'book-detail', 'blog-detail'];
        
        if (hash.startsWith('book-detail-')) {
          const bookId = hash.replace('book-detail-', '');
          this.showBookDetailPage(bookId);
        } else if (hash.startsWith('blog-detail-')) {
          const blogId = hash.replace('blog-detail-', '');
          this.showBlogDetailPage(blogId);
        } else if (validPages.includes(hash)) {
          this[`show${hash.charAt(0).toUpperCase() + hash.slice(1)}Page`]();
        } else {
          this.showMainPage();
        }
      },

      // Show main page
      showMainPage() {
        document.getElementById('main-content').style.display = 'block';
        document.getElementById('profile-content').style.display = 'none';
        document.getElementById('faq-content').style.display = 'none';
        document.getElementById('categories-content').style.display = 'none';
        document.getElementById('ebooks-content').style.display = 'none';
        document.getElementById('admin-content').style.display = 'none';
        document.getElementById('book-detail-content').style.display = 'none';
        document.getElementById('blog-detail-content').style.display = 'none';
        this.currentPage = 'home';
        this.updateActiveNavLink('home');
        window.location.hash = '';
      },

      // Show profile page
      showProfilePage() {
        const user = this.getCurrentUser();
        if (!user) {
          this.showToast('Please log in to view your profile', 'error');
          this.showLoginPopup();
          this.showMainPage();
          return;
        }

        document.getElementById('main-content').style.display = 'none';
        document.getElementById('profile-content').style.display = 'block';
        document.getElementById('faq-content').style.display = 'none';
        document.getElementById('categories-content').style.display = 'none';
        document.getElementById('ebooks-content').style.display = 'none';
        document.getElementById('admin-content').style.display = 'none';
        document.getElementById('book-detail-content').style.display = 'none';
        document.getElementById('blog-detail-content').style.display = 'none';
        this.currentPage = 'profile';
        this.updateActiveNavLink('profile');
        this.loadProfileData();
        window.location.hash = 'profile';
      },

      // Show FAQ page
      showFAQPage() {
        document.getElementById('main-content').style.display = 'none';
        document.getElementById('profile-content').style.display = 'none';
        document.getElementById('faq-content').style.display = 'block';
        document.getElementById('categories-content').style.display = 'none';
        document.getElementById('ebooks-content').style.display = 'none';
        document.getElementById('admin-content').style.display = 'none';
        document.getElementById('book-detail-content').style.display = 'none';
        document.getElementById('blog-detail-content').style.display = 'none';
        this.currentPage = 'faq';
        this.updateActiveNavLink('faq');
        window.location.hash = 'faq';
      },

      // Show categories page
      showCategoriesPage() {
        document.getElementById('main-content').style.display = 'none';
        document.getElementById('profile-content').style.display = 'none';
        document.getElementById('faq-content').style.display = 'none';
        document.getElementById('categories-content').style.display = 'block';
        document.getElementById('ebooks-content').style.display = 'none';
        document.getElementById('admin-content').style.display = 'none';
        document.getElementById('book-detail-content').style.display = 'none';
        document.getElementById('blog-detail-content').style.display = 'none';
        this.currentPage = 'categories';
        this.updateActiveNavLink('categories');
        window.location.hash = 'categories';
      },

      // Show ebooks page
      showEbooksPage() {
        document.getElementById('main-content').style.display = 'none';
        document.getElementById('profile-content').style.display = 'none';
        document.getElementById('faq-content').style.display = 'none';
        document.getElementById('categories-content').style.display = 'none';
        document.getElementById('ebooks-content').style.display = 'block';
        document.getElementById('admin-content').style.display = 'none';
        document.getElementById('book-detail-content').style.display = 'none';
        document.getElementById('blog-detail-content').style.display = 'none';
        this.currentPage = 'ebooks';
        this.updateActiveNavLink('ebooks');
        this.loadAllBooks();
        window.location.hash = 'ebooks';
      },

      // Show admin page
      showAdminPage() {
        const user = this.getCurrentUser();
        if (!user || !user.isAdmin) {
          this.showToast('Admin access required', 'error');
          this.showMainPage();
          return;
        }

        document.getElementById('main-content').style.display = 'none';
        document.getElementById('profile-content').style.display = 'none';
        document.getElementById('faq-content').style.display = 'none';
        document.getElementById('categories-content').style.display = 'none';
        document.getElementById('ebooks-content').style.display = 'none';
        document.getElementById('admin-content').style.display = 'block';
        document.getElementById('book-detail-content').style.display = 'none';
        document.getElementById('blog-detail-content').style.display = 'none';
        this.currentPage = 'admin';
        this.updateActiveNavLink('admin');
        this.loadAdminData();
        window.location.hash = 'admin';
      },

      // Show blog detail page
      showBlogDetailPage(blogId) {
        const blogs = this.getBlogs();
        const blog = blogs[blogId];
        
        if (!blog) {
          this.showToast('Blog post not found', 'error');
          this.showMainPage();
          return;
        }

        document.getElementById('main-content').style.display = 'none';
        document.getElementById('profile-content').style.display = 'none';
        document.getElementById('faq-content').style.display = 'none';
        document.getElementById('categories-content').style.display = 'none';
        document.getElementById('ebooks-content').style.display = 'none';
        document.getElementById('admin-content').style.display = 'none';
        document.getElementById('book-detail-content').style.display = 'none';
        document.getElementById('blog-detail-content').style.display = 'block';
        
        // Update views
        blog.views = (blog.views || 0) + 1;
        blogs[blogId] = blog;
        this.saveBlogs(blogs);
        
        document.getElementById('blog-detail-content').innerHTML = `
          <div class="blog-detail-content">
            <div class="blog-detail-header">
              <h1>${blog.title}</h1>
              <div class="blog-detail-meta">
                <span>By ${blog.author}</span>
                <span>${new Date(blog.date).toLocaleDateString()}</span>
                <span>${blog.views} views</span>
                <span>${this.getCategoryName(blog.category)}</span>
              </div>
            </div>
            
            <img src="${blog.image}" alt="${blog.title}" class="blog-detail-image">
            
            <div class="blog-detail-body">
              ${blog.content}
            </div>
            
            <div class="back-to-blog">
              <button class="detail-btn back" onclick="app.showMainPage()">
                <span class="material-symbols-rounded">arrow_back</span>
                Back to Home
              </button>
            </div>
          </div>
        `;
        
        this.currentPage = 'blog-detail';
        window.location.hash = `blog-detail-${blogId}`;
      },

      // Show book detail page
      showBookDetailPage(bookId) {
        const book = this.getBooks()[bookId];
        if (!book) {
          this.showToast('Book not found', 'error');
          this.showEbooksPage();
          return;
        }

        document.getElementById('main-content').style.display = 'none';
        document.getElementById('profile-content').style.display = 'none';
        document.getElementById('faq-content').style.display = 'none';
        document.getElementById('categories-content').style.display = 'none';
        document.getElementById('ebooks-content').style.display = 'none';
        document.getElementById('admin-content').style.display = 'none';
        document.getElementById('book-detail-content').style.display = 'block';
        document.getElementById('blog-detail-content').style.display = 'none';
        
        const user = this.getCurrentUser();
        const isPurchased = user && user.purchased && user.purchased.includes(bookId);
        
        document.getElementById('book-detail-content').innerHTML = `
          <div class="book-detail-header">
            <h1>BOOK DETAILS</h1>
            <p>Detailed information about "${book.title}"</p>
          </div>
          
          <div class="book-detail-section">
            <div class="book-detail-grid">
              <div class="book-cover-side">
                <img src="${book.image}" alt="${book.title}" class="book-cover-large">
              </div>
              
              <div class="book-info-detail">
                <h2>${book.title}</h2>
                
                <div class="book-meta">
                  <div class="meta-item">
                    <span class="material-symbols-rounded">person</span>
                    <span>${book.author}</span>
                  </div>
                  <div class="meta-item">
                    <span class="material-symbols-rounded">category</span>
                    <span>${this.getCategoryName(book.category)}</span>
                  </div>
                  <div class="meta-item">
                    <span class="material-symbols-rounded">language</span>
                    <span>${book.language || 'English'}</span>
                  </div>
                  <div class="meta-item">
                    <span class="material-symbols-rounded">star</span>
                    <span>${book.rating || 4.5}/5.0</span>
                  </div>
                </div>
                
                <div class="book-price-large">
                  ${book.price === 0 ? 'FREE' : '$' + book.price.toFixed(2)}
                  ${book.price === 0 ? '<span class="free-badge-large">FREE</span>' : ''}
                </div>
                
                <div class="book-description">
                  ${book.description || 'No description available.'}
                </div>
                
                <div class="book-stats">
                  <div class="stat-item">
                    <h4>Pages</h4>
                    <p>${book.pages || 'N/A'}</p>
                  </div>
                  <div class="stat-item">
                    <h4>Sales</h4>
                    <p>${book.sales || 0}</p>
                  </div>
                  <div class="stat-item">
                    <h4>Language</h4>
                    <p>${book.language || 'English'}</p>
                  </div>
                  <div class="stat-item">
                    <h4>Rating</h4>
                    <p>${book.rating || 4.5}/5</p>
                  </div>
                </div>
                
                <div class="detail-actions">
                  ${isPurchased ? `
                    <button class="detail-btn read" onclick="app.openPDF('${book.pdf}')">
                      <span class="material-symbols-rounded">book</span>
                      Read Now
                    </button>
                  ` : `
                    <button class="detail-btn buy" onclick="app.handleBuyBookDetail('${bookId}')">
                      <span class="material-symbols-rounded">shopping_cart</span>
                      ${book.price === 0 ? 'Get Free' : 'Buy Now - $' + book.price.toFixed(2)}
                    </button>
                  `}
                  
                  <button class="detail-btn back" onclick="app.showEbooksPage()">
                    <span class="material-symbols-rounded">arrow_back</span>
                    Back to Library
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
        
        this.currentPage = 'book-detail';
        window.location.hash = `book-detail-${bookId}`;
      },

      // Open PDF in new tab
      openPDF(pdfUrl) {
        window.open(pdfUrl, '_blank');
      },

      // Handle buy from detail page
      handleBuyBookDetail(bookId) {
        const books = this.getBooks();
        const book = books[bookId];
        const user = this.getCurrentUser();

        if (!user) {
          this.showToast('Please log in to purchase books', 'error');
          this.showLoginPopup();
          return;
        }

        if (book.price === 0) {
          // Free book - add directly to purchased
          if (!user.purchased.includes(bookId)) {
            user.purchased.push(bookId);
            this.saveUser(user);
            book.sales = (book.sales || 0) + 1;
            books[bookId] = book;
            this.saveBooks(books);
            this.showToast(`"${book.title}" added to your library!`, 'success');
            
            // Reload detail page to update buttons
            setTimeout(() => {
              this.showBookDetailPage(bookId);
            }, 1000);
          } else {
            this.showToast('You already own this book', 'info');
          }
        } else {
          // Paid book - add to cart
          this.addToCart(bookId);
          this.showToast('Added to cart', 'success');
        }
      },

      // Load blog posts
      loadBlogPosts() {
        const blogs = this.getBlogs();
        const blogGrid = document.getElementById('blog-grid');
        const blogArray = Object.values(blogs);
        
        // Sort by date (newest first)
        const sortedBlogs = blogArray.sort((a, b) => 
          new Date(b.date) - new Date(a.date)
        );

        blogGrid.innerHTML = sortedBlogs.map(blog => `
          <div class="blog-card" data-id="${blog.id}">
            <img src="${blog.image}" alt="${blog.title}">
            <div class="blog-content">
              <h3>${blog.title}</h3>
              <p>${blog.excerpt || 'Read more...'}</p>
              <div class="blog-meta">
                <span>${blog.author}</span>
                <span>${new Date(blog.date).toLocaleDateString()}</span>
              </div>
            </div>
          </div>
        `).join('');

        // Add click event to blog cards
        document.querySelectorAll('.blog-card').forEach(card => {
          card.addEventListener('click', (e) => {
            const blogId = card.dataset.id;
            this.showBlogDetailPage(blogId);
          });
        });
      },

      // Load books to display
      loadBooks() {
        const books = this.getBooks();
        const featuredGrid = document.getElementById('featured-books-grid');
        const bookArray = Object.values(books);
        
        // Sort by sales (popularity) and take first 3
        const featuredBooks = bookArray
          .sort((a, b) => b.sales - a.sales)
          .slice(0, 3);

        featuredGrid.innerHTML = this.renderBookCards(featuredBooks, true);

        // Update category counts
        this.updateCategoryCounts();
      },

      // Render book cards with proper button states
      renderBookCards(books, isFeatured = false) {
        const user = this.getCurrentUser();
        const userPurchased = user ? user.purchased || [] : [];
        
        return books.map(book => {
          const isPurchased = userPurchased.includes(book.id);
          
          return `
            <div class="book-card" data-id="${book.id}">
              ${book.price === 0 ? '<div class="free-badge">FREE</div>' : ''}
              <img src="${book.image}" alt="${book.title}" class="book-cover-img">
              <div class="book-info">
                <h3>${book.title}</h3>
                <p>${book.author}</p>
                <div class="book-price">${book.price === 0 ? 'FREE' : '$' + book.price.toFixed(2)}</div>
                
                ${isPurchased ? `
                  <button class="read-btn" data-book="${book.id}">
                    <span class="material-symbols-rounded">book</span>
                    Read Now
                  </button>
                ` : `
                  <button class="buy-btn" data-book="${book.id}">
                    ${book.price === 0 ? 'Get Free' : 'Buy Now'}
                  </button>
                `}
                
                <button class="details-btn" data-book="${book.id}" style="margin-top: 10px;">
                  <span class="material-symbols-rounded">info</span>
                  See More Details
                </button>
              </div>
            </div>
          `;
        }).join('');
      },

      // Load all books for ebooks page
      loadAllBooks() {
        const books = this.getBooks();
        const allBooksGrid = document.getElementById('all-books-grid');
        const bookArray = Object.values(books);
        
        // Sort by added date (newest first)
        const sortedBooks = bookArray.sort((a, b) => 
          new Date(b.addedDate) - new Date(a.addedDate)
        );

        allBooksGrid.innerHTML = this.renderBookCards(sortedBooks);

        // Setup filter listeners
        this.setupBookFilters();
      },

      // Get category name from key
      getCategoryName(categoryKey) {
        const categories = {
          'web': 'Web Development',
          'mobile': 'Mobile Development',
          'data': 'Data Science',
          'ai': 'AI & Machine Learning',
          'devops': 'DevOps',
          'algorithms': 'Algorithms',
          'news': 'Industry News',
          'tutorials': 'Tutorials'
        };
        return categories[categoryKey] || 'Uncategorized';
      },

      // Update category counts
      updateCategoryCounts() {
        const books = this.getBooks();
        const bookArray = Object.values(books);
        
        const counts = {
          web: 0,
          mobile: 0,
          data: 0,
          ai: 0,
          devops: 0,
          algorithms: 0
        };

        bookArray.forEach(book => {
          if (counts[book.category] !== undefined) {
            counts[book.category]++;
          }
        });

        // Update UI
        Object.keys(counts).forEach(category => {
          const element = document.getElementById(`${category}-count`);
          if (element) {
            element.textContent = `${counts[category]} Book${counts[category] !== 1 ? 's' : ''}`;
          }
        });
      },

      // Setup book filters
      setupBookFilters() {
        const categoryFilter = document.getElementById('category-filter');
        const priceFilter = document.getElementById('price-filter');
        const sortFilter = document.getElementById('sort-filter');

        const filterBooks = () => {
          const category = categoryFilter.value;
          const price = priceFilter.value;
          const sort = sortFilter.value;
          const books = document.querySelectorAll('.book-card[data-id]');

          books.forEach(book => {
            const bookCategory = book.dataset.category;
            const bookPrice = parseFloat(book.dataset.price);
            
            let show = true;

            // Category filter
            if (category !== 'all' && bookCategory !== category) {
              show = false;
            }

            // Price filter
            if (price !== 'all') {
              switch (price) {
                case 'free':
                  if (bookPrice !== 0) show = false;
                  break;
                case 'paid':
                  if (bookPrice === 0) show = false;
                  break;
                case 'under-20':
                  if (bookPrice >= 20) show = false;
                  break;
                case '20-50':
                  if (bookPrice < 20 || bookPrice > 50) show = false;
                  break;
                case 'over-50':
                  if (bookPrice <= 50) show = false;
                  break;
              }
            }

            book.style.display = show ? 'block' : 'none';
          });

          // Sort books
          this.sortBooks(sort);
        };

        categoryFilter.addEventListener('change', filterBooks);
        priceFilter.addEventListener('change', filterBooks);
        sortFilter.addEventListener('change', filterBooks);
      },

      // Sort books
      sortBooks(sortType) {
        const container = document.getElementById('all-books-grid');
        const books = Array.from(container.querySelectorAll('.book-card[data-id]'));

        books.sort((a, b) => {
          const aPrice = parseFloat(a.dataset.price);
          const bPrice = parseFloat(b.dataset.price);
          const aId = a.dataset.id;
          const bId = b.dataset.id;
          const allBooks = this.getBooks();

          switch (sortType) {
            case 'newest':
              const aDate = new Date(allBooks[aId]?.addedDate || 0);
              const bDate = new Date(allBooks[bId]?.addedDate || 0);
              return bDate - aDate;
            case 'oldest':
              const aDateOld = new Date(allBooks[aId]?.addedDate || 0);
              const bDateOld = new Date(allBooks[bId]?.addedDate || 0);
              return aDateOld - bDateOld;
            case 'price-low':
              return aPrice - bPrice;
            case 'price-high':
              return bPrice - aPrice;
            case 'popular':
              return (allBooks[bId]?.sales || 0) - (allBooks[aId]?.sales || 0);
            default:
              return 0;
          }
        });

        // Reorder in DOM
        books.forEach(book => container.appendChild(book));
      },

      // Load admin data
      loadAdminData() {
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        const books = this.getBooks();
        const blogs = this.getBlogs();
        const sales = JSON.parse(localStorage.getItem('sales') || '[]');

        // Update stats
        document.getElementById('total-users').textContent = users.length;
        document.getElementById('total-books').textContent = Object.keys(books).length;
        document.getElementById('total-sales').textContent = sales.length;
        
        const totalRevenue = sales.reduce((sum, sale) => sum + sale.total, 0);
        document.getElementById('total-revenue').textContent = '$' + totalRevenue.toFixed(2);

        // Load users table
        const usersTableBody = document.getElementById('users-table-body');
        usersTableBody.innerHTML = users.map((user, index) => `
          <tr>
            <td>${index + 1}</td>
            <td>${user.name}</td>
            <td>${user.email}</td>
            <td>${user.phone || 'N/A'}</td>
            <td>${new Date(user.joinDate).toLocaleDateString()}</td>
            <td>${user.purchased?.length || 0}</td>
            <td>
              <button class="admin-action-btn btn-view" onclick="app.viewUser('${user.email}')">View</button>
              ${user.email !== this.ADMIN_EMAIL ? `
                <button class="admin-action-btn btn-delete" onclick="app.deleteUser('${user.email}')">Delete</button>
              ` : ''}
            </td>
          </tr>
        `).join('');

        // Load books table
        const booksTableBody = document.getElementById('books-table-body');
        const bookArray = Object.values(books);
        booksTableBody.innerHTML = bookArray.map((book, index) => `
          <tr>
            <td>${index + 1}</td>
            <td>${book.title}</td>
            <td>${book.author}</td>
            <td>${this.getCategoryName(book.category)}</td>
            <td>${book.price === 0 ? 'FREE' : '$' + book.price.toFixed(2)}</td>
            <td>${book.sales || 0}</td>
            <td>
              <button class="admin-action-btn btn-edit" onclick="app.editBook('${book.id}')">Edit</button>
              <button class="admin-action-btn btn-delete" onclick="app.deleteBook('${book.id}')">Delete</button>
              <button class="admin-action-btn btn-details" onclick="app.viewBookDetailsAdmin('${book.id}')">Details</button>
            </td>
          </tr>
        `).join('');

        // Load blogs table
        const blogsTableBody = document.getElementById('blogs-table-body');
        const blogArray = Object.values(blogs);
        blogsTableBody.innerHTML = blogArray.map((blog, index) => `
          <tr>
            <td>${index + 1}</td>
            <td>${blog.title}</td>
            <td>${blog.author}</td>
            <td>${this.getCategoryName(blog.category)}</td>
            <td>${new Date(blog.date).toLocaleDateString()}</td>
            <td>
              <button class="admin-action-btn btn-edit" onclick="app.editBlog('${blog.id}')">Edit</button>
              <button class="admin-action-btn btn-delete" onclick="app.deleteBlog('${blog.id}')">Delete</button>
              <button class="admin-action-btn btn-details" onclick="app.viewBlogDetailsAdmin('${blog.id}')">Details</button>
            </td>
          </tr>
        `).join('');
      },

      // Admin functions
      viewUser(email) {
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        const user = users.find(u => u.email === email);
        
        if (user) {
          const info = `
Name: ${user.name}
Email: ${user.email}
Phone: ${user.phone || 'N/A'}
Age: ${user.age}
Joined: ${new Date(user.joinDate).toLocaleDateString()}
Purchases: ${user.purchased?.length || 0} books
Admin: ${user.isAdmin ? 'Yes' : 'No'}
          `;
          alert(info);
        }
      },

      deleteUser(email) {
        if (email === this.ADMIN_EMAIL) {
          this.showToast('Cannot delete admin user', 'error');
          return;
        }

        if (confirm('Are you sure you want to delete this user?')) {
          const users = JSON.parse(localStorage.getItem('users') || '[]');
          const filteredUsers = users.filter(u => u.email !== email);
          localStorage.setItem('users', JSON.stringify(filteredUsers));
          this.loadAdminData();
          this.showToast('User deleted successfully', 'success');
        }
      },

      editBook(bookId) {
        const books = this.getBooks();
        const book = books[bookId];
        
        if (book) {
          // Populate form with book data
          document.getElementById('book-title').value = book.title;
          document.getElementById('book-author').value = book.author;
          document.getElementById('book-category').value = book.category;
          document.getElementById('book-price').value = book.price;
          document.getElementById('book-image').value = book.image;
          document.getElementById('book-pdf').value = book.pdf;
          document.getElementById('book-payment-link').value = book.paymentLink || '';
          document.getElementById('book-description').value = book.description || '';
          document.getElementById('book-pages').value = book.pages || '';
          document.getElementById('book-language').value = book.language || '';
          document.getElementById('book-rating').value = book.rating || '';
          
          // Change form to edit mode
          document.getElementById('add-book-form').style.display = 'block';
          document.getElementById('new-book-form').dataset.mode = 'edit';
          document.getElementById('new-book-form').dataset.bookId = bookId;
          
          // Change button text
          const submitBtn = document.querySelector('#new-book-form button[type="submit"]');
          submitBtn.textContent = 'Update Book';
          
          // Scroll to form
          document.getElementById('add-book-form').scrollIntoView({ behavior: 'smooth' });
        }
      },

      editBlog(blogId) {
        const blogs = this.getBlogs();
        const blog = blogs[blogId];
        
        if (blog) {
          // Populate form with blog data
          document.getElementById('blog-title').value = blog.title;
          document.getElementById('blog-author').value = blog.author;
          document.getElementById('blog-category').value = blog.category;
          document.getElementById('blog-image').value = blog.image;
          document.getElementById('blog-content').value = blog.content;
          document.getElementById('blog-excerpt').value = blog.excerpt || '';
          
          // Change form to edit mode
          document.getElementById('add-blog-form').style.display = 'block';
          document.getElementById('new-blog-form').dataset.mode = 'edit';
          document.getElementById('new-blog-form').dataset.blogId = blogId;
          
          // Change button text
          const submitBtn = document.querySelector('#new-blog-form button[type="submit"]');
          submitBtn.textContent = 'Update Blog Post';
          
          // Scroll to form
          document.getElementById('add-blog-form').scrollIntoView({ behavior: 'smooth' });
        }
      },

      viewBookDetailsAdmin(bookId) {
        this.showBookDetailPage(bookId);
      },

      viewBlogDetailsAdmin(blogId) {
        this.showBlogDetailPage(blogId);
      },

      deleteBook(bookId) {
        if (confirm('Are you sure you want to delete this book?')) {
          const books = this.getBooks();
          delete books[bookId];
          this.saveBooks(books);
          this.loadAdminData();
          this.loadBooks();
          this.updateCategoryCounts();
          this.showToast('Book deleted successfully', 'success');
        }
      },

      deleteBlog(blogId) {
        if (confirm('Are you sure you want to delete this blog post?')) {
          const blogs = this.getBlogs();
          delete blogs[blogId];
          this.saveBlogs(blogs);
          this.loadAdminData();
          this.loadBlogPosts();
          this.showToast('Blog post deleted successfully', 'success');
        }
      },

      // Load profile data
      loadProfileData() {
        const user = this.getCurrentUser();
        if (!user) return;

        // User details
        document.getElementById('user-details').innerHTML = `
          <div class="info-card">
            <h3>Full Name</h3>
            <p>${user.name}</p>
          </div>
          <div class="info-card">
            <h3>Email Address</h3>
            <p>${user.email}</p>
          </div>
          <div class="info-card">
            <h3>Phone Number</h3>
            <p>${user.phone || 'Not provided'}</p>
          </div>
          <div class="info-card">
            <h3>Age</h3>
            <p>${user.age}</p>
          </div>
          <div class="info-card">
            <h3>Member Since</h3>
            <p>${new Date(user.joinDate).toLocaleDateString()}</p>
          </div>
          <div class="info-card">
            <h3>Total Purchases</h3>
            <p>${user.purchased?.length || 0} books</p>
          </div>
          ${user.isAdmin ? `
          <div class="info-card">
            <h3>Account Type</h3>
            <p style="color: var(--admin-purple); text-shadow: 0 0 10px var(--admin-glow);">Administrator</p>
          </div>
          ` : ''}
        `;

        // Payment methods
        const paymentList = document.getElementById('payment-list');
        if (user.payments && user.payments.length > 0) {
          paymentList.innerHTML = user.payments.map((lastFour, index) => `
            <div class="payment-card">
              <h3>Credit Card ${index + 1}</h3>
              <p>**** **** **** ${lastFour}</p>
            </div>
          `).join('');
        } else {
          paymentList.innerHTML = `
            <div class="empty-state">
              <span class="material-symbols-rounded">credit_card_off</span>
              <h3>No payment methods</h3>
              <p>Add a payment method to purchase books</p>
            </div>
          `;
        }

        // Purchased books
        const purchasedList = document.getElementById('purchased-list');
        if (user.purchased && user.purchased.length > 0) {
          const books = this.getBooks();
          const purchasedBooks = user.purchased
            .map(id => books[id])
            .filter(book => book !== undefined);

          if (purchasedBooks.length > 0) {
            purchasedList.innerHTML = `
              <div class="books-grid">
                ${purchasedBooks.map(book => `
                  <div class="book-card">
                    <img src="${book.image}" alt="${book.title}" class="book-cover-img">
                    <div class="book-info">
                      <h3>${book.title}</h3>
                      <p>${book.author}</p>
                      <button class="read-btn" onclick="app.openPDF('${book.pdf}')">Read Now</button>
                      <button class="details-btn" onclick="app.showBookDetailPage('${book.id}')" style="margin-top: 10px;">
                        <span class="material-symbols-rounded">info</span>
                        View Details
                      </button>
                    </div>
                  </div>
                `).join('')}
              </div>
            `;
          } else {
            purchasedList.innerHTML = `
              <div class="empty-state">
                <span class="material-symbols-rounded">menu_book</span>
                <h3>No books yet</h3>
                <p>Start building your library by purchasing books</p>
                <button class="btn-primary" style="margin-top: 20px;" onclick="app.showEbooksPage()">Browse Books</button>
              </div>
            `;
          }
        } else {
          purchasedList.innerHTML = `
            <div class="empty-state">
              <span class="material-symbols-rounded">menu_book</span>
              <h3>No books yet</h3>
              <p>Start building your library by purchasing books</p>
              <button class="btn-primary" style="margin-top: 20px;" onclick="app.showEbooksPage()">Browse Books</button>
            </div>
          `;
        }
      },

      // Update active navigation link
      updateActiveNavLink(page) {
        document.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('active');
          if (link.dataset.page === page) {
            link.classList.add('active');
          }
        });
      },

      // UI Updates
      updateUI() {
        this.updateHeader();
        this.updateCartCount();
      },

      updateHeader() {
        const user = this.getCurrentUser();
        const loginBtn = document.getElementById('login-btn');
        const adminBtn = document.getElementById('admin-btn');
        const adminNav = document.getElementById('admin-nav');
        
        if (user) {
          loginBtn.textContent = 'LOGOUT';
          loginBtn.onclick = () => {
            localStorage.removeItem('currentUser');
            this.updateUI();
            this.showToast('Logged out successfully', 'success');
            if (this.currentPage === 'profile' || this.currentPage === 'admin') {
              this.showMainPage();
            }
          };

          if (user.isAdmin) {
            adminBtn.style.display = 'block';
            adminNav.style.display = 'list-item';
          } else {
            adminBtn.style.display = 'none';
            adminNav.style.display = 'none';
          }
        } else {
          loginBtn.textContent = 'SIGN IN';
          loginBtn.onclick = () => this.showLoginPopup();
          adminBtn.style.display = 'none';
          adminNav.style.display = 'none';
        }
      },

      updateCartCount() {
        const cart = JSON.parse(localStorage.getItem('cart') || '[]');
        const count = cart.reduce((total, item) => total + item.quantity, 0);
        document.getElementById('cart-count').textContent = count;
      },

      // Show login popup
      showLoginPopup() {
        document.getElementById('login-popup').style.display = 'block';
        document.getElementById('signup-popup').style.display = 'none';
        document.body.classList.add('show-popup');
      },

      // Show signup popup
      showSignupPopup() {
        document.getElementById('login-popup').style.display = 'none';
        document.getElementById('signup-popup').style.display = 'block';
        document.body.classList.add('show-popup');
      },

      // User Management
      getCurrentUser() {
        return JSON.parse(localStorage.getItem('currentUser'));
      },

      saveUser(user) {
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        const existingIndex = users.findIndex(u => u.email === user.email);
        
        if (existingIndex >= 0) {
          users[existingIndex] = user;
        } else {
          users.push(user);
        }
        
        localStorage.setItem('users', JSON.stringify(users));
        localStorage.setItem('currentUser', JSON.stringify(user));
      },

      // Event Handlers
      setupEventListeners() {
        // Menu toggle
        document.querySelector('.hamburger-btn').addEventListener('click', () => {
          document.querySelector('.links').classList.add('show-menu');
        });

        document.querySelector('.close-btn').addEventListener('click', () => {
          document.querySelector('.links').classList.remove('show-menu');
        });

        // Search functionality
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        
        searchInput?.addEventListener('input', (e) => this.handleSearch(e.target.value));
        searchBtn?.addEventListener('click', () => this.handleSearch(searchInput.value));

        // Cart toggle
        document.getElementById('cart-btn').addEventListener('click', () => {
          document.getElementById('cart-sidebar').classList.toggle('active');
          this.updateCartDisplay();
        });

        // Close popups when clicking outside
        document.querySelector('.blur-bg-overlay').addEventListener('click', () => {
          document.getElementById('cart-sidebar').classList.remove('active');
          document.body.classList.remove('show-popup');
        });

        // Navigation links
        document.querySelectorAll('.nav-link').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const page = link.dataset.page;
            
            document.querySelector('.links').classList.remove('show-menu');
            
            if (page === 'profile') {
              this.showProfilePage();
            } else if (page === 'admin') {
              this.showAdminPage();
            } else if (page === 'home') {
              this.showMainPage();
            } else if (page === 'faq') {
              this.showFAQPage();
            } else if (page === 'categories') {
              this.showCategoriesPage();
            } else if (page === 'ebooks') {
              this.showEbooksPage();
            }
          });
        });

        // Category cards
        document.querySelectorAll('.category-card').forEach(card => {
          card.addEventListener('click', () => {
            const category = card.dataset.category;
            this.showEbooksPage();
            // Set filter to selected category
            setTimeout(() => {
              document.getElementById('category-filter').value = category;
              document.getElementById('category-filter').dispatchEvent(new Event('change'));
            }, 100);
          });
        });

        // Home logo click
        document.getElementById('home-logo').addEventListener('click', (e) => {
          e.preventDefault();
          this.showMainPage();
        });

        // Admin button
        document.getElementById('admin-btn').addEventListener('click', () => {
          this.showAdminPage();
        });

        // Form switching
        document.getElementById('show-signup').addEventListener('click', (e) => {
          e.preventDefault();
          this.showSignupPopup();
        });

        document.getElementById('show-login').addEventListener('click', (e) => {
          e.preventDefault();
          this.showLoginPopup();
        });

        // Form submissions
        document.getElementById('login-form').addEventListener('submit', (e) => this.handleLogin(e));
        document.getElementById('signup-form').addEventListener('submit', (e) => this.handleSignup(e));

        // Close buttons
        document.querySelectorAll('.form-popup .close-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            document.body.classList.remove('show-popup');
          });
        });

        // Buy buttons (delegated)
        document.addEventListener('click', (e) => {
          // Buy buttons
          if (e.target.classList.contains('buy-btn') && e.target.dataset.book) {
            this.handleBuyClick(e);
          }
          
          // Read buttons
          if (e.target.classList.contains('read-btn') && e.target.dataset.book) {
            const bookId = e.target.dataset.book;
            const books = this.getBooks();
            const book = books[bookId];
            if (book && book.pdf) {
              this.openPDF(book.pdf);
            }
          }
          
          // Details buttons
          if (e.target.classList.contains('details-btn') && e.target.dataset.book) {
            const bookId = e.target.dataset.book;
            this.showBookDetailPage(bookId);
          }
        });

        // Explore button
        document.getElementById('explore-btn').addEventListener('click', () => {
          this.showEbooksPage();
        });

        // Checkout
        document.getElementById('checkout-btn').addEventListener('click', () => this.handleCheckout());

        // Cookies
        document.getElementById('accept-cookies').addEventListener('click', () => {
          localStorage.setItem('cookiesAccepted', 'true');
          document.getElementById('cookie-banner').style.display = 'none';
        });

        // Profile page events
        document.getElementById('add-payment-btn')?.addEventListener('click', () => {
          document.getElementById('add-payment-form').style.display = 'block';
        });

        document.getElementById('cancel-payment')?.addEventListener('click', () => {
          document.getElementById('add-payment-form').style.display = 'none';
          document.getElementById('add-payment').reset();
        });

        document.getElementById('add-payment')?.addEventListener('submit', (e) => {
          e.preventDefault();
          this.handleAddPayment(e);
        });

        document.getElementById('logout-btn')?.addEventListener('click', () => {
          localStorage.removeItem('currentUser');
          this.updateUI();
          this.showToast('Logged out successfully', 'success');
          this.showMainPage();
        });

        // Admin page events
        document.getElementById('add-book-btn')?.addEventListener('click', () => {
          const form = document.getElementById('add-book-form');
          form.style.display = form.style.display === 'none' ? 'block' : 'none';
          document.getElementById('new-book-form').reset();
          delete document.getElementById('new-book-form').dataset.mode;
          delete document.getElementById('new-book-form').dataset.bookId;
          const submitBtn = document.querySelector('#new-book-form button[type="submit"]');
          submitBtn.textContent = 'Add Book';
        });

        document.getElementById('add-blog-btn')?.addEventListener('click', () => {
          const form = document.getElementById('add-blog-form');
          form.style.display = form.style.display === 'none' ? 'block' : 'none';
          document.getElementById('new-blog-form').reset();
          delete document.getElementById('new-blog-form').dataset.mode;
          delete document.getElementById('new-blog-form').dataset.blogId;
          const submitBtn = document.querySelector('#new-blog-form button[type="submit"]');
          submitBtn.textContent = 'Add Blog Post';
        });

        document.getElementById('cancel-book')?.addEventListener('click', () => {
          document.getElementById('add-book-form').style.display = 'none';
          document.getElementById('new-book-form').reset();
        });

        document.getElementById('cancel-blog')?.addEventListener('click', () => {
          document.getElementById('add-blog-form').style.display = 'none';
          document.getElementById('new-blog-form').reset();
        });

        document.getElementById('new-book-form')?.addEventListener('submit', (e) => {
          e.preventDefault();
          this.handleAddBook(e);
        });

        document.getElementById('new-blog-form')?.addEventListener('submit', (e) => {
          e.preventDefault();
          this.handleAddBlog(e);
        });

        // Hash change for browser navigation
        window.addEventListener('hashchange', () => {
          this.checkPageState();
        });
      },

      // Form Handlers
      handleLogin(e) {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        const user = users.find(u => u.email === email && u.password === password);

        if (user) {
          localStorage.setItem('currentUser', JSON.stringify(user));
          document.body.classList.remove('show-popup');
          this.updateUI();
          
          if (user.isAdmin) {
            this.showToast('Admin login successful!', 'admin');
            setTimeout(() => this.showAdminPage(), 1000);
          } else {
            this.showToast('Logged in successfully!', 'success');
          }
          
          document.getElementById('login-form').reset();
        } else {
          this.showToast('Invalid email or password', 'error');
        }
      },

      handleSignup(e) {
        e.preventDefault();
        const name = document.getElementById('signup-name').value;
        const email = document.getElementById('signup-email').value;
        const countryCode = document.getElementById('country-code').value;
        const phone = document.getElementById('phone-number').value;
        const age = parseInt(document.getElementById('signup-age').value);
        const password = document.getElementById('signup-password').value;
        const confirmPassword = document.getElementById('signup-confirm-password').value;

        // Validation
        if (password !== confirmPassword) {
          this.showToast('Passwords do not match', 'error');
          return;
        }

        if (password.length < 8) {
          this.showToast('Password must be at least 8 characters', 'error');
          return;
        }

        if (age < 13 || age > 120) {
          this.showToast('Age must be between 13 and 120', 'error');
          return;
        }

        const users = JSON.parse(localStorage.getItem('users') || '[]');
        
        if (users.find(u => u.email === email)) {
          this.showToast('Email already registered', 'error');
          return;
        }

        const user = {
          name,
          email,
          password,
          phone: countryCode + phone,
          age,
          purchased: [],
          payments: [],
          joinDate: new Date().toISOString(),
          isAdmin: false
        };

        this.saveUser(user);
        document.body.classList.remove('show-popup');
        this.updateUI();
        this.showToast('Registration successful!', 'success');
        document.getElementById('signup-form').reset();
      },

      // Book Purchase
      handleBuyClick(e) {
        const bookId = e.target.dataset.book;
        const user = this.getCurrentUser();
        const books = this.getBooks();
        const book = books[bookId];

        if (!user) {
          this.showToast('Please log in to purchase books', 'error');
          this.showLoginPopup();
          return;
        }

        if (book.price === 0) {
          // Free book - add directly to purchased
          if (!user.purchased.includes(bookId)) {
            user.purchased.push(bookId);
            this.saveUser(user);
            this.showToast(`"${book.title}" added to your library!`, 'success');
            
            // Update book sales
            book.sales = (book.sales || 0) + 1;
            books[bookId] = book;
            this.saveBooks(books);
            
            // Update UI
            this.updateBookButtons();
            if (this.currentPage === 'profile') {
              this.loadProfileData();
            }
          } else {
            this.showToast('You already own this book', 'info');
          }
        } else {
          // Paid book - add to cart
          this.addToCart(bookId);
        }
      },

      // Update book buttons after purchase
      updateBookButtons() {
        const user = this.getCurrentUser();
        const userPurchased = user ? user.purchased || [] : [];
        
        document.querySelectorAll('.book-card').forEach(card => {
          const bookId = card.dataset.id;
          const isPurchased = userPurchased.includes(bookId);
          const buyBtn = card.querySelector('.buy-btn');
          const readBtn = card.querySelector('.read-btn');
          
          if (buyBtn && isPurchased) {
            const books = this.getBooks();
            const book = books[bookId];
            if (book) {
              buyBtn.style.display = 'none';
              if (!readBtn) {
                const newReadBtn = document.createElement('button');
                newReadBtn.className = 'read-btn';
                newReadBtn.innerHTML = '<span class="material-symbols-rounded">book</span> Read Now';
                newReadBtn.dataset.book = bookId;
                buyBtn.parentNode.insertBefore(newReadBtn, buyBtn.nextSibling);
              }
            }
          }
        });
      },

      addToCart(bookId) {
        const cart = JSON.parse(localStorage.getItem('cart') || '[]');
        const books = this.getBooks();
        const book = books[bookId];

        if (!book) return;

        const existingItem = cart.find(item => item.id === bookId);

        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({
            id: bookId,
            quantity: 1,
            title: book.title,
            price: book.price,
            image: book.image,
            author: book.author
          });
        }

        localStorage.setItem('cart', JSON.stringify(cart));
        this.updateCartCount();
        this.updateCartDisplay();
        this.showToast('Added to cart', 'success');
      },

      updateCartDisplay() {
        const cart = JSON.parse(localStorage.getItem('cart') || '[]');
        const cartItems = document.getElementById('cart-items');
        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

        if (cart.length === 0) {
          cartItems.innerHTML = '<p>Your cart is empty</p>';
          return;
        }

        cartItems.innerHTML = cart.map(item => `
          <div class="cart-item">
            <img src="${item.image}" alt="${item.title}">
            <div>
              <h4>${item.title}</h4>
              <p>${item.author}</p>
              <p>$${item.price.toFixed(2)}  ${item.quantity}</p>
            </div>
          </div>
        `).join('') + `<h3>Total: $${total.toFixed(2)}</h3>`;
      },

      handleCheckout() {
        const user = this.getCurrentUser();
        const cart = JSON.parse(localStorage.getItem('cart') || '[]');
        const books = this.getBooks();

        if (!user) {
          this.showToast('Please log in to checkout', 'error');
          this.showLoginPopup();
          return;
        }

        if (cart.length === 0) {
          this.showToast('Your cart is empty', 'error');
          return;
        }

        // Record sale
        const sales = JSON.parse(localStorage.getItem('sales') || '[]');
        const sale = {
          userId: user.email,
          items: cart,
          total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
          date: new Date().toISOString()
        };
        sales.push(sale);
        localStorage.setItem('sales', JSON.stringify(sales));

        // Add all cart items to purchased
        cart.forEach(item => {
          if (!user.purchased.includes(item.id)) {
            user.purchased.push(item.id);
          }
          
          // Update book sales count
          if (books[item.id]) {
            books[item.id].sales = (books[item.id].sales || 0) + item.quantity;
          }
        });

        this.saveUser(user);
        this.saveBooks(books);
        localStorage.setItem('cart', JSON.stringify([]));
        this.updateCartCount();
        this.updateCartDisplay();
        document.getElementById('cart-sidebar').classList.remove('active');
        this.showToast('Purchase successful! Books added to your library.', 'success');
        
        // Update UI
        this.updateBookButtons();
        if (this.currentPage === 'profile') {
          this.loadProfileData();
        }
        if (this.currentPage === 'admin') {
          this.loadAdminData();
        }
      },

      // Handle add payment
      handleAddPayment(e) {
        e.preventDefault();
        const cardNumber = document.getElementById('card-number').value.replace(/\s/g, '');
        const user = this.getCurrentUser();
        
        if (!cardNumber.match(/^\d{16}$/)) {
          this.showToast('Please enter a valid 16-digit card number', 'error');
          return;
        }
        
        if (!user.payments) user.payments = [];
        user.payments.push(cardNumber.slice(-4));
        
        this.saveUser(user);
        this.loadProfileData();
        document.getElementById('add-payment-form').style.display = 'none';
        document.getElementById('add-payment').reset();
        this.showToast('Payment method added successfully', 'success');
      },

      // Handle add book (admin)
      handleAddBook(e) {
        e.preventDefault();
        const form = e.target;
        const mode = form.dataset.mode;
        const bookId = form.dataset.bookId;
        
        const title = document.getElementById('book-title').value;
        const author = document.getElementById('book-author').value;
        const category = document.getElementById('book-category').value;
        const price = parseFloat(document.getElementById('book-price').value);
        const image = document.getElementById('book-image').value;
        const pdf = document.getElementById('book-pdf').value;
        const paymentLink = document.getElementById('book-payment-link').value;
        const description = document.getElementById('book-description').value;
        const pages = document.getElementById('book-pages').value;
        const language = document.getElementById('book-language').value;
        const rating = parseFloat(document.getElementById('book-rating').value);

        const books = this.getBooks();
        
        if (mode === 'edit' && bookId) {
          // Update existing book
          books[bookId] = {
            ...books[bookId],
            title,
            author,
            category,
            price,
            image,
            pdf,
            paymentLink,
            description,
            pages: pages || books[bookId].pages,
            language: language || books[bookId].language,
            rating: rating || books[bookId].rating,
            sales: books[bookId].sales || 0,
            addedDate: books[bookId].addedDate || new Date().toISOString()
          };
          this.showToast('Book updated successfully', 'success');
        } else {
          // Add new book
          const newId = 'book-' + Date.now();
          books[newId] = {
            id: newId,
            title,
            author,
            category,
            price,
            image,
            pdf,
            paymentLink,
            description,
            sales: 0,
            pages: pages || 300,
            language: language || 'English',
            rating: rating || 4.5,
            addedDate: new Date().toISOString()
          };
          this.showToast('Book added successfully', 'success');
        }

        this.saveBooks(books);
        form.reset();
        document.getElementById('add-book-form').style.display = 'none';
        
        // Update all views
        this.loadAdminData();
        this.loadBooks();
        this.updateCategoryCounts();
        
        if (this.currentPage === 'ebooks') {
          this.loadAllBooks();
        }
      },

      // Handle add blog (admin)
      handleAddBlog(e) {
        e.preventDefault();
        const form = e.target;
        const mode = form.dataset.mode;
        const blogId = form.dataset.blogId;
        
        const title = document.getElementById('blog-title').value;
        const author = document.getElementById('blog-author').value;
        const category = document.getElementById('blog-category').value;
        const image = document.getElementById('blog-image').value;
        const content = document.getElementById('blog-content').value;
        const excerpt = document.getElementById('blog-excerpt').value;

        const blogs = this.getBlogs();
        
        if (mode === 'edit' && blogId) {
          // Update existing blog
          blogs[blogId] = {
            ...blogs[blogId],
            title,
            author,
            category,
            image,
            content,
            excerpt,
            date: blogs[blogId].date,
            views: blogs[blogId].views || 0
          };
          this.showToast('Blog post updated successfully', 'success');
        } else {
          // Add new blog
          const newId = 'blog-' + Date.now();
          blogs[newId] = {
            id: newId,
            title,
            author,
            category,
            image,
            content,
            excerpt,
            date: new Date().toISOString(),
            views: 0
          };
          this.showToast('Blog post added successfully', 'success');
        }

        this.saveBlogs(blogs);
        form.reset();
        document.getElementById('add-blog-form').style.display = 'none';
        
        // Update all views
        this.loadAdminData();
        this.loadBlogPosts();
        
        if (this.currentPage === 'home') {
          this.loadBlogPosts();
        }
      },

      // Search Functionality
      handleSearch(query) {
        if (this.currentPage === 'home') {
          const cards = document.querySelectorAll('#featured-books-grid .book-card');
          const searchTerm = query.toLowerCase().trim();

          cards.forEach(card => {
            const title = card.querySelector('h3').textContent.toLowerCase();
            const author = card.querySelector('p').textContent.toLowerCase();
            const shouldShow = title.includes(searchTerm) || author.includes(searchTerm);
            card.style.display = shouldShow ? 'block' : 'none';
          });
        } else if (this.currentPage === 'ebooks') {
          const cards = document.querySelectorAll('#all-books-grid .book-card');
          const searchTerm = query.toLowerCase().trim();

          cards.forEach(card => {
            const title = card.querySelector('h3').textContent.toLowerCase();
            const author = card.querySelector('p').textContent.toLowerCase();
            const category = card.querySelector('small')?.textContent.toLowerCase() || '';
            const shouldShow = title.includes(searchTerm) || author.includes(searchTerm) || category.includes(searchTerm);
            card.style.display = shouldShow ? 'block' : 'none';
          });
        }
      },

      // Utility Functions
      showToast(message, type = 'info') {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.className = `toast ${type}`;
        toast.classList.add('show');

        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      },

      showCookieBanner() {
        if (!localStorage.getItem('cookiesAccepted')) {
          setTimeout(() => {
            document.getElementById('cookie-banner').style.display = 'flex';
          }, 1000);
        }
      }
    };

    // Initialize the app
    document.addEventListener('DOMContentLoaded', () => app.init());
  </script>
</body>
</html>
