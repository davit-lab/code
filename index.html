<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Better Programmer - Premium Programming E-Books Library</title>
    <!-- Google Fonts & Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/codemirror.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/theme/dracula.min.css" rel="stylesheet">
    <style>
        /* ===== CSS Variables & Reset ===== */
        :root {
            --primary-bg: #0a0a0f;
            --secondary-bg: #0f1117;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: #1e293b;
            --border-light: #334155;
            --glass-bg: rgba(30, 41, 59, 0.6);
            --glass-border: rgba(255, 255, 255, 0.1);
            --card-bg: rgba(15, 23, 42, 0.8);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.4);
            --shadow-xl: 0 25px 50px rgba(0, 0, 0, 0.5);
            --gradient-primary: linear-gradient(135deg, #3b82f6, #8b5cf6);
            --gradient-secondary: linear-gradient(135deg, #10b981, #3b82f6);
            --gradient-dark: linear-gradient(135deg, #0f172a, #1e293b);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }
        /* ===== Utility Classes ===== */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .section {
            padding: 100px 0;
        }
        .section-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .section-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin-bottom: 3rem;
        }
        /* ===== Background Effects ===== */
        .bg-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        .gradient-circle {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.15;
        }
        .circle-1 {
            width: 600px;
            height: 600px;
            background: var(--accent-blue);
            top: -300px;
            right: -200px;
        }
        .circle-2 {
            width: 500px;
            height: 500px;
            background: var(--accent-purple);
            bottom: -200px;
            left: -200px;
        }
        .grid-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.5;
        }
        /* ===== Header & Navigation ===== */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 0;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }
        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        .logo-text {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--text-primary), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }
        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .nav-link:hover, .nav-link.active {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }
        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .search-box {
            position: relative;
            width: 300px;
        }
        .search-input {
            width: 100%;
            padding: 10px 40px 10px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        .search-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .search-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }
        .cart-btn {
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .cart-btn:hover {
            color: var(--accent-blue);
            border-color: var(--accent-blue);
        }
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent-orange);
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .auth-btn {
            padding: 10px 24px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .auth-btn:hover {
            transform: translateY(-2px);
        }
        /* ===== Hero Section ===== */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding-top: 100px;
            position: relative;
            overflow: hidden;
        }
        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        .hero-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 5rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple), #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient-shift 8s ease infinite;
            background-size: 200% 200%;
        }
        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin: 3rem 0;
            flex-wrap: wrap;
        }
        .stat-item {
            text-align: center;
        }
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: 0.5rem;
        }
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }
        .btn {
            padding: 12px 32px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }
        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }
        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }
        /* ===== Books Section ===== */
        .books-section {
            background: var(--gradient-dark);
            position: relative;
        }
        .books-header {
            text-align: center;
            margin-bottom: 4rem;
        }
        .filters-container {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 3rem;
        }
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .filter-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        .filter-select {
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.9rem;
            cursor: pointer;
        }
        .filter-select:focus {
            outline: none;
            border-color: var(--accent-blue);
        }
        .filter-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        /* ===== Book Card Design ===== */
        .book-card {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }
        .book-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-blue);
            box-shadow: var(--shadow-xl);
        }
        .book-cover {
            position: relative;
            height: 240px;
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.5), rgba(15, 23, 42, 0.8));
            overflow: hidden;
        }
        .book-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        .book-card:hover .book-image {
            transform: scale(1.05);
        }
        .book-badges {
            position: absolute;
            top: 16px;
            right: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }
        .badge-free {
            background: linear-gradient(135deg, var(--accent-green), #34d399);
            color: black;
        }
        .badge-new {
            background: linear-gradient(135deg, var(--accent-blue), #60a5fa);
            color: white;
        }
        .badge-popular {
            background: linear-gradient(135deg, var(--accent-purple), #a78bfa);
            color: white;
        }
        .book-info {
            padding: 1.5rem;
        }
        .book-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .book-author {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .book-description {
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .book-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-top: 1px solid var(--border-light);
            margin-bottom: 1rem;
        }
        .book-category {
            padding: 4px 12px;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--accent-blue);
        }
        .book-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--accent-orange);
        }
        .book-price-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        .book-price {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--accent-blue);
        }
        .book-price-free {
            color: var(--accent-green);
        }
        .book-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }
        .btn-small {
            padding: 10px 16px;
            font-size: 0.9rem;
        }
        .btn-fullwidth {
            grid-column: 1 / -1;
        }
        /* ===== Main Content Container for Pages ===== */
        #mainContent {
            min-height: 60vh;
            padding-top: 140px;
        }
        /* ===== Pages Styling ===== */
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        .page.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* Categories Page */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }
        .category-card {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        .category-card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-5px);
        }
        .category-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--accent-blue);
        }
        /* FAQ Page */
        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .faq-item {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            margin-bottom: 1rem;
            overflow: hidden;
        }
        .faq-question {
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .faq-answer {
            padding: 0 1.5rem 1.5rem;
            color: var(--text-secondary);
            display: none;
        }
        .faq-item.active .faq-answer {
            display: block;
        }
        /* Profile Page */
        .profile-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        .profile-avatar {
            width: 120px;
            height: 120px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            margin: 0 auto 1.5rem;
        }
        .profile-info {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 2rem;
            max-width: 600px;
            margin: 0 auto;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-light);
        }
        .info-row:last-child {
            border-bottom: none;
        }
        /* Admin Page */
        .admin-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .books-list {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 1.5rem;
        }
        .book-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border-light);
        }
        .book-list-item:last-child {
            border-bottom: none;
        }
        /* ===== Modal System ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }
        .modal {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 24px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: var(--shadow-xl);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal {
            transform: translateY(0);
        }
        .modal-header {
            padding: 2rem;
            border-bottom: 1px solid var(--border-light);
            position: relative;
            text-align: center;
        }
        .modal-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }
        .modal-close:hover {
            color: var(--accent-blue);
            border-color: var(--accent-blue);
        }
        .modal-body {
            padding: 2rem;
        }
        /* ===== Forms ===== */
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-label {
            display: block;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .form-input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        /* ===== Centered Forms ===== */
        .centered-form {
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
        }
        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            justify-content: center;
        }
        .form-switch {
            text-align: center;
            margin-top: 1.5rem;
            color: var(--text-secondary);
        }
        .form-switch a {
            color: var(--accent-blue);
            cursor: pointer;
            text-decoration: none;
        }
        /* ===== Code Editor Page ===== */
        .code-editor-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            height: 70vh;
        }
        .code-editor-section, .preview-section {
            display: flex;
            flex-direction: column;
        }
        .code-editor-section h3, .preview-section h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        .editor-toolbar {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        .editor-container {
            flex: 1;
            border: 1px solid var(--border-light);
            border-radius: 12px;
            overflow: hidden;
        }
        .preview-container {
            flex: 1;
            border: 1px solid var(--border-light);
            border-radius: 12px;
            background: white;
            overflow: hidden;
        }
        .preview-content {
            width: 100%;
            height: 100%;
            border: none;
        }
        /* ===== Hosting Page ===== */
        .hosting-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        .hosting-card {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        .hosting-card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-5px);
        }
        .hosting-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--accent-blue);
        }
        /* ===== Enhanced Admin Panel ===== */
        .admin-panel {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
            min-height: 70vh;
        }
        .admin-sidebar {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 1.5rem;
        }
        .admin-sidebar h3 {
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-light);
        }
        .admin-menu {
            list-style: none;
        }
        .admin-menu li {
            margin-bottom: 0.5rem;
        }
        .admin-menu a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .admin-menu a:hover, .admin-menu a.active {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
        }
        .admin-content {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 2rem;
            overflow-y: auto;
        }
        .admin-section {
            display: none;
        }
        .admin-section.active {
            display: block;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        .stat-card-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: 0.5rem;
        }
        .stat-card-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        /* ===== Footer ===== */
        .footer {
            background: var(--secondary-bg);
            padding: 4rem 0 2rem;
            border-top: 1px solid var(--border-light);
        }
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 3rem;
        }
        .footer-section h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
        }
        .footer-links {
            list-style: none;
        }
        .footer-links li {
            margin-bottom: 0.75rem;
        }
        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .footer-links a:hover {
            color: var(--accent-blue);
        }
        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--border-light);
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        /* ===== Toast Notifications ===== */
        .toast-container {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 9999;
        }
        .toast {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s ease;
        }
        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        .toast.success {
            border-left: 4px solid var(--accent-green);
        }
        .toast.error {
            border-left: 4px solid #ef4444;
        }
        .toast.warning {
            border-left: 4px solid var(--accent-orange);
        }
        /* ===== Responsive Design ===== */
        @media (max-width: 1200px) {
            .hero-title {
                font-size: 4rem;
            }
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            .admin-panel {
                grid-template-columns: 1fr;
            }
            .code-editor-container {
                grid-template-columns: 1fr;
                height: 120vh;
            }
        }
        @media (max-width: 992px) {
            .navbar {
                flex-wrap: wrap;
            }
            .search-box {
                order: 3;
                width: 100%;
                margin-top: 1rem;
            }
            .hero-title {
                font-size: 3rem;
            }
            .section-title {
                font-size: 2.5rem;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            .hero-title {
                font-size: 2.5rem;
            }
            .hero-stats {
                gap: 2rem;
            }
            .stat-number {
                font-size: 2rem;
            }
            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }
            .btn {
                width: 100%;
                justify-content: center;
            }
            .filters-grid {
                grid-template-columns: 1fr;
            }
            .book-actions {
                grid-template-columns: 1fr;
            }
            .modal {
                width: 95%;
                margin: 1rem;
            }
        }
        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }
            .section-title {
                font-size: 2rem;
            }
            .book-card {
                min-width: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="bg-effects">
        <div class="gradient-circle circle-1"></div>
        <div class="gradient-circle circle-2"></div>
        <div class="grid-pattern"></div>
    </div>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <a href="#" class="logo">
                    <div class="logo-icon">
                        <span class="material-symbols-rounded">code</span>
                    </div>
                    <span class="logo-text">BetterProgrammer</span>
                </a>
                <ul class="nav-links">
                    <li><a href="#" class="nav-link active" data-page="home">
                        <span class="material-symbols-rounded">home</span>
                        Home
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="books">
                        <span class="material-symbols-rounded">menu_book</span>
                        Books
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="categories">
                        <span class="material-symbols-rounded">category</span>
                        Categories
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="faq">
                        <span class="material-symbols-rounded">help</span>
                        FAQ
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="profile">
                        <span class="material-symbols-rounded">person</span>
                        Profile
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="codeEditor">
                        <span class="material-symbols-rounded">code_blocks</span>
                        Code Editor
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="hosting">
                        <span class="material-symbols-rounded">cloud_upload</span>
                        Hosting
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="adminPanel" id="adminNavLink" style="display: none;">
                        <span class="material-symbols-rounded">admin_panel_settings</span>
                        Admin
                    </a></li>
                </ul>
                <div class="header-actions">
                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="Search books..." id="searchInput">
                        <span class="material-symbols-rounded search-icon">search</span>
                    </div>
                    <button class="cart-btn" id="cartBtn">
                        <span class="material-symbols-rounded">shopping_cart</span>
                        <span class="cart-count" id="cartCount">0</span>
                    </button>
                    <button class="auth-btn" id="authBtn">Sign In</button>
                </div>
            </nav>
        </div>
    </header>
    <!-- Main Content Container for All Pages -->
    <main id="mainContent">
        <!-- Home Page (Hero) -->
        <section class="page active" id="homePage">
            <div class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1 class="hero-title">Master Programming with Premium E-Books</h1>
                        <p class="hero-subtitle">
                            Access the largest collection of programming books written by industry experts.
                            From beginner tutorials to advanced algorithms, everything you need to level up your skills.
                        </p>
                        <div class="hero-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="totalBooks">500+</div>
                                <div class="stat-label">E-Books</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="totalAuthors">150+</div>
                                <div class="stat-label">Expert Authors</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="activeReaders">10K+</div>
                                <div class="stat-label">Active Readers</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="avgRating">4.8</div>
                                <div class="stat-label">Avg Rating</div>
                            </div>
                        </div>
                        <div class="cta-buttons">
                            <button class="btn btn-primary" id="exploreBtn">
                                <span class="material-symbols-rounded">explore</span>
                                Explore Library
                            </button>
                            <button class="btn btn-secondary" id="joinFreeBtn">
                                <span class="material-symbols-rounded">person_add</span>
                                Join Free
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Books Page -->
        <section class="page books-section" id="booksPage">
            <div class="container">
                <div class="books-header">
                    <h2 class="section-title">Programming E-Books Collection</h2>
                    <p class="section-subtitle">Browse our curated collection of programming books. Filter by category, difficulty, or price range.</p>
                </div>
                <!-- Filters -->
                <div class="filters-container">
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label class="filter-label">
                                <span class="material-symbols-rounded">category</span>
                                Category
                            </label>
                            <select class="filter-select" id="categoryFilter">
                                <option value="all">All Categories</option>
                                <option value="web">Web Development</option>
                                <option value="mobile">Mobile Development</option>
                                <option value="data">Data Science</option>
                                <option value="ai">AI & Machine Learning</option>
                                <option value="devops">DevOps</option>
                                <option value="algorithms">Algorithms</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">
                                <span class="material-symbols-rounded">attach_money</span>
                                Price Range
                            </label>
                            <select class="filter-select" id="priceFilter">
                                <option value="all">All Prices</option>
                                <option value="free">Free Only</option>
                                <option value="paid">Paid Only</option>
                                <option value="under-20">Under $20</option>
                                <option value="20-50">$20 - $50</option>
                                <option value="over-50">Over $50</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">
                                <span class="material-symbols-rounded">sort</span>
                                Sort By
                            </label>
                            <select class="filter-select" id="sortFilter">
                                <option value="popular">Most Popular</option>
                                <option value="newest">Newest First</option>
                                <option value="rating">Highest Rated</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">
                                <span class="material-symbols-rounded">school</span>
                                Difficulty
                            </label>
                            <select class="filter-select" id="difficultyFilter">
                                <option value="all">All Levels</option>
                                <option value="beginner">Beginner</option>
                                <option value="intermediate">Intermediate</option>
                                <option value="advanced">Advanced</option>
                            </select>
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button class="btn btn-secondary" id="resetFilters">
                            <span class="material-symbols-rounded">restart_alt</span>
                            Reset Filters
                        </button>
                    </div>
                </div>
                <!-- Books Grid -->
                <div class="books-grid" id="booksGrid">
                    <!-- Books will be loaded here dynamically -->
                </div>
                <!-- Load More Button -->
                <div style="text-align: center; margin-top: 3rem;">
                    <button class="btn btn-secondary" id="loadMoreBtn">
                        <span class="material-symbols-rounded">expand_more</span>
                        Load More Books
                    </button>
                </div>
            </div>
        </section>
        <!-- Categories Page -->
        <section class="page" id="categoriesPage">
            <div class="container section">
                <h2 class="section-title">Book Categories</h2>
                <p class="section-subtitle">Explore programming books by category to find exactly what you're looking for.</p>
                <div class="categories-grid" id="categoriesGrid">
                    <!-- Categories will be loaded here dynamically -->
                </div>
            </div>
        </section>
        <!-- FAQ Page -->
        <section class="page" id="faqPage">
            <div class="container section">
                <h2 class="section-title">Frequently Asked Questions</h2>
                <p class="section-subtitle">Find answers to common questions about our e-book library and services.</p>
                <div class="faq-container" id="faqContainer">
                    <!-- FAQ items will be loaded here dynamically -->
                </div>
            </div>
        </section>
        <!-- Profile Page -->
        <section class="page" id="profilePage">
            <div class="container section">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <span class="material-symbols-rounded">person</span>
                    </div>
                    <h2 class="section-title">My Profile</h2>
                    <p class="section-subtitle">View and manage your account information</p>
                </div>
                <div class="profile-info" id="profileInfo">
                    <!-- Profile info will be loaded here dynamically -->
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-secondary" id="editProfileBtn">
                        <span class="material-symbols-rounded">edit</span>
                        Edit Profile
                    </button>
                    <button class="btn btn-primary" id="myBooksBtn">
                        <span class="material-symbols-rounded">library_books</span>
                        My Purchased Books
                    </button>
                </div>
            </div>
        </section>
        <!-- Code Editor Page -->
        <section class="page" id="codeEditorPage">
            <div class="container section">
                <h2 class="section-title">Online Code Editor</h2>
                <p class="section-subtitle">Write, test, and preview your code in real-time. Supports multiple programming languages.</p>
                <div class="code-editor-container">
                    <div class="code-editor-section">
                        <h3>Write Your Code</h3>
                        <div class="editor-toolbar">
                            <select class="form-input" id="languageSelect" style="width: 150px;">
                                <option value="javascript">JavaScript</option>
                                <option value="html">HTML</option>
                                <option value="css">CSS</option>
                                <option value="python">Python</option>
                                <option value="java">Java</option>
                                <option value="php">PHP</option>
                                <option value="cpp">C++</option>
                            </select>
                            <button class="btn btn-secondary btn-small" id="clearCodeBtn">
                                <span class="material-symbols-rounded">delete</span>
                                Clear
                            </button>
                            <button class="btn btn-primary btn-small" id="runCodeBtn">
                                <span class="material-symbols-rounded">play_arrow</span>
                                Run Code
                            </button>
                            <button class="btn btn-secondary btn-small" id="saveCodeBtn">
                                <span class="material-symbols-rounded">save</span>
                                Save
                            </button>
                        </div>
                        <div class="editor-container">
                            <textarea id="codeEditor" style="display: none;"></textarea>
                        </div>
                    </div>
                    <div class="preview-section">
                        <h3>Live Preview</h3>
                        <div class="preview-container">
                            <iframe id="previewFrame" class="preview-content"></iframe>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem;">Saved Code Snippets</h3>
                    <div id="savedSnippets" style="background: var(--card-bg); border: 1px solid var(--border-light); border-radius: 12px; padding: 1.5rem; min-height: 100px;">
                        <!-- Saved snippets will appear here -->
                    </div>
                </div>
            </div>
        </section>
        <!-- Hosting Page -->
        <section class="page" id="hostingPage">
            <div class="container section">
                <h2 class="section-title">Local Hosting & Deployment</h2>
                <p class="section-subtitle">Host your projects locally or deploy them to the web with our easy-to-use tools.</p>
                <div class="hosting-options">
                    <div class="hosting-card">
                        <div class="hosting-icon">
                            <span class="material-symbols-rounded">computer</span>
                        </div>
                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Local Hosting</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">Run your projects on localhost for testing and development</p>
                        <button class="btn btn-primary" id="startLocalHostBtn">
                            <span class="material-symbols-rounded">play_arrow</span>
                            Start Local Server
                        </button>
                    </div>
                    <div class="hosting-card">
                        <div class="hosting-icon">
                            <span class="material-symbols-rounded">cloud</span>
                        </div>
                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Web Deployment</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">Deploy your projects to the web with one click</p>
                        <button class="btn btn-primary" id="deployBtn">
                            <span class="material-symbols-rounded">cloud_upload</span>
                            Deploy Project
                        </button>
                    </div>
                    <div class="hosting-card">
                        <div class="hosting-icon">
                            <span class="material-symbols-rounded">folder</span>
                        </div>
                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Project Management</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">Manage and organize your projects and files</p>
                        <button class="btn btn-primary" id="manageProjectsBtn">
                            <span class="material-symbols-rounded">folder_open</span>
                            Manage Projects
                        </button>
                    </div>
                </div>
                <div id="hostingStatus" style="margin-top: 2rem; text-align: center; padding: 1.5rem; background: var(--card-bg); border: 1px solid var(--border-light); border-radius: 12px; display: none;">
                    <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Server Status</h3>
                    <p id="serverStatusText" style="color: var(--text-secondary);"></p>
                </div>
            </div>
        </section>
        <!-- Enhanced Admin Panel -->
        <section class="page" id="adminPanelPage">
            <div class="container section">
                <h2 class="section-title">Admin Dashboard</h2>
                <p class="section-subtitle">Manage all aspects of the website with full control and privileges.</p>
                <div class="admin-panel">
                    <div class="admin-sidebar">
                        <h3>Admin Menu</h3>
                        <ul class="admin-menu">
                            <li><a href="#" data-admin-section="dashboard" class="active">
                                <span class="material-symbols-rounded">dashboard</span>
                                Dashboard
                            </a></li>
                            <li><a href="#" data-admin-section="books">
                                <span class="material-symbols-rounded">menu_book</span>
                                Books Management
                            </a></li>
                            <li><a href="#" data-admin-section="users">
                                <span class="material-symbols-rounded">people</span>
                                Users Management
                            </a></li>
                            <li><a href="#" data-admin-section="categories">
                                <span class="material-symbols-rounded">category</span>
                                Categories
                            </a></li>
                            <li><a href="#" data-admin-section="orders">
                                <span class="material-symbols-rounded">shopping_cart</span>
                                Orders
                            </a></li>
                            <li><a href="#" data-admin-section="settings">
                                <span class="material-symbols-rounded">settings</span>
                                Settings
                            </a></li>
                        </ul>
                    </div>
                    <div class="admin-content">
                        <!-- Dashboard Section -->
                        <div class="admin-section active" id="adminDashboard">
                            <h3 style="margin-bottom: 1.5rem;">System Overview</h3>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-card-number" id="totalBooksCount">0</div>
                                    <div class="stat-card-label">Total Books</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-number" id="totalUsersCount">0</div>
                                    <div class="stat-card-label">Total Users</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-number" id="totalOrdersCount">0</div>
                                    <div class="stat-card-label">Total Orders</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-number" id="totalRevenue">$0</div>
                                    <div class="stat-card-label">Total Revenue</div>
                                </div>
                            </div>
                            <div style="margin-top: 2rem;">
                                <h3 style="margin-bottom: 1rem;">Recent Activity</h3>
                                <div id="recentActivity" style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1.5rem; min-height: 200px;">
                                    <!-- Recent activity will be loaded here -->
                                </div>
                            </div>
                        </div>
                        <!-- Books Management Section -->
                        <div class="admin-section" id="adminBooks">
                            <h3 style="margin-bottom: 1.5rem;">Books Management</h3>
                            <div class="admin-actions">
                                <button class="btn btn-primary" id="adminAddBookBtn">
                                    <span class="material-symbols-rounded">add</span>
                                    Add New Book
                                </button>
                                <button class="btn btn-secondary" id="adminImportBooksBtn">
                                    <span class="material-symbols-rounded">upload</span>
                                    Import Books
                                </button>
                                <button class="btn btn-secondary" id="adminExportBooksBtn">
                                    <span class="material-symbols-rounded">download</span>
                                    Export Books
                                </button>
                            </div>
                            <div class="books-list" style="margin-top: 2rem;">
                                <div id="adminBooksList">
                                    <!-- Books will be loaded here -->
                                </div>
                            </div>
                        </div>
                        <!-- Users Management Section -->
                        <div class="admin-section" id="adminUsers">
                            <h3 style="margin-bottom: 1.5rem;">Users Management</h3>
                            <div style="margin-bottom: 1.5rem;">
                                <input type="text" class="form-input" id="searchUsers" placeholder="Search users...">
                            </div>
                            <div id="usersList">
                                <!-- Users will be loaded here -->
                            </div>
                        </div>
                        <!-- Categories Section -->
                        <div class="admin-section" id="adminCategories">
                            <h3 style="margin-bottom: 1.5rem;">Categories Management</h3>
                            <div id="categoriesManagement">
                                <!-- Categories management will be loaded here -->
                            </div>
                        </div>
                        <!-- Orders Section -->
                        <div class="admin-section" id="adminOrders">
                            <h3 style="margin-bottom: 1.5rem;">Orders Management</h3>
                            <div id="ordersList">
                                <!-- Orders will be loaded here -->
                            </div>
                        </div>
                        <!-- Settings Section -->
                        <div class="admin-section" id="adminSettings">
                            <h3 style="margin-bottom: 1.5rem;">System Settings</h3>
                            <form id="adminSettingsForm">
                                <div class="form-group">
                                    <label class="form-label">
                                        <span class="material-symbols-rounded">store</span>
                                        Site Name
                                    </label>
                                    <input type="text" class="form-input" id="siteName" value="Better Programmer">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">
                                        <span class="material-symbols-rounded">description</span>
                                        Site Description
                                    </label>
                                    <textarea class="form-input" id="siteDescription" rows="3">Premium Programming E-Books Library</textarea>
                                </div>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">attach_money</span>
                                            Default Currency
                                        </label>
                                        <select class="form-input" id="defaultCurrency">
                                            <option value="USD">USD ($)</option>
                                            <option value="EUR">EUR ()</option>
                                            <option value="GBP">GBP ()</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">language</span>
                                            Default Language
                                        </label>
                                        <select class="form-input" id="defaultLanguage">
                                            <option value="en">English</option>
                                            <option value="ge">Georgian</option>
                                            <option value="ru">Russian</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <span class="material-symbols-rounded">save</span>
                                        Save Settings
                                    </button>
                                    <button type="button" class="btn btn-secondary" id="resetSettingsBtn">
                                        <span class="material-symbols-rounded">restart_alt</span>
                                        Reset to Default
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Book Detail Page -->
        <section class="page" id="bookDetailPage">
            <div class="container section">
                <div id="bookDetailContent">
                    <!-- Dynamic book detail content -->
                </div>
            </div>
        </section>
    </main>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>
    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modalOverlay"></div>
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Better Programmer</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        Your premier destination for programming education.
                        Master the code, master the future.
                    </p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="app.navigateTo('home')"><span class="material-symbols-rounded">home</span> Home</a></li>
                        <li><a href="#" onclick="app.navigateTo('books')"><span class="material-symbols-rounded">menu_book</span> E-Books</a></li>
                        <li><a href="#" onclick="app.navigateTo('categories')"><span class="material-symbols-rounded">category</span> Categories</a></li>
                        <li><a href="#" onclick="app.navigateTo('faq')"><span class="material-symbols-rounded">help</span> FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Categories</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="app.navigateTo('books'); app.setFilter('category', 'web')"><span class="material-symbols-rounded">code</span> Web Development</a></li>
                        <li><a href="#" onclick="app.navigateTo('books'); app.setFilter('category', 'mobile')"><span class="material-symbols-rounded">smartphone</span> Mobile Development</a></li>
                        <li><a href="#" onclick="app.navigateTo('books'); app.setFilter('category', 'data')"><span class="material-symbols-rounded">analytics</span> Data Science</a></li>
                        <li><a href="#" onclick="app.navigateTo('books'); app.setFilter('category', 'ai')"><span class="material-symbols-rounded">psychology</span> AI & ML</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Support</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="app.navigateTo('faq')"><span class="material-symbols-rounded">contact_support</span> Help Center</a></li>
                        <li><a href="#"><span class="material-symbols-rounded">email</span> Contact Us</a></li>
                        <li><a href="#"><span class="material-symbols-rounded">policy</span> Privacy Policy</a></li>
                        <li><a href="#"><span class="material-symbols-rounded">description</span> Terms</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p> 2024 Better Programmer. All rights reserved.</p>
                <p style="margin-top: 0.5rem; color: var(--text-muted);">
                    Made with <span style="color: var(--accent-blue);"></span> for developers worldwide
                </p>
            </div>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/clike/clike.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/php/php.min.js"></script>
    <script>
        class BetterProgrammerApp {
            constructor() {
                this.state = {
                    user: null,
                    books: [],
                    cart: [],
                    paymentCards: [],
                    currentBookId: null,
                    filters: {
                        category: 'all',
                        price: 'all',
                        sort: 'popular',
                        difficulty: 'all',
                        search: ''
                    },
                    registeredUsers: new Set(),
                    codeEditor: null,
                    serverRunning: false
                };
                this.init();
            }
            init() {
                this.loadData();
                this.initUI();
                this.setupEventListeners();
                this.renderBooks();
                this.updateCartCount();
                this.renderCategories();
                this.renderFAQ();
                this.renderProfile();
                this.setupAdminPanel();
                this.setupCodeEditor();
            }
            loadData() {
                // Load user from localStorage
                const savedUser = localStorage.getItem('bp_user');
                if (savedUser) {
                    this.state.user = JSON.parse(savedUser);
                }
                // Load cart from localStorage
                const savedCart = localStorage.getItem('bp_cart');
                if (savedCart) {
                    this.state.cart = JSON.parse(savedCart);
                }
                // Load registered users
                const savedUsers = localStorage.getItem('bp_registered_users');
                if (savedUsers) {
                    this.state.registeredUsers = new Set(JSON.parse(savedUsers));
                } else {
                    // Add default admin user
                    this.state.registeredUsers.add('better');
                    this.saveRegisteredUsers();
                }
                // Load books from localStorage or use default
                const savedBooks = localStorage.getItem('bp_books');
                if (savedBooks) {
                    this.state.books = JSON.parse(savedBooks);
                } else {
                    this.state.books = this.getDefaultBooks();
                    this.saveBooks();
                }
                // Load admin settings
                const savedSettings = localStorage.getItem('bp_admin_settings');
                if (savedSettings) {
                    this.state.settings = JSON.parse(savedSettings);
                } else {
                    this.state.settings = {
                        siteName: 'Better Programmer',
                        siteDescription: 'Premium Programming E-Books Library',
                        defaultCurrency: 'USD',
                        defaultLanguage: 'en'
                    };
                    this.saveAdminSettings();
                }
            }
            getDefaultBooks() {
                return [
                    {
                        id: 'clean-code-' + Date.now(),
                        title: 'Clean Code: A Handbook of Agile Software Craftsmanship',
                        author: 'Robert C. Martin',
                        price: 29.99,
                        originalPrice: 39.99,
                        category: 'algorithms',
                        difficulty: 'intermediate',
                        rating: 4.7,
                        reviews: 1248,
                        description: 'Learn how to write clean, maintainable code that other developers will love to work with.',
                        longDescription: 'Even bad code can function. But if code isn\'t clean, it can bring a development organization to its knees. Every year, countless hours and significant resources are lost because of poorly written code. But it doesn\'t have to be that way.',
                        image: 'https://picsum.photos/400/600?random=1',
                        badges: ['popular', 'bestseller'],
                        pages: 464,
                        language: 'English',
                        published: '2008-08-01',
                        publisher: 'Prentice Hall',
                        topics: ['Software Architecture', 'Refactoring', 'Code Quality'],
                        previewContent: 'Chapter 1: Clean Code - What is clean code? This chapter introduces the concept of clean code and why it matters...'
                    },
                    {
                        id: 'eloquent-js-' + Date.now(),
                        title: 'Eloquent JavaScript',
                        author: 'Marijn Haverbeke',
                        price: 0,
                        category: 'web',
                        difficulty: 'beginner',
                        rating: 4.6,
                        reviews: 856,
                        description: 'A modern introduction to programming using JavaScript. Learn the fundamentals and advanced concepts.',
                        longDescription: 'This is a book about JavaScript, programming, and the wonders of the digital. You can read it online here, or buy your own paperback copy.',
                        image: 'https://picsum.photos/400/600?random=2',
                        badges: ['free', 'new'],
                        pages: 472,
                        language: 'English',
                        published: '2018-12-04',
                        publisher: 'No Starch Press',
                        topics: ['JavaScript', 'Web Development', 'Programming Basics'],
                        previewContent: 'Introduction: Welcome to the world of JavaScript. This book will guide you through the language...'
                    },
                    {
                        id: 'pragmatic-' + Date.now(),
                        title: 'The Pragmatic Programmer',
                        author: 'David Thomas & Andrew Hunt',
                        price: 39.99,
                        originalPrice: 49.99,
                        category: 'web',
                        difficulty: 'intermediate',
                        rating: 4.8,
                        reviews: 956,
                        description: 'Your journey to mastery, from apprentice to master craftsman.',
                        longDescription: 'The Pragmatic Programmer is one of those rare tech books you\'ll read, re-read, and read again over the years.',
                        image: 'https://picsum.photos/400/600?random=3',
                        badges: ['popular'],
                        pages: 352,
                        language: 'English',
                        published: '2019-09-13',
                        publisher: 'Addison-Wesley',
                        topics: ['Software Engineering', 'Career Development', 'Best Practices'],
                        previewContent: 'Chapter 1: A Pragmatic Philosophy - This chapter sets the tone for the entire book...'
                    }
                ];
            }
            initUI() {
                this.updateAuthButton();
                this.updateAdminNav();
            }
            setupEventListeners() {
                // Navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = link.dataset.page;
                        this.navigateTo(page);
                    });
                });
                // Explore button
                document.getElementById('exploreBtn').addEventListener('click', () => {
                    this.navigateTo('books');
                });
                // Join free button
                document.getElementById('joinFreeBtn').addEventListener('click', () => {
                    this.showSignupModal();
                });
                // Auth button
                document.getElementById('authBtn').addEventListener('click', () => {
                    if (this.state.user) {
                        this.logout();
                    } else {
                        this.showAuthModal();
                    }
                });
                // Cart button
                document.getElementById('cartBtn').addEventListener('click', () => {
                    this.showCart();
                });
                // Search
                document.getElementById('searchInput').addEventListener('input', (e) => {
                    this.state.filters.search = e.target.value;
                    this.filterAndRenderBooks();
                });
                // Filters
                document.getElementById('categoryFilter').addEventListener('change', (e) => {
                    this.state.filters.category = e.target.value;
                    this.filterAndRenderBooks();
                });
                document.getElementById('priceFilter').addEventListener('change', (e) => {
                    this.state.filters.price = e.target.value;
                    this.filterAndRenderBooks();
                });
                document.getElementById('sortFilter').addEventListener('change', (e) => {
                    this.state.filters.sort = e.target.value;
                    this.filterAndRenderBooks();
                });
                document.getElementById('difficultyFilter').addEventListener('change', (e) => {
                    this.state.filters.difficulty = e.target.value;
                    this.filterAndRenderBooks();
                });
                // Reset filters
                document.getElementById('resetFilters').addEventListener('click', () => {
                    this.resetFilters();
                });
                // Load more button
                document.getElementById('loadMoreBtn').addEventListener('click', () => {
                    this.loadMoreBooks();
                });
                // Profile buttons
                document.getElementById('editProfileBtn').addEventListener('click', () => {
                    this.showEditProfileModal();
                });
                // Modal overlay
                document.getElementById('modalOverlay').addEventListener('click', (e) => {
                    if (e.target === document.getElementById('modalOverlay')) {
                        this.closeModal();
                    }
                });
                // Escape key
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeModal();
                    }
                });
            }
            setupCodeEditor() {
                const textarea = document.getElementById('codeEditor');
                this.state.codeEditor = CodeMirror.fromTextArea(textarea, {
                    mode: 'javascript',
                    theme: 'dracula',
                    lineNumbers: true,
                    autofocus: true,
                    indentUnit: 4,
                    tabSize: 4,
                    lineWrapping: true,
                    matchBrackets: true,
                    autoCloseBrackets: true,
                    extraKeys: {
                        'Ctrl-Space': 'autocomplete',
                        'Ctrl-S': () => this.saveCodeSnippet(),
                        'Ctrl-Enter': () => this.runCode()
                    }
                });
                this.state.codeEditor.setValue(`// Welcome to Better Programmer Code Editor!
// Write your code here and click "Run Code" to see the result.

// Example: JavaScript
function greet(name) {
    return \`Hello, \${name}! Welcome to Better Programmer.\`;
}

// Try running this code
console.log(greet("Developer"));

// Or write HTML/CSS
const htmlExample = \`
<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background: #0a0a0f;
            color: #f8fafc;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #3b82f6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Better Programmer</h1>
        <p>Your code editor is working!</p>
    </div>
</body>
</html>
\`;

console.log("Ready to code!");`);

                // Code editor buttons
                document.getElementById('clearCodeBtn').addEventListener('click', () => {
                    if (confirm('Clear all code?')) {
                        this.state.codeEditor.setValue('');
                    }
                });
                document.getElementById('runCodeBtn').addEventListener('click', () => {
                    this.runCode();
                });
                document.getElementById('saveCodeBtn').addEventListener('click', () => {
                    this.saveCodeSnippet();
                });
                document.getElementById('languageSelect').addEventListener('change', (e) => {
                    const mode = this.getCodeMirrorMode(e.target.value);
                    this.state.codeEditor.setOption('mode', mode);
                });
                // Hosting buttons
                document.getElementById('startLocalHostBtn').addEventListener('click', () => {
                    this.startLocalHost();
                });
                document.getElementById('deployBtn').addEventListener('click', () => {
                    this.deployProject();
                });
                document.getElementById('manageProjectsBtn').addEventListener('click', () => {
                    this.showProjectManager();
                });
                this.loadSavedSnippets();
            }
            getCodeMirrorMode(language) {
                const modes = {
                    'javascript': 'javascript',
                    'html': 'htmlmixed',
                    'css': 'css',
                    'python': 'python',
                    'java': 'text/x-java',
                    'php': 'php',
                    'cpp': 'text/x-c++src'
                };
                return modes[language] || 'javascript';
            }
            runCode() {
                const code = this.state.codeEditor.getValue();
                const language = document.getElementById('languageSelect').value;
                const previewFrame = document.getElementById('previewFrame');
                
                try {
                    if (language === 'html') {
                        // For HTML, write directly to iframe
                        previewFrame.contentDocument.open();
                        previewFrame.contentDocument.write(code);
                        previewFrame.contentDocument.close();
                    } else if (language === 'javascript') {
                        // For JavaScript, create HTML page with script
                        const html = `
                            <!DOCTYPE html>
                            <html>
                            <head>
                                <style>
                                    body { 
                                        background: #0a0a0f; 
                                        color: #f8fafc; 
                                        padding: 20px;
                                        font-family: 'Inter', sans-serif;
                                    }
                                    .console {
                                        background: #1e293b;
                                        border: 1px solid #334155;
                                        border-radius: 8px;
                                        padding: 15px;
                                        margin-top: 20px;
                                        font-family: monospace;
                                        color: #94a3b8;
                                    }
                                </style>
                            </head>
                            <body>
                                <h3>JavaScript Output:</h3>
                                <div id="output"></div>
                                <div class="console" id="console"></div>
                                <script>
                                    const originalLog = console.log;
                                    const outputDiv = document.getElementById('output');
                                    const consoleDiv = document.getElementById('console');
                                    
                                    console.log = function(...args) {
                                        originalLog.apply(console, args);
                                        const message = args.map(arg => 
                                            typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
                                        ).join(' ');
                                        consoleDiv.innerHTML += message + '\\n';
                                    };
                                    
                                    try {
                                        ${code}
                                    } catch(error) {
                                        console.log('Error:', error.message);
                                    }
                                <\/script>
                            </body>
                            </html>
                        `;
                        previewFrame.contentDocument.open();
                        previewFrame.contentDocument.write(html);
                        previewFrame.contentDocument.close();
                    } else if (language === 'css') {
                        // For CSS, apply to basic HTML
                        const html = `
                            <!DOCTYPE html>
                            <html>
                            <head>
                                <style>${code}</style>
                            </head>
                            <body>
                                <h1>CSS Preview</h1>
                                <div class="box" style="width: 200px; height: 200px; background: #3b82f6; margin: 20px;">Styled Box</div>
                                <p>Your CSS is being applied to this preview.</p>
                            </body>
                            </html>
                        `;
                        previewFrame.contentDocument.open();
                        previewFrame.contentDocument.write(html);
                        previewFrame.contentDocument.close();
                    } else {
                        // For other languages, show in console
                        previewFrame.contentDocument.open();
                        previewFrame.contentDocument.write(`
                            <!DOCTYPE html>
                            <html>
                            <body style="background: #0a0a0f; color: #f8fafc; padding: 20px;">
                                <h3>${language.toUpperCase()} Code Preview</h3>
                                <pre style="background: #1e293b; padding: 15px; border-radius: 8px;">${this.escapeHtml(code)}</pre>
                            </body>
                            </html>
                        `);
                        previewFrame.contentDocument.close();
                    }
                    this.showToast('Code executed successfully!', 'success');
                } catch (error) {
                    this.showToast('Error executing code: ' + error.message, 'error');
                }
            }
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
            saveCodeSnippet() {
                const code = this.state.codeEditor.getValue();
                const language = document.getElementById('languageSelect').value;
                const timestamp = new Date().toLocaleString();
                
                if (!this.state.user) {
                    this.showToast('Please sign in to save code snippets', 'warning');
                    this.showAuthModal();
                    return;
                }
                
                const snippet = {
                    id: 'snippet-' + Date.now(),
                    code,
                    language,
                    timestamp,
                    userId: this.state.user.id
                };
                
                // Save to localStorage
                let savedSnippets = JSON.parse(localStorage.getItem('bp_code_snippets') || '[]');
                savedSnippets.push(snippet);
                localStorage.setItem('bp_code_snippets', JSON.stringify(savedSnippets));
                
                this.showToast('Code snippet saved!', 'success');
                this.loadSavedSnippets();
            }
            loadSavedSnippets() {
                const savedSnippets = JSON.parse(localStorage.getItem('bp_code_snippets') || '[]');
                const container = document.getElementById('savedSnippets');
                
                if (savedSnippets.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; color: var(--text-secondary); padding: 2rem;">
                            <span class="material-symbols-rounded" style="font-size: 3rem; margin-bottom: 1rem;">code_off</span>
                            <p>No saved code snippets yet. Write some code and click "Save"!</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
                        ${savedSnippets.slice(-6).reverse().map(snippet => `
                            <div style="background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-light); border-radius: 8px; padding: 1rem;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <span class="badge badge-popular" style="padding: 2px 8px;">${snippet.language}</span>
                                    <div style="color: var(--text-muted); font-size: 0.8rem;">${snippet.timestamp}</div>
                                </div>
                                <pre style="color: var(--text-secondary); font-size: 0.85rem; overflow: hidden; text-overflow: ellipsis; max-height: 100px;">${this.escapeHtml(snippet.code.substring(0, 200))}${snippet.code.length > 200 ? '...' : ''}</pre>
                                <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                    <button class="btn btn-secondary" onclick="app.loadSnippet('${snippet.id}')" style="padding: 4px 8px; font-size: 0.8rem;">
                                        <span class="material-symbols-rounded" style="font-size: 1rem;">open_in_new</span>
                                        Load
                                    </button>
                                    <button class="btn btn-secondary" onclick="app.deleteSnippet('${snippet.id}')" style="padding: 4px 8px; font-size: 0.8rem;">
                                        <span class="material-symbols-rounded" style="font-size: 1rem;">delete</span>
                                        Delete
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            loadSnippet(snippetId) {
                const savedSnippets = JSON.parse(localStorage.getItem('bp_code_snippets') || '[]');
                const snippet = savedSnippets.find(s => s.id === snippetId);
                if (snippet) {
                    this.state.codeEditor.setValue(snippet.code);
                    document.getElementById('languageSelect').value = snippet.language;
                    const mode = this.getCodeMirrorMode(snippet.language);
                    this.state.codeEditor.setOption('mode', mode);
                    this.showToast('Code snippet loaded!', 'success');
                }
            }
            deleteSnippet(snippetId) {
                if (confirm('Delete this code snippet?')) {
                    let savedSnippets = JSON.parse(localStorage.getItem('bp_code_snippets') || '[]');
                    savedSnippets = savedSnippets.filter(s => s.id !== snippetId);
                    localStorage.setItem('bp_code_snippets', JSON.stringify(savedSnippets));
                    this.loadSavedSnippets();
                    this.showToast('Code snippet deleted', 'success');
                }
            }
            startLocalHost() {
                const statusDiv = document.getElementById('hostingStatus');
                const statusText = document.getElementById('serverStatusText');
                
                if (this.state.serverRunning) {
                    this.state.serverRunning = false;
                    statusText.innerHTML = `
                        <span style="color: #ef4444;"></span> Server stopped
                        <br><small>Localhost server is no longer running</small>
                    `;
                    this.showToast('Local server stopped', 'info');
                } else {
                    this.state.serverRunning = true;
                    statusDiv.style.display = 'block';
                    statusText.innerHTML = `
                        <span style="color: var(--accent-green);"></span> Server running on <strong>localhost:5500</strong>
                        <br><small>Your code is now accessible at <a href="#" style="color: var(--accent-blue);">http://localhost:5500</a></small>
                        <br><small>To access from other devices: <a href="#" style="color: var(--accent-blue);">http://${this.getLocalIP()}:5500</a></small>
                    `;
                    this.showToast('Local server started on port 5500!', 'success');
                }
            }
            getLocalIP() {
                // Simulated local IP for demo
                return '192.168.1.100';
            }
            deployProject() {
                if (!this.state.user) {
                    this.showToast('Please sign in to deploy projects', 'warning');
                    this.showAuthModal();
                    return;
                }
                
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">cloud_upload</span>
                                Deploy Project
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="centered-form">
                                <div style="text-align: center; margin-bottom: 2rem;">
                                    <span class="material-symbols-rounded" style="font-size: 4rem; color: var(--accent-blue); margin-bottom: 1rem;">cloud_upload</span>
                                    <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Deploy Your Project</h3>
                                    <p style="color: var(--text-secondary);">Deploy your code to the web with one click</p>
                                </div>
                                <form id="deployForm" onsubmit="app.handleDeploy(event)">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">badge</span>
                                            Project Name
                                        </label>
                                        <input type="text" class="form-input" id="projectName" required placeholder="my-awesome-project">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">public</span>
                                            Domain
                                        </label>
                                        <div style="display: flex; align-items: center;">
                                            <input type="text" class="form-input" id="projectDomain" required placeholder="myproject" style="border-top-right-radius: 0; border-bottom-right-radius: 0; border-right: none;">
                                            <span style="background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-light); border-left: none; border-top-right-radius: 8px; border-bottom-right-radius: 8px; padding: 12px 16px; color: var(--text-secondary);">.betterprogrammer.com</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">code</span>
                                            Deploy Type
                                        </label>
                                        <select class="form-input" id="deployType">
                                            <option value="html">Static HTML/CSS/JS</option>
                                            <option value="node">Node.js Application</option>
                                            <option value="python">Python Application</option>
                                            <option value="php">PHP Application</option>
                                        </select>
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-secondary" onclick="app.closeModal()">Cancel</button>
                                        <button type="submit" class="btn btn-primary">
                                            <span class="material-symbols-rounded">cloud_upload</span>
                                            Deploy Now
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
            }
            handleDeploy(event) {
                event.preventDefault();
                const projectName = document.getElementById('projectName').value.trim();
                const projectDomain = document.getElementById('projectDomain').value.trim();
                const deployType = document.getElementById('deployType').value;
                
                this.showToast('Deploying project...', 'info');
                setTimeout(() => {
                    const url = `${projectDomain}.betterprogrammer.com`;
                    this.showToast(`Project deployed successfully! Access it at: ${url}`, 'success');
                    this.closeModal();
                    
                    // Show deployment info
                    const statusDiv = document.getElementById('hostingStatus');
                    const statusText = document.getElementById('serverStatusText');
                    statusDiv.style.display = 'block';
                    statusText.innerHTML = `
                        <span style="color: var(--accent-green);"></span> Project deployed!
                        <br><strong>Project:</strong> ${projectName}
                        <br><strong>URL:</strong> <a href="#" style="color: var(--accent-blue);">${url}</a>
                        <br><strong>Type:</strong> ${deployType.toUpperCase()}
                        <br><small>Your project is now live on the web!</small>
                    `;
                }, 2000);
            }
            showProjectManager() {
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">folder_open</span>
                                Project Manager
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                                <h3 style="color: var(--text-primary);">Your Projects</h3>
                                <button class="btn btn-primary" onclick="app.createNewProject()">
                                    <span class="material-symbols-rounded">add</span>
                                    New Project
                                </button>
                            </div>
                            <div id="projectsList" style="min-height: 300px;">
                                <!-- Projects will be loaded here -->
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
                this.loadProjects();
            }
            loadProjects() {
                const projects = JSON.parse(localStorage.getItem('bp_projects') || '[]');
                const container = document.getElementById('projectsList');
                
                if (projects.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; color: var(--text-secondary); padding: 3rem;">
                            <span class="material-symbols-rounded" style="font-size: 4rem; margin-bottom: 1rem;">folder_off</span>
                            <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">No Projects Yet</h3>
                            <p>Create your first project to get started!</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem;">
                        ${projects.map(project => `
                            <div style="background: var(--card-bg); border: 1px solid var(--border-light); border-radius: 12px; padding: 1.5rem;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem;">
                                    <span class="material-symbols-rounded" style="color: var(--accent-blue);">folder</span>
                                    <h4 style="color: var(--text-primary);">${project.name}</h4>
                                </div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                                    <div><strong>Type:</strong> ${project.type}</div>
                                    <div><strong>Created:</strong> ${project.created}</div>
                                    ${project.url ? `<div><strong>URL:</strong> ${project.url}</div>` : ''}
                                </div>
                                <div style="display: flex; gap: 0.5rem;">
                                    <button class="btn btn-secondary" onclick="app.openProject('${project.id}')" style="padding: 6px 12px; font-size: 0.8rem;">
                                        Open
                                    </button>
                                    <button class="btn btn-secondary" onclick="app.deployProjectById('${project.id}')" style="padding: 6px 12px; font-size: 0.8rem;">
                                        Deploy
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            createNewProject() {
                const projectName = prompt('Enter project name:');
                if (!projectName) return;
                
                const project = {
                    id: 'project-' + Date.now(),
                    name: projectName,
                    type: 'Static Website',
                    created: new Date().toLocaleDateString(),
                    files: []
                };
                
                let projects = JSON.parse(localStorage.getItem('bp_projects') || '[]');
                projects.push(project);
                localStorage.setItem('bp_projects', JSON.stringify(projects));
                
                this.loadProjects();
                this.showToast('Project created!', 'success');
            }
            openProject(projectId) {
                this.showToast('Opening project...', 'info');
                // In a real app, this would open a file editor
                setTimeout(() => {
                    this.showToast('Project opened in editor', 'success');
                    this.closeModal();
                    this.navigateTo('codeEditor');
                }, 500);
            }
            deployProjectById(projectId) {
                const projects = JSON.parse(localStorage.getItem('bp_projects') || '[]');
                const project = projects.find(p => p.id === projectId);
                if (project) {
                    this.showToast(`Deploying ${project.name}...`, 'info');
                    setTimeout(() => {
                        const url = `${project.name.toLowerCase().replace(/\s+/g, '-')}.betterprogrammer.com`;
                        project.url = url;
                        localStorage.setItem('bp_projects', JSON.stringify(projects));
                        
                        this.showToast(`${project.name} deployed to ${url}!`, 'success');
                        this.loadProjects();
                    }, 1500);
                }
            }
            setupAdminPanel() {
                // Admin sidebar navigation
                document.querySelectorAll('.admin-menu a').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = link.dataset.adminSection;
                        this.showAdminSection(section);
                        
                        // Update active state
                        document.querySelectorAll('.admin-menu a').forEach(a => {
                            a.classList.remove('active');
                        });
                        link.classList.add('active');
                    });
                });
                // Admin buttons
                document.getElementById('adminAddBookBtn')?.addEventListener('click', () => {
                    this.showAddBookModal();
                });
                document.getElementById('adminImportBooksBtn')?.addEventListener('click', () => {
                    this.importBooks();
                });
                document.getElementById('adminExportBooksBtn')?.addEventListener('click', () => {
                    this.exportBooks();
                });
                document.getElementById('searchUsers')?.addEventListener('input', (e) => {
                    this.searchUsers(e.target.value);
                });
                document.getElementById('adminSettingsForm')?.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveAdminSettings();
                });
                document.getElementById('resetSettingsBtn')?.addEventListener('click', () => {
                    this.resetAdminSettings();
                });
                // Load admin data
                this.loadAdminData();
            }
            showAdminSection(sectionId) {
                document.querySelectorAll('.admin-section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById('admin' + sectionId.charAt(0).toUpperCase() + sectionId.slice(1))?.classList.add('active');
            }
            loadAdminData() {
                // Load admin stats
                document.getElementById('totalBooksCount').textContent = this.state.books.length;
                // Simulate other stats for demo
                document.getElementById('totalUsersCount').textContent = Math.floor(Math.random() * 1000) + 500;
                document.getElementById('totalOrdersCount').textContent = Math.floor(Math.random() * 500) + 100;
                document.getElementById('totalRevenue').textContent = '$' + (Math.random() * 10000 + 5000).toFixed(2);
                // Load admin books
                this.renderAdminBooks();
                // Load admin users
                this.loadAdminUsers();
                // Load admin categories
                this.loadAdminCategories();
                // Load admin orders
                this.loadAdminOrders();
                // Load recent activity
                this.loadRecentActivity();
            }
            loadAdminUsers() {
                const users = [
                    { id: 'user-1', name: 'John Doe', email: 'john@example.com', role: 'user', joined: '2024-01-15' },
                    { id: 'user-2', name: 'Jane Smith', email: 'jane@example.com', role: 'user', joined: '2024-01-20' },
                    { id: 'user-3', name: 'Admin User', email: 'better', role: 'admin', joined: '2024-01-01' },
                    { id: 'user-4', name: 'Bob Johnson', email: 'bob@example.com', role: 'user', joined: '2024-01-25' }
                ];
                const container = document.getElementById('usersList');
                container.innerHTML = `
                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; overflow: hidden;">
                        ${users.map(user => `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid var(--border-light);">
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">${user.name}</div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem;">${user.email}  ${user.role}</div>
                                </div>
                                <div style="display: flex; gap: 0.5rem;">
                                    <button class="btn btn-secondary" onclick="app.editUser('${user.id}')" style="padding: 6px 12px; font-size: 0.8rem;">
                                        Edit
                                    </button>
                                    ${user.role !== 'admin' ? `
                                        <button class="btn btn-secondary" onclick="app.deleteUser('${user.id}')" style="padding: 6px 12px; font-size: 0.8rem; color: #ef4444;">
                                            Delete
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            searchUsers(query) {
                // In a real app, this would filter users
                this.showToast(`Searching for: ${query}`, 'info');
            }
            editUser(userId) {
                this.showToast('Edit user: ' + userId, 'info');
            }
            deleteUser(userId) {
                if (confirm('Delete this user?')) {
                    this.showToast('User deleted', 'success');
                }
            }
            loadAdminCategories() {
                const categories = [
                    { id: 'web', name: 'Web Development', count: 120 },
                    { id: 'mobile', name: 'Mobile Development', count: 85 },
                    { id: 'data', name: 'Data Science', count: 90 },
                    { id: 'ai', name: 'AI & Machine Learning', count: 65 },
                    { id: 'devops', name: 'DevOps', count: 70 },
                    { id: 'algorithms', name: 'Algorithms', count: 95 }
                ];
                const container = document.getElementById('categoriesManagement');
                container.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem;">
                        ${categories.map(cat => `
                            <div style="background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-light); border-radius: 12px; padding: 1.5rem; text-align: center;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">${cat.name}</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">${cat.count} books</div>
                                <div style="display: flex; gap: 0.5rem; justify-content: center;">
                                    <button class="btn btn-secondary" onclick="app.editCategory('${cat.id}')" style="padding: 6px 12px; font-size: 0.8rem;">
                                        Edit
                                    </button>
                                    <button class="btn btn-secondary" onclick="app.deleteCategory('${cat.id}')" style="padding: 6px 12px; font-size: 0.8rem;">
                                        Delete
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <button class="btn btn-primary" onclick="app.addCategory()" style="margin-top: 1.5rem;">
                        <span class="material-symbols-rounded">add</span>
                        Add New Category
                    </button>
                `;
            }
            addCategory() {
                const name = prompt('Enter category name:');
                if (name) {
                    this.showToast('Category added: ' + name, 'success');
                }
            }
            editCategory(categoryId) {
                this.showToast('Edit category: ' + categoryId, 'info');
            }
            deleteCategory(categoryId) {
                if (confirm('Delete this category?')) {
                    this.showToast('Category deleted', 'success');
                }
            }
            loadAdminOrders() {
                const orders = [
                    { id: 'order-1', user: 'John Doe', books: 2, total: '$59.98', date: '2024-01-15' },
                    { id: 'order-2', user: 'Jane Smith', books: 1, total: '$39.99', date: '2024-01-20' },
                    { id: 'order-3', user: 'Bob Johnson', books: 3, total: '$89.97', date: '2024-01-25' }
                ];
                const container = document.getElementById('ordersList');
                container.innerHTML = `
                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; overflow: hidden;">
                        ${orders.map(order => `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid var(--border-light);">
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">Order ${order.id}</div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem;">${order.user}  ${order.date}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-weight: 600; color: var(--text-primary);">${order.total}</div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem;">${order.books} books</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            loadRecentActivity() {
                const activities = [
                    { type: 'user', text: 'New user registered: alex@example.com', time: '2 minutes ago' },
                    { type: 'book', text: 'Book "Python Mastery" added to library', time: '15 minutes ago' },
                    { type: 'order', text: 'Order completed: $29.99', time: '1 hour ago' },
                    { type: 'user', text: 'User profile updated: john@example.com', time: '2 hours ago' }
                ];
                const container = document.getElementById('recentActivity');
                container.innerHTML = activities.map(activity => `
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px 0; border-bottom: 1px solid var(--border-light);">
                        <span class="material-symbols-rounded" style="color: ${
                            activity.type === 'user' ? 'var(--accent-blue)' : 
                            activity.type === 'book' ? 'var(--accent-green)' : 'var(--accent-purple)'
                        };">
                            ${activity.type === 'user' ? 'person' : activity.type === 'book' ? 'menu_book' : 'shopping_cart'}
                        </span>
                        <div style="flex: 1;">
                            <div style="color: var(--text-primary);">${activity.text}</div>
                            <div style="color: var(--text-muted); font-size: 0.85rem;">${activity.time}</div>
                        </div>
                    </div>
                `).join('');
            }
            saveAdminSettings() {
                const settings = {
                    siteName: document.getElementById('siteName').value,
                    siteDescription: document.getElementById('siteDescription').value,
                    defaultCurrency: document.getElementById('defaultCurrency').value,
                    defaultLanguage: document.getElementById('defaultLanguage').value
                };
                this.state.settings = settings;
                this.saveAdminSettings();
                this.showToast('Settings saved successfully!', 'success');
            }
            resetAdminSettings() {
                if (confirm('Reset all settings to default?')) {
                    this.state.settings = {
                        siteName: 'Better Programmer',
                        siteDescription: 'Premium Programming E-Books Library',
                        defaultCurrency: 'USD',
                        defaultLanguage: 'en'
                    };
                    document.getElementById('siteName').value = this.state.settings.siteName;
                    document.getElementById('siteDescription').value = this.state.settings.siteDescription;
                    document.getElementById('defaultCurrency').value = this.state.settings.defaultCurrency;
                    document.getElementById('defaultLanguage').value = this.state.settings.defaultLanguage;
                    this.saveAdminSettings();
                    this.showToast('Settings reset to default', 'success');
                }
            }
            importBooks() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        try {
                            const importedBooks = JSON.parse(event.target.result);
                            this.state.books.push(...importedBooks);
                            this.saveBooks();
                            this.renderBooks();
                            this.renderAdminBooks();
                            this.showToast(`${importedBooks.length} books imported successfully!`, 'success');
                        } catch (error) {
                            this.showToast('Error importing books: Invalid JSON format', 'error');
                        }
                    };
                    reader.readAsText(file);
                };
                input.click();
            }
            exportBooks() {
                const dataStr = JSON.stringify(this.state.books, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                const exportFileDefaultName = 'better-programmer-books.json';
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                this.showToast('Books exported successfully!', 'success');
            }
            navigateTo(page) {
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.page === page) {
                        link.classList.add('active');
                    }
                });
                // Hide all pages and show the selected one
                document.querySelectorAll('.page').forEach(pageElement => {
                    pageElement.classList.remove('active');
                });
                const targetPage = document.getElementById(page + 'Page');
                if (targetPage) {
                    targetPage.classList.add('active');
                    // Scroll to top of main content
                    document.getElementById('mainContent').scrollIntoView({ behavior: 'smooth' });
                }
                // Special handling for certain pages
                if (page === 'books') {
                    this.filterAndRenderBooks();
                } else if (page === 'profile') {
                    this.renderProfile();
                } else if (page === 'adminPanel') {
                    this.loadAdminData();
                } else if (page === 'bookDetail') {
                    this.renderBookDetail();
                }
            }
            renderBooks() {
                const booksGrid = document.getElementById('booksGrid');
                if (!booksGrid) return;
                const books = this.getFilteredBooks();
                if (books.length === 0) {
                    booksGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 4rem; color: var(--text-secondary);">
                            <span class="material-symbols-rounded" style="font-size: 4rem; margin-bottom: 1rem;">search_off</span>
                            <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">No books found</h3>
                            <p>Try adjusting your filters or search terms</p>
                        </div>
                    `;
                    return;
                }
                booksGrid.innerHTML = books.map(book => `
                    <div class="book-card" data-id="${book.id}">
                        <div class="book-cover">
                            <img src="${book.image}" alt="${book.title}" class="book-image" onerror="this.src='https://picsum.photos/400/600?book'">
                            <div class="book-badges">
                                ${book.price === 0 ? '<div class="badge badge-free">FREE</div>' : ''}
                                ${book.badges && book.badges.includes('new') ? '<div class="badge badge-new">NEW</div>' : ''}
                                ${book.badges && (book.badges.includes('popular') || book.badges.includes('bestseller')) ? '<div class="badge badge-popular">POPULAR</div>' : ''}
                            </div>
                        </div>
                        <div class="book-info">
                            <h3 class="book-title">${book.title}</h3>
                            <div class="book-author">
                                <span class="material-symbols-rounded" style="font-size: 1rem;">person</span>
                                ${book.author}
                            </div>
                            <p class="book-description">${book.description}</p>
                            <div class="book-meta">
                                <span class="book-category">${this.getCategoryName(book.category)}</span>
                                <div class="book-rating">
                                    <span>${book.rating ? book.rating.toFixed(1) : '4.5'}</span>
                                    <span class="material-symbols-rounded" style="color: var(--accent-orange);">star</span>
                                    <span style="color: var(--text-muted); font-size: 0.8rem;">(${book.reviews || '100'})</span>
                                </div>
                            </div>
                            <div class="book-price-section">
                                <div>
                                    <div class="book-price ${book.price === 0 ? 'book-price-free' : ''}">
                                        ${book.price === 0 ? 'FREE' : '$' + book.price.toFixed(2)}
                                    </div>
                                    ${book.originalPrice ? `
                                        <div style="color: var(--text-muted); text-decoration: line-through; font-size: 0.9rem;">$${book.originalPrice.toFixed(2)}</div>
                                    ` : ''}
                                </div>
                                <div style="color: var(--text-muted); font-size: 0.85rem;">
                                    ${book.pages || '300'} pages
                                </div>
                            </div>
                            <div class="book-actions">
                                <button class="btn btn-primary btn-small" onclick="app.buyBook('${book.id}')">
                                    <span class="material-symbols-rounded">shopping_cart</span>
                                    ${book.price === 0 ? 'Get Free' : 'Buy Now'}
                                </button>
                                <button class="btn btn-secondary btn-small" onclick="app.showBookDetails('${book.id}')">
                                    <span class="material-symbols-rounded">info</span>
                                    Details
                                </button>
                                <button class="btn btn-secondary btn-fullwidth btn-small" onclick="app.showBookPreview('${book.id}')">
                                    <span class="material-symbols-rounded">visibility</span>
                                    Preview Book
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            getFilteredBooks() {
                let filtered = [...this.state.books];
                if (this.state.filters.category !== 'all') {
                    filtered = filtered.filter(book => book.category === this.state.filters.category);
                }
                switch (this.state.filters.price) {
                    case 'free':
                        filtered = filtered.filter(book => book.price === 0);
                        break;
                    case 'paid':
                        filtered = filtered.filter(book => book.price > 0);
                        break;
                    case 'under-20':
                        filtered = filtered.filter(book => book.price < 20);
                        break;
                    case '20-50':
                        filtered = filtered.filter(book => book.price >= 20 && book.price <= 50);
                        break;
                    case 'over-50':
                        filtered = filtered.filter(book => book.price > 50);
                        break;
                }
                if (this.state.filters.difficulty !== 'all') {
                    filtered = filtered.filter(book => book.difficulty === this.state.filters.difficulty);
                }
                if (this.state.filters.search.trim()) {
                    const searchTerm = this.state.filters.search.toLowerCase();
                    filtered = filtered.filter(book =>
                        book.title.toLowerCase().includes(searchTerm) ||
                        book.author.toLowerCase().includes(searchTerm) ||
                        book.description.toLowerCase().includes(searchTerm)
                    );
                }
                filtered.sort((a, b) => {
                    switch (this.state.filters.sort) {
                        case 'newest':
                            return new Date(b.published || '2000-01-01') - new Date(a.published || '2000-01-01');
                        case 'rating':
                            return (b.rating || 0) - (a.rating || 0);
                        case 'price-low':
                            return a.price - b.price;
                        case 'price-high':
                            return b.price - a.price;
                        case 'popular':
                        default:
                            return (b.reviews || 0) - (a.reviews || 0);
                    }
                });
                return filtered;
            }
            filterAndRenderBooks() {
                this.renderBooks();
            }
            resetFilters() {
                this.state.filters = {
                    category: 'all',
                    price: 'all',
                    sort: 'popular',
                    difficulty: 'all',
                    search: ''
                };
                document.getElementById('categoryFilter').value = 'all';
                document.getElementById('priceFilter').value = 'all';
                document.getElementById('sortFilter').value = 'popular';
                document.getElementById('difficultyFilter').value = 'all';
                document.getElementById('searchInput').value = '';
                this.renderBooks();
                this.showToast('Filters reset', 'success');
            }
            setFilter(filter, value) {
                this.state.filters[filter] = value;
                this.filterAndRenderBooks();
            }
            loadMoreBooks() {
                // In a real app, this would load more books from server
                this.showToast('Loading more books...', 'info');
                setTimeout(() => {
                    this.showToast('No more books to load', 'info');
                }, 1000);
            }
            buyBook(bookId) {
                const book = this.state.books.find(b => b.id === bookId);
                if (!book) return;
                if (book.price === 0) {
                    this.addToCart(bookId);
                    this.showToast('Book added to your library for free!', 'success');
                    return;
                }
                if (!this.state.user) {
                    this.showAuthModal();
                    return;
                }
                this.state.currentBookId = bookId;
                this.showPurchaseModal(book);
            }
            showPurchaseModal(book) {
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">shopping_cart</span>
                                Complete Purchase
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="centered-form">
                                <div style="text-align: center; margin-bottom: 2rem;">
                                    <img src="${book.image}" alt="${book.title}" style="width: 150px; border-radius: 12px; box-shadow: var(--shadow-lg); margin-bottom: 1rem;" onerror="this.src='https://picsum.photos/400/600?book'">
                                    <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">${book.title}</h3>
                                    <p style="color: var(--text-secondary);">by ${book.author}</p>
                                    <div style="font-size: 2rem; color: var(--accent-blue); font-weight: 700; margin: 1rem 0;">
                                        ${book.price === 0 ? 'FREE' : '$' + book.price.toFixed(2)}
                                    </div>
                                </div>
                                <form id="purchaseForm" onsubmit="app.handlePurchase(event)">
                                    ${!this.state.user ? `
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">email</span>
                                                Email Address
                                            </label>
                                            <input type="email" class="form-input" id="purchaseEmail" required placeholder="you@example.com">
                                        </div>
                                    ` : ''}
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">badge</span>
                                            Full Name
                                        </label>
                                        <input type="text" class="form-input" id="purchaseName" required placeholder="John Doe" value="${this.state.user?.name || ''}">
                                    </div>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">phone</span>
                                                Phone Number
                                            </label>
                                            <input type="tel" class="form-input" id="purchasePhone" required placeholder="+995 123 456 789" value="${this.state.user?.phone || ''}">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">cake</span>
                                                Age
                                            </label>
                                            <input type="number" class="form-input" id="purchaseAge" required min="13" max="120" placeholder="25" value="${this.state.user?.age || ''}">
                                        </div>
                                    </div>
                                    ${book.price > 0 ? `
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">credit_card</span>
                                                Payment Method
                                            </label>
                                            <select class="form-input" id="paymentMethod" required>
                                                <option value="">Select payment method</option>
                                                <option value="card">Credit/Debit Card</option>
                                                <option value="paypal">PayPal</option>
                                                <option value="bank">Bank Transfer</option>
                                            </select>
                                        </div>
                                    ` : ''}
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-secondary" onclick="app.closeModal()">Cancel</button>
                                        <button type="submit" class="btn btn-primary">
                                            <span class="material-symbols-rounded">lock</span>
                                            Complete Purchase
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
            }
            handlePurchase(event) {
                event.preventDefault();
                const book = this.state.books.find(b => b.id === this.state.currentBookId);
                if (!book) return;
                const name = document.getElementById('purchaseName').value.trim();
                const phone = document.getElementById('purchasePhone').value.trim();
                const age = document.getElementById('purchaseAge').value.trim();
                const email = document.getElementById('purchaseEmail') ? document.getElementById('purchaseEmail').value.trim() : this.state.user.email;
                if (!name || !phone || !age || !email) {
                    this.showToast('Please fill in all required fields', 'error');
                    return;
                }
                if (age < 13 || age > 120) {
                    this.showToast('Age must be between 13 and 120', 'error');
                    return;
                }
                if (book.price > 0) {
                    const paymentMethod = document.getElementById('paymentMethod').value;
                    if (!paymentMethod) {
                        this.showToast('Please select a payment method', 'error');
                        return;
                    }
                }
                // Check if user is already registered
                if (!this.state.registeredUsers.has(email)) {
                    this.showToast('This email is not registered. Please sign up first.', 'error');
                    this.closeModal();
                    this.showSignupModal();
                    return;
                }
                // Update or create user
                if (!this.state.user) {
                    this.state.user = {
                        id: 'user-' + Date.now(),
                        email,
                        name,
                        role: 'user',
                        phone,
                        age: parseInt(age),
                        address: '',
                        purchasedBooks: []
                    };
                    this.saveUser();
                    this.updateUI();
                } else {
                    this.state.user = {
                        ...this.state.user,
                        name,
                        phone,
                        age: parseInt(age)
                    };
                    this.saveUser();
                }
                // Add book to cart/purchased
                this.addToCart(this.state.currentBookId);
                this.showToast(`Successfully purchased "${book.title}"!`, 'success');
                this.closeModal();
                setTimeout(() => {
                    this.checkout();
                }, 500);
            }
            showBookDetails(bookId) {
                this.state.currentBookId = bookId;
                this.navigateTo('bookDetail');
            }
            renderBookDetail() {
                const content = document.getElementById('bookDetailContent');
                const book = this.state.books.find(b => b.id === this.state.currentBookId);
                if (!book) {
                    content.innerHTML = '<p>Book not found</p>';
                    return;
                }
                content.innerHTML = `
                    <button class="btn btn-secondary" onclick="app.navigateTo('books')" style="margin-bottom: 2rem;">
                        <span class="material-symbols-rounded">arrow_back</span>
                        Back to Books
                    </button>
                    <div style="display: grid; grid-template-columns: 300px 1fr; gap: 2rem;">
                        <div>
                            <img src="${book.image}" alt="${book.title}" style="width: 100%; border-radius: 16px; box-shadow: var(--shadow-lg);" onerror="this.src='https://picsum.photos/400/600?book'">
                        </div>
                        <div>
                            <h2 class="section-title">${book.title}</h2>
                            <div class="book-author" style="font-size: 1.2rem; margin-bottom: 1rem; color: var(--text-secondary);">
                                <span class="material-symbols-rounded">person</span>
                                ${book.author}
                            </div>
                            <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                                <span class="book-category">${this.getCategoryName(book.category)}</span>
                                <div class="book-rating">
                                    <span>${book.rating.toFixed(1)}</span>
                                    <span class="material-symbols-rounded">star</span>
                                    <span style="color: var(--text-muted);">(${book.reviews})</span>
                                </div>
                            </div>
                            <p style="margin-bottom: 2rem; color: var(--text-secondary);">${book.longDescription || book.description}</p>
                            <div class="cta-buttons">
                                <button class="btn btn-primary" onclick="app.buyBook('${book.id}')">
                                    <span class="material-symbols-rounded">shopping_cart</span>
                                    ${book.price === 0 ? 'Get Free' : 'Buy Now'}
                                </button>
                                <button class="btn btn-secondary" onclick="app.showBookPreview('${book.id}')">
                                    <span class="material-symbols-rounded">preview</span>
                                    Preview Book
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }
            showBookPreview(bookId) {
                const book = this.state.books.find(b => b.id === bookId);
                if (!book) return;
                const content = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">preview</span>
                                Book Preview
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div style="text-align: center; margin-bottom: 2rem;">
                                <img src="${book.image}" alt="${book.title}" style="width: 200px; border-radius: 12px; box-shadow: var(--shadow-lg); margin-bottom: 1rem;" onerror="this.src='https://picsum.photos/400/600?book'">
                                <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">${book.title}</h3>
                                <p style="color: var(--text-secondary);">Preview Chapter 1</p>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-light); border-radius: 12px; padding: 2rem; max-height: 400px; overflow-y: auto;">
                                <div style="color: var(--text-secondary); line-height: 1.8; font-size: 0.95rem;">
                                    ${book.previewContent || 'No preview available for this book.'}
                                </div>
                            </div>
                            <div style="display: flex; gap: 1rem; margin-top: 2rem; justify-content: center;">
                                <button class="btn btn-primary" onclick="app.buyBook('${book.id}'); app.closeModal();">
                                    <span class="material-symbols-rounded">shopping_cart</span>
                                    ${book.price === 0 ? 'Get Full Book Free' : 'Buy Full Book'}
                                </button>
                                <button class="btn btn-secondary" onclick="app.closeModal();">
                                    <span class="material-symbols-rounded">close</span>
                                    Close Preview
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(content);
            }
            addToCart(bookId) {
                const book = this.state.books.find(b => b.id === bookId);
                if (!book) return;
                const existingItem = this.state.cart.find(item => item.id === bookId);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    this.state.cart.push({
                        id: bookId,
                        title: book.title,
                        price: book.price,
                        image: book.image,
                        quantity: 1
                    });
                }
                this.saveCart();
                this.updateCartCount();
                this.showToast(`Added "${book.title}" to cart`, 'success');
            }
            removeFromCart(bookId) {
                const index = this.state.cart.findIndex(item => item.id === bookId);
                if (index !== -1) {
                    this.state.cart.splice(index, 1);
                    this.saveCart();
                    this.updateCartCount();
                    this.renderCart();
                    this.showToast('Item removed from cart', 'success');
                }
            }
            showCart() {
                this.renderCart();
            }
            renderCart() {
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">shopping_cart</span>
                                Your Cart
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            ${this.state.cart.length === 0 ? `
                                <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                                    <span class="material-symbols-rounded" style="font-size: 4rem; margin-bottom: 1rem;">shopping_cart</span>
                                    <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Your cart is empty</h3>
                                    <p>Add some books to get started!</p>
                                    <button class="btn btn-primary" onclick="app.navigateTo('books'); app.closeModal();" style="margin-top: 1rem;">
                                        <span class="material-symbols-rounded">explore</span>
                                        Browse Books
                                    </button>
                                </div>
                            ` : `
                                <div>
                                    ${this.state.cart.map(item => {
                                        const book = this.state.books.find(b => b.id === item.id);
                                        return `
                                            <div class="book-list-item">
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <img src="${item.image}" style="width: 60px; height: 80px; border-radius: 8px; object-fit: cover;" onerror="this.src='https://picsum.photos/400/600?book'">
                                                    <div>
                                                        <div style="font-weight: 600; color: var(--text-primary);">${item.title}</div>
                                                        <div style="color: var(--text-secondary); font-size: 0.9rem;">${item.price === 0 ? 'FREE' : '$' + item.price.toFixed(2)}</div>
                                                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.25rem;">
                                                            <button class="btn btn-secondary" onclick="app.removeFromCart('${item.id}')" style="padding: 4px 8px; font-size: 0.8rem;">
                                                                <span class="material-symbols-rounded">delete</span>
                                                                Remove
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style="color: var(--text-primary); font-weight: 600;">
                                                    ${item.price === 0 ? 'FREE' : '$' + (item.price * item.quantity).toFixed(2)}
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                                <div style="border-top: 1px solid var(--border-light); padding-top: 1.5rem; margin-top: 1.5rem; text-align: right;">
                                    <div style="display: flex; justify-content: space-between; font-size: 1.25rem;">
                                        <div style="color: var(--text-primary); font-weight: 600;">Total</div>
                                        <div style="color: var(--accent-blue); font-weight: 700;">$${this.state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0).toFixed(2)}</div>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 1rem; margin-top: 2rem; justify-content: flex-end;">
                                    <button class="btn btn-secondary" onclick="app.closeModal()">Continue Browsing</button>
                                    <button class="btn btn-primary" onclick="app.checkout()">Checkout</button>
                                </div>
                            `}
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
            }
            checkout() {
                if (this.state.cart.length === 0) {
                    this.showToast('Your cart is empty', 'warning');
                    return;
                }
                if (!this.state.user) {
                    this.showToast('Please sign in to checkout', 'warning');
                    this.showAuthModal();
                    return;
                }
                const total = this.state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                if (total > 0) {
                    this.showPurchaseModalForCart();
                } else {
                    this.completePurchase();
                }
            }
            showPurchaseModalForCart() {
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">shopping_cart</span>
                                Complete Purchase
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="centered-form">
                                <h3 style="text-align: center; margin-bottom: 1.5rem; color: var(--text-primary);">Order Summary</h3>
                                <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                                    ${this.state.cart.map(item => `
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                            <div style="color: var(--text-secondary);">${item.title}</div>
                                            <div style="color: var(--text-primary); font-weight: 500;">${item.price === 0 ? 'FREE' : '$' + (item.price * item.quantity).toFixed(2)}</div>
                                        </div>
                                    `).join('')}
                                    <div style="border-top: 1px solid var(--border-light); margin-top: 1rem; padding-top: 1rem;">
                                        <div style="display: flex; justify-content: space-between; font-size: 1.25rem;">
                                            <div style="color: var(--text-primary); font-weight: 600;">Total</div>
                                            <div style="color: var(--accent-blue); font-weight: 700;">$${this.state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0).toFixed(2)}</div>
                                        </div>
                                    </div>
                                </div>
                                <form id="cartPurchaseForm" onsubmit="app.handleCartPurchase(event)">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">credit_card</span>
                                            Payment Method
                                        </label>
                                        <select class="form-input" id="cartPaymentMethod" required>
                                            <option value="">Select payment method</option>
                                            <option value="card">Credit/Debit Card</option>
                                            <option value="paypal">PayPal</option>
                                            <option value="bank">Bank Transfer</option>
                                        </select>
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-secondary" onclick="app.closeModal()">Cancel</button>
                                        <button type="submit" class="btn btn-primary">
                                            <span class="material-symbols-rounded">lock</span>
                                            Complete Purchase
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
            }
            handleCartPurchase(event) {
                event.preventDefault();
                const paymentMethod = document.getElementById('cartPaymentMethod').value;
                if (!paymentMethod) {
                    this.showToast('Please select a payment method', 'error');
                    return;
                }
                this.completePurchase();
            }
            completePurchase() {
                this.state.cart = [];
                this.saveCart();
                this.updateCartCount();
                this.closeModal();
                this.showToast('Purchase completed successfully!', 'success');
                this.navigateTo('profile');
            }
            updateCartCount() {
                const cartCount = document.getElementById('cartCount');
                if (!cartCount) return;
                const count = this.state.cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCount.textContent = count;
            }
            showAuthModal() {
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">login</span>
                                Welcome Back
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="centered-form">
                                <form id="authForm" onsubmit="app.handleLogin(event)">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">email</span>
                                            Username/Email
                                        </label>
                                        <input type="text" class="form-input" id="authEmail" required placeholder="better or you@example.com">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">key</span>
                                            Password
                                        </label>
                                        <input type="password" class="form-input" id="authPassword" required placeholder="">
                                    </div>
                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <span class="material-symbols-rounded">login</span>
                                            Sign In
                                        </button>
                                        <button type="button" class="btn btn-secondary" onclick="app.showSignupModal()">
                                            Create Account
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
            }
            showSignupModal() {
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">person_add</span>
                                Create Account
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="centered-form">
                                <form id="signupForm" onsubmit="app.handleSignup(event)">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">person</span>
                                            Full Name
                                        </label>
                                        <input type="text" class="form-input" id="signupName" required placeholder="John Doe">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">email</span>
                                            Email Address
                                        </label>
                                        <input type="email" class="form-input" id="signupEmail" required placeholder="you@example.com">
                                        <small style="color: var(--text-muted); display: block; margin-top: 0.25rem;">Important: Use your real email for registration</small>
                                    </div>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">phone</span>
                                                Phone Number
                                            </label>
                                            <input type="tel" class="form-input" id="signupPhone" required placeholder="+995 123 456 789">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">cake</span>
                                                Age
                                            </label>
                                            <input type="number" class="form-input" id="signupAge" required min="13" max="120" placeholder="25">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">key</span>
                                            Password
                                        </label>
                                        <input type="password" class="form-input" id="signupPassword" required placeholder="">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">key</span>
                                            Confirm Password
                                        </label>
                                        <input type="password" class="form-input" id="signupConfirmPassword" required placeholder="">
                                    </div>
                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <span class="material-symbols-rounded">person_add</span>
                                            Create Account
                                        </button>
                                        <button type="button" class="btn btn-secondary" onclick="app.showAuthModal()">
                                            Already have account?
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
            }
            handleLogin(event) {
                event.preventDefault();
                const email = document.getElementById('authEmail').value.trim();
                const password = document.getElementById('authPassword').value.trim();
                if (!email || !password) {
                    this.showToast('Please fill in all fields', 'error');
                    return;
                }
                // Special admin login
                if (email === 'better' && password === 'tweekex15') {
                    this.state.user = {
                        id: 'admin-' + Date.now(),
                        email: 'better',
                        name: 'Admin',
                        role: 'admin',
                        phone: '+995 123 456 789',
                        age: 30,
                        address: 'Admin Headquarters',
                        purchasedBooks: []
                    };
                } else {
                    // Check if user is registered
                    if (!this.state.registeredUsers.has(email)) {
                        this.showToast('This email is not registered. Please sign up first.', 'error');
                        return;
                    }
                    this.state.user = {
                        id: 'user-' + Date.now(),
                        email,
                        name: email.split('@')[0],
                        role: 'user',
                        phone: '+995 123 456 789',
                        age: 25,
                        address: '',
                        purchasedBooks: []
                    };
                }
                this.saveUser();
                this.closeModal();
                this.updateUI();
                this.showToast('Welcome back!', 'success');
            }
            handleSignup(event) {
                event.preventDefault();
                const name = document.getElementById('signupName').value.trim();
                const email = document.getElementById('signupEmail').value.trim();
                const phone = document.getElementById('signupPhone').value.trim();
                const age = document.getElementById('signupAge').value.trim();
                const password = document.getElementById('signupPassword').value.trim();
                const confirmPassword = document.getElementById('signupConfirmPassword').value.trim();
                if (!name || !email || !phone || !age || !password || !confirmPassword) {
                    this.showToast('Please fill in all fields', 'error');
                    return;
                }
                if (password !== confirmPassword) {
                    this.showToast('Passwords do not match', 'error');
                    return;
                }
                if (age < 13 || age > 120) {
                    this.showToast('Age must be between 13 and 120', 'error');
                    return;
                }
                // Check if email already registered
                if (this.state.registeredUsers.has(email)) {
                    this.showToast('This email is already registered. Please sign in instead.', 'error');
                    return;
                }
                // Add to registered users
                this.state.registeredUsers.add(email);
                this.saveRegisteredUsers();
                // Create user
                this.state.user = {
                    id: 'user-' + Date.now(),
                    email,
                    name,
                    role: 'user',
                    phone,
                    age: parseInt(age),
                    address: '',
                    purchasedBooks: []
                };
                this.saveUser();
                this.closeModal();
                this.updateUI();
                this.showToast('Account created successfully!', 'success');
            }
            logout() {
                this.state.user = null;
                localStorage.removeItem('bp_user');
                this.updateUI();
                this.showToast('Logged out successfully', 'success');
                this.navigateTo('home');
            }
            updateUI() {
                this.updateAuthButton();
                this.updateAdminNav();
                this.renderProfile();
            }
            updateAuthButton() {
                const authBtn = document.getElementById('authBtn');
                if (!authBtn) return;
                if (this.state.user) {
                    authBtn.textContent = 'Sign Out';
                } else {
                    authBtn.textContent = 'Sign In';
                }
            }
            updateAdminNav() {
                const adminNavLink = document.getElementById('adminNavLink');
                if (!adminNavLink) return;
                if (this.state.user && this.state.user.role === 'admin') {
                    adminNavLink.style.display = 'flex';
                } else {
                    adminNavLink.style.display = 'none';
                }
            }
            renderCategories() {
                const categoriesGrid = document.getElementById('categoriesGrid');
                if (!categoriesGrid) return;
                const categories = [
                    { id: 'web', name: 'Web Development', icon: 'code', count: 120, description: 'Frontend, backend, full-stack development' },
                    { id: 'mobile', name: 'Mobile Development', icon: 'smartphone', count: 85, description: 'iOS, Android, React Native, Flutter' },
                    { id: 'data', name: 'Data Science', icon: 'analytics', count: 90, description: 'Python, R, SQL, machine learning basics' },
                    { id: 'ai', name: 'AI & Machine Learning', icon: 'psychology', count: 65, description: 'Deep learning, neural networks, AI models' },
                    { id: 'devops', name: 'DevOps', icon: 'deployed_code', count: 70, description: 'Docker, Kubernetes, CI/CD, cloud' },
                    { id: 'algorithms', name: 'Algorithms', icon: 'terminal', count: 95, description: 'Data structures, algorithms, competitive programming' }
                ];
                categoriesGrid.innerHTML = categories.map(cat => `
                    <div class="category-card" onclick="app.navigateTo('books'); app.setFilter('category', '${cat.id}')">
                        <div class="category-icon">
                            <span class="material-symbols-rounded">${cat.icon}</span>
                        </div>
                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">${cat.name}</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">${cat.description}</p>
                        <div style="color: var(--accent-blue); font-weight: 600;">
                            ${cat.count} Books
                        </div>
                    </div>
                `).join('');
            }
            renderFAQ() {
                const faqContainer = document.getElementById('faqContainer');
                if (!faqContainer) return;
                const faqs = [
                    {
                        question: 'How do I purchase a book?',
                        answer: 'Browse our collection, click "Buy Now" on any book, and complete the checkout process. For free books, click "Get Free" to add them to your library instantly.'
                    },
                    {
                        question: 'Can I read books on multiple devices?',
                        answer: 'Yes! Once purchased, you can access your books from any device with an internet connection. Your reading progress syncs automatically.'
                    },
                    {
                        question: 'What payment methods are accepted?',
                        answer: 'We accept all major credit cards (Visa, MasterCard, American Express), PayPal, and bank transfers in select regions.'
                    }
                ];
                faqContainer.innerHTML = faqs.map((faq, index) => `
                    <div class="faq-item" id="faq-${index}">
                        <div class="faq-question" onclick="app.toggleFAQ(${index})">
                            <span>${faq.question}</span>
                            <span class="material-symbols-rounded">expand_more</span>
                        </div>
                        <div class="faq-answer">
                            ${faq.answer}
                        </div>
                    </div>
                `).join('');
            }
            toggleFAQ(index) {
                const faqItem = document.getElementById(`faq-${index}`);
                if (!faqItem) return;
                const isActive = faqItem.classList.contains('active');
                document.querySelectorAll('.faq-item').forEach(item => {
                    item.classList.remove('active');
                });
                if (!isActive) {
                    faqItem.classList.add('active');
                }
            }
            renderProfile() {
                const profileInfo = document.getElementById('profileInfo');
                if (!profileInfo) return;
                if (!this.state.user) {
                    profileInfo.innerHTML = `
                        <div style="text-align: center; padding: 2rem;">
                            <span class="material-symbols-rounded" style="font-size: 4rem; color: var(--text-secondary); margin-bottom: 1rem;">person_off</span>
                            <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Not Signed In</h3>
                            <p style="color: var(--text-secondary);">Sign in to view your profile and access purchased books.</p>
                            <button class="btn btn-primary" onclick="app.showAuthModal()" style="margin-top: 1rem;">
                                <span class="material-symbols-rounded">login</span>
                                Sign In
                            </button>
                        </div>
                    `;
                    return;
                }
                profileInfo.innerHTML = `
                    <div class="info-row">
                        <span>Name</span>
                        <span style="color: var(--text-primary); font-weight: 500;">${this.state.user.name}</span>
                    </div>
                    <div class="info-row">
                        <span>Email</span>
                        <span style="color: var(--text-primary); font-weight: 500;">${this.state.user.email}</span>
                    </div>
                    <div class="info-row">
                        <span>Account Type</span>
                        <span style="color: var(--text-primary); font-weight: 500; text-transform: capitalize;">${this.state.user.role}</span>
                    </div>
                    <div class="info-row">
                        <span>Purchased Books</span>
                        <span style="color: var(--accent-blue); font-weight: 600;">${this.state.user.purchasedBooks?.length || 0}</span>
                    </div>
                `;
            }
            showEditProfileModal() {
                if (!this.state.user) return;
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">edit</span>
                                Edit Profile
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="centered-form">
                                <form id="editProfileForm" onsubmit="app.handleEditProfile(event)">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">person</span>
                                            Full Name
                                        </label>
                                        <input type="text" class="form-input" id="editName" required value="${this.state.user.name}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">phone</span>
                                            Phone Number
                                        </label>
                                        <input type="tel" class="form-input" id="editPhone" required value="${this.state.user.phone}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">cake</span>
                                            Age
                                        </label>
                                        <input type="number" class="form-input" id="editAge" required min="13" max="120" value="${this.state.user.age}">
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-secondary" onclick="app.closeModal()">Cancel</button>
                                        <button type="submit" class="btn btn-primary">
                                            <span class="material-symbols-rounded">save</span>
                                            Save Changes
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
            }
            handleEditProfile(event) {
                event.preventDefault();
                const name = document.getElementById('editName').value.trim();
                const phone = document.getElementById('editPhone').value.trim();
                const age = document.getElementById('editAge').value.trim();
                if (!name || !phone || !age) {
                    this.showToast('Please fill in all required fields', 'error');
                    return;
                }
                if (age < 13 || age > 120) {
                    this.showToast('Age must be between 13 and 120', 'error');
                    return;
                }
                this.state.user = {
                    ...this.state.user,
                    name,
                    phone,
                    age: parseInt(age)
                };
                this.saveUser();
                this.renderProfile();
                this.closeModal();
                this.showToast('Profile updated successfully', 'success');
            }
            renderAdminBooks() {
                const adminBooksList = document.getElementById('adminBooksList');
                if (!adminBooksList) return;
                adminBooksList.innerHTML = this.state.books.map(book => `
                    <div class="book-list-item">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <img src="${book.image}" style="width: 60px; height: 80px; border-radius: 8px; object-fit: cover;" onerror="this.src='https://picsum.photos/400/600?book'">
                            <div>
                                <div style="font-weight: 600; color: var(--text-primary);">${book.title}</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">by ${book.author}</div>
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.25rem;">
                                    <span class="badge ${book.price === 0 ? 'badge-free' : 'badge-popular'}" style="padding: 2px 8px; font-size: 0.7rem;">
                                        ${book.price === 0 ? 'FREE' : '$' + book.price}
                                    </span>
                                    <span style="color: var(--text-muted); font-size: 0.8rem;"></span>
                                    <span style="color: var(--text-muted); font-size: 0.8rem;">${this.getCategoryName(book.category)}</span>
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-secondary" onclick="app.editBook('${book.id}')" style="padding: 6px 12px; font-size: 0.8rem;">
                                <span class="material-symbols-rounded" style="font-size: 1rem;">edit</span>
                            </button>
                            <button class="btn btn-secondary" onclick="app.deleteBook('${book.id}')" style="padding: 6px 12px; font-size: 0.8rem; color: #ef4444;">
                                <span class="material-symbols-rounded" style="font-size: 1rem;">delete</span>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
            showAddBookModal() {
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">menu_book</span>
                                Add New Book
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="centered-form">
                                <form id="addBookForm" onsubmit="app.handleAddBook(event)">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">title</span>
                                            Book Title
                                        </label>
                                        <input type="text" class="form-input" id="bookTitle" required placeholder="Clean Code: A Handbook of Agile Software Craftsmanship">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">person</span>
                                            Author
                                        </label>
                                        <input type="text" class="form-input" id="bookAuthor" required placeholder="Robert C. Martin">
                                    </div>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">attach_money</span>
                                                Price
                                            </label>
                                            <input type="number" class="form-input" id="bookPrice" required min="0" step="0.01" placeholder="29.99">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">category</span>
                                                Category
                                            </label>
                                            <select class="form-input" id="bookCategory" required>
                                                <option value="web">Web Development</option>
                                                <option value="mobile">Mobile Development</option>
                                                <option value="data">Data Science</option>
                                                <option value="ai">AI & Machine Learning</option>
                                                <option value="devops">DevOps</option>
                                                <option value="algorithms">Algorithms</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">school</span>
                                                Difficulty
                                            </label>
                                            <select class="form-input" id="bookDifficulty" required>
                                                <option value="beginner">Beginner</option>
                                                <option value="intermediate">Intermediate</option>
                                                <option value="advanced">Advanced</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">description</span>
                                                Description
                                            </label>
                                            <textarea class="form-input" id="bookDescription" rows="2" required placeholder="Learn how to write clean, maintainable code..."></textarea>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">image</span>
                                            Cover Image URL
                                        </label>
                                        <input type="url" class="form-input" id="bookImage" required placeholder="https://picsum.photos/400/600?random=1">
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-secondary" onclick="app.closeModal()">Cancel</button>
                                        <button type="submit" class="btn btn-primary">
                                            <span class="material-symbols-rounded">add</span>
                                            Add Book
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
            }
            handleAddBook(event) {
                event.preventDefault();
                const title = document.getElementById('bookTitle').value.trim();
                const author = document.getElementById('bookAuthor').value.trim();
                const price = parseFloat(document.getElementById('bookPrice').value);
                const category = document.getElementById('bookCategory').value;
                const difficulty = document.getElementById('bookDifficulty').value;
                const description = document.getElementById('bookDescription').value.trim();
                const image = document.getElementById('bookImage').value.trim();
                if (!title || !author || isNaN(price) || !category || !difficulty || !description || !image) {
                    this.showToast('Please fill in all fields', 'error');
                    return;
                }
                const newBook = {
                    id: 'book-' + Date.now(),
                    title,
                    author,
                    price,
                    category,
                    difficulty,
                    description,
                    longDescription: description,
                    image,
                    rating: 4.5,
                    reviews: Math.floor(Math.random() * 500) + 100,
                    pages: Math.floor(Math.random() * 400) + 200,
                    language: 'English',
                    published: new Date().toISOString().split('T')[0],
                    publisher: 'Better Programmer Press',
                    topics: [category.charAt(0).toUpperCase() + category.slice(1)],
                    previewContent: `Preview of ${title} by ${author}. This book covers ${description.toLowerCase()}...`,
                    badges: price === 0 ? ['free', 'new'] : (Math.random() > 0.7 ? ['popular'] : [])
                };
                this.state.books.push(newBook);
                this.saveBooks();
                this.renderBooks();
                this.renderAdminBooks();
                this.closeModal();
                this.showToast('Book added successfully', 'success');
                document.getElementById('addBookForm').reset();
            }
            editBook(bookId) {
                const book = this.state.books.find(b => b.id === bookId);
                if (!book) return;
                const modalContent = `
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">
                                <span class="material-symbols-rounded">menu_book</span>
                                Edit Book
                            </h2>
                            <div class="modal-close" onclick="app.closeModal()">
                                <span class="material-symbols-rounded">close</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="centered-form">
                                <form id="editBookForm" onsubmit="app.handleEditBook('${bookId}', event)">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">title</span>
                                            Book Title
                                        </label>
                                        <input type="text" class="form-input" id="editBookTitle" required value="${book.title}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">person</span>
                                            Author
                                        </label>
                                        <input type="text" class="form-input" id="editBookAuthor" required value="${book.author}">
                                    </div>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">attach_money</span>
                                                Price
                                            </label>
                                            <input type="number" class="form-input" id="editBookPrice" required min="0" step="0.01" value="${book.price}">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">category</span>
                                                Category
                                            </label>
                                            <select class="form-input" id="editBookCategory" required>
                                                <option value="web" ${book.category === 'web' ? 'selected' : ''}>Web Development</option>
                                                <option value="mobile" ${book.category === 'mobile' ? 'selected' : ''}>Mobile Development</option>
                                                <option value="data" ${book.category === 'data' ? 'selected' : ''}>Data Science</option>
                                                <option value="ai" ${book.category === 'ai' ? 'selected' : ''}>AI & Machine Learning</option>
                                                <option value="devops" ${book.category === 'devops' ? 'selected' : ''}>DevOps</option>
                                                <option value="algorithms" ${book.category === 'algorithms' ? 'selected' : ''}>Algorithms</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">school</span>
                                                Difficulty
                                            </label>
                                            <select class="form-input" id="editBookDifficulty" required>
                                                <option value="beginner" ${book.difficulty === 'beginner' ? 'selected' : ''}>Beginner</option>
                                                <option value="intermediate" ${book.difficulty === 'intermediate' ? 'selected' : ''}>Intermediate</option>
                                                <option value="advanced" ${book.difficulty === 'advanced' ? 'selected' : ''}>Advanced</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">
                                                <span class="material-symbols-rounded">description</span>
                                                Description
                                            </label>
                                            <textarea class="form-input" id="editBookDescription" rows="2" required>${book.description}</textarea>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="material-symbols-rounded">image</span>
                                            Cover Image URL
                                        </label>
                                        <input type="url" class="form-input" id="editBookImage" required value="${book.image}">
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-secondary" onclick="app.closeModal()">Cancel</button>
                                        <button type="submit" class="btn btn-primary">
                                            <span class="material-symbols-rounded">save</span>
                                            Update Book
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;
                this.openModal(modalContent);
            }
            handleEditBook(bookId, event) {
                event.preventDefault();
                const title = document.getElementById('editBookTitle').value.trim();
                const author = document.getElementById('editBookAuthor').value.trim();
                const price = parseFloat(document.getElementById('editBookPrice').value);
                const category = document.getElementById('editBookCategory').value;
                const difficulty = document.getElementById('editBookDifficulty').value;
                const description = document.getElementById('editBookDescription').value.trim();
                const image = document.getElementById('editBookImage').value.trim();
                const bookIndex = this.state.books.findIndex(b => b.id === bookId);
                if (bookIndex !== -1) {
                    this.state.books[bookIndex] = {
                        ...this.state.books[bookIndex],
                        title,
                        author,
                        price,
                        category,
                        difficulty,
                        description,
                        image
                    };
                    this.saveBooks();
                    this.renderBooks();
                    this.renderAdminBooks();
                    this.closeModal();
                    this.showToast('Book updated successfully', 'success');
                }
            }
            deleteBook(bookId) {
                if (confirm('Are you sure you want to delete this book?')) {
                    const bookIndex = this.state.books.findIndex(b => b.id === bookId);
                    if (bookIndex !== -1) {
                        const bookTitle = this.state.books[bookIndex].title;
                        this.state.books.splice(bookIndex, 1);
                        this.saveBooks();
                        this.renderBooks();
                        this.renderAdminBooks();
                        this.showToast(`"${bookTitle}" deleted successfully`, 'success');
                    }
                }
            }
            openModal(content) {
                const modalOverlay = document.getElementById('modalOverlay');
                if (modalOverlay) {
                    modalOverlay.innerHTML = content;
                    modalOverlay.classList.add('active');
                    setTimeout(() => {
                        modalOverlay.style.opacity = '1';
                    }, 10);
                }
            }
            closeModal() {
                const modalOverlay = document.getElementById('modalOverlay');
                if (modalOverlay) {
                    modalOverlay.classList.remove('active');
                    setTimeout(() => {
                        modalOverlay.style.opacity = '0';
                        modalOverlay.innerHTML = '';
                    }, 300);
                }
            }
            showToast(message, type = 'info') {
                const toastContainer = document.getElementById('toastContainer');
                if (!toastContainer) return;
                const toastId = 'toast-' + Date.now();
                const icon = type === 'success' ? 'check_circle' : type === 'error' ? 'error' : 'info';
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.id = toastId;
                toast.innerHTML = `
                    <span class="material-symbols-rounded">${icon}</span>
                    <span>${message}</span>
                `;
                toastContainer.appendChild(toast);
                setTimeout(() => {
                    toast.classList.add('show');
                }, 10);
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 300);
                }, 3000);
            }
            getCategoryName(category) {
                const categories = {
                    web: 'Web Development',
                    mobile: 'Mobile Development',
                    data: 'Data Science',
                    ai: 'AI & Machine Learning',
                    devops: 'DevOps',
                    algorithms: 'Algorithms'
                };
                return categories[category] || category;
            }
            saveUser() {
                localStorage.setItem('bp_user', JSON.stringify(this.state.user));
            }
            saveCart() {
                localStorage.setItem('bp_cart', JSON.stringify(this.state.cart));
            }
            saveRegisteredUsers() {
                localStorage.setItem('bp_registered_users', JSON.stringify([...this.state.registeredUsers]));
            }
            saveBooks() {
                localStorage.setItem('bp_books', JSON.stringify(this.state.books));
            }
            saveAdminSettings() {
                localStorage.setItem('bp_admin_settings', JSON.stringify(this.state.settings));
            }
        }
        const app = new BetterProgrammerApp();
    </script>
</body>
</html>
