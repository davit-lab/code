<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Better Programmer - Premium Programming E-Books Library</title>
  <!-- Icons & Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #000000;
      --bg-secondary: #000814;
      --bg-gradient: linear-gradient(135deg, #000000 0%, #000814 50%, #001233 100%);
      --text-primary: #e0f7ff;
      --text-secondary: #88d3fa;
      --accent: #00b4ff;
      --accent-glow: rgba(0, 180, 255, 0.7);
      --accent-secondary: #0066ff;
      --border: #003566;
      --success: #00ff88;
      --warning: #ffcc00;
      --error: #ff4444;
      --glow-blue: #00b4ff;
      --neon-blue: #00d4ff;
      --admin-purple: #9d00ff;
      --admin-glow: rgba(157, 0, 255, 0.7);
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: var(--bg-gradient);
      color: var(--text-primary);
      font-family: 'Roboto', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
    }
    html {
      scroll-behavior: smooth;
    }
    .parallax-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(circle at 20% 50%, rgba(0, 180, 255, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(0, 102, 255, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%);
      z-index: -1;
    }
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(15px);
      border-bottom: 2px solid var(--border);
      animation: slideDown 0.5s ease-out;
      box-shadow: 0 5px 30px rgba(0, 180, 255, 0.2);
    }
    @keyframes slideDown {
      from { transform: translateY(-100%); }
      to { transform: translateY(0); }
    }
    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    .hamburger-btn,
    .close-btn {
      display: none;
      font-size: 2rem;
      color: var(--accent);
      cursor: pointer;
      transition: transform 0.3s;
      text-shadow: 0 0 10px var(--accent-glow);
    }
    .hamburger-btn:hover,
    .close-btn:hover {
      transform: scale(1.1);
      text-shadow: 0 0 20px var(--accent-glow);
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      animation: glowPulse 2s infinite alternate;
      cursor: pointer;
    }
    @keyframes glowPulse {
      0% { filter: drop-shadow(0 0 5px var(--accent-glow)); transform: scale(1); }
      100% { filter: drop-shadow(0 0 25px var(--accent-glow)); transform: scale(1.02); }
    }
    .logo .material-symbols-rounded {
      font-size: 3rem;
      color: var(--neon-blue);
      text-shadow: 0 0 20px var(--accent-glow);
    }
    .logo h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      letter-spacing: 2px;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 20px rgba(0, 180, 255, 0.5);
    }
    .search-container {
      flex: 1;
      max-width: 500px;
      margin: 0 40px;
    }
    .search-box {
      position: relative;
    }
    .search-box input {
      width: 100%;
      padding: 16px 60px 16px 24px;
      background: rgba(0, 53, 102, 0.3);
      border: 2px solid transparent;
      border-radius: 50px;
      color: var(--text-primary);
      font-size: 1rem;
      transition: all 0.3s;
      backdrop-filter: blur(10px);
    }
    .search-box input:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 30px var(--accent-glow);
      background: rgba(0, 53, 102, 0.5);
    }
    .search-icon {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--neon-blue);
      font-size: 1.8rem;
      cursor: pointer;
      text-shadow: 0 0 10px var(--accent-glow);
    }
    .links {
      display: flex;
      gap: 30px;
      list-style: none;
    }
    .links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s;
      position: relative;
      padding: 8px 4px;
      text-shadow: 0 0 10px rgba(0, 180, 255, 0.3);
      cursor: pointer;
    }
    .links a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--neon-blue);
      transition: width 0.3s;
      box-shadow: 0 0 10px var(--accent-glow);
    }
    .links a:hover,
    .links a.active {
      color: var(--neon-blue);
      text-shadow: 0 0 15px var(--accent-glow);
    }
    .links a:hover::after,
    .links a.active::after {
      width: 100%;
    }
    .header-actions {
      display: flex;
      align-items: center;
      gap: 20px;
    }
    .login-btn {
      background: transparent;
      border: 2px solid var(--neon-blue);
      color: var(--neon-blue);
      padding: 12px 28px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.4s;
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 10px var(--accent-glow);
      box-shadow: 0 0 15px rgba(0, 180, 255, 0.3);
    }
    .login-btn:hover {
      background: var(--neon-blue);
      color: #000;
      box-shadow: 0 0 40px var(--accent-glow);
      transform: translateY(-2px);
    }
    .admin-btn {
      background: transparent;
      border: 2px solid var(--admin-purple);
      color: var(--admin-purple);
      padding: 12px 28px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.4s;
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 10px var(--admin-glow);
      box-shadow: 0 0 15px rgba(157, 0, 255, 0.3);
    }
    .admin-btn:hover {
      background: var(--admin-purple);
      color: #000;
      box-shadow: 0 0 40px var(--admin-glow);
      transform: translateY(-2px);
    }
    .cart-btn {
      position: relative;
      background: transparent;
      border: none;
      color: var(--neon-blue);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 8px;
      text-shadow: 0 0 10px var(--accent-glow);
    }
    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--error);
      color: white;
      font-size: 0.8rem;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(255, 68, 68, 0.8);
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 16px 24px;
      background: var(--bg-secondary);
      border-left: 4px solid var(--neon-blue);
      border-radius: 8px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 180, 255, 0.3);
      transform: translateX(150%);
      transition: transform 0.3s;
      z-index: 2000;
    }
    .toast.show {
      transform: translateX(0);
    }
    .toast.success { border-left-color: var(--success); }
    .toast.error { border-left-color: var(--error); }
    .toast.admin { border-left-color: var(--admin-purple); }

    /* Popup */
    .blur-bg-overlay {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(15px);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s;
      z-index: 10;
    }
    .show-popup .blur-bg-overlay {
      opacity: 1;
      pointer-events: auto;
    }
    .form-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      width: 90%;
      max-width: 500px;
      background: var(--bg-secondary);
      border: 2px solid var(--neon-blue);
      border-radius: 20px;
      opacity: 0;
      pointer-events: none;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index: 20;
      box-shadow: 0 0 60px var(--accent-glow);
      overflow: hidden;
      padding: 40px;
    }
    .show-popup .form-popup {
      opacity: 1;
      pointer-events: auto;
      transform: translate(-50%, -50%) scale(1);
    }
    .form-popup .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 2rem;
      color: var(--neon-blue);
      cursor: pointer;
      text-shadow: 0 0 15px var(--accent-glow);
    }
    .form-popup h2 {
      text-align: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 2.5rem;
      margin-bottom: 30px;
      background: linear-gradient(90deg, var(--neon-blue), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    /* Input fields, buttons, etc. (unchanged for brevity - keep your original styles) */
    /* ... (keep all your original popup and form styles) ... */

    /* REDESIGNED BOOK CARD */
    .book-card {
      background: rgba(0, 8, 20, 0.6);
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 30px rgba(0, 180, 255, 0.1);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid var(--border);
      position: relative;
      backdrop-filter: blur(10px);
    }
    .book-card:hover {
      transform: translateY(-20px) scale(1.03);
      border-color: var(--neon-blue);
      box-shadow: 0 40px 100px rgba(0, 180, 255, 0.4), 0 0 80px var(--accent-glow);
    }
    .book-cover-img {
      width: 100%;
      height: 420px;
      object-fit: contain;
      background: linear-gradient(135deg, #000, #001122);
      padding: 30px;
      transition: transform 0.6s;
    }
    .book-card:hover .book-cover-img {
      transform: scale(1.08);
    }
    .book-info {
      padding: 32px;
      text-align: left;
    }
    .book-info h3 {
      font-size: 1.8rem;
      margin-bottom: 12px;
      color: var(--neon-blue);
      text-shadow: 0 0 15px var(--accent-glow);
    }
    .book-author {
      color: var(--text-secondary);
      font-size: 1.1rem;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .book-category-badge {
      display: inline-block;
      background: rgba(0, 180, 255, 0.2);
      color: var(--neon-blue);
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      margin-bottom: 16px;
      border: 1px solid var(--neon-blue);
    }
    .book-rating {
      color: #ffd700;
      margin-bottom: 16px;
      font-size: 1.2rem;
    }
    .book-price {
      font-size: 2rem;
      font-weight: 700;
      color: var(--neon-blue);
      margin: 20px 0;
      text-shadow: 0 0 20px var(--accent-glow);
    }
    .book-actions {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    .buy-btn, .read-btn, .details-btn {
      flex: 1;
      min-width: 140px;
      padding: 16px;
      border-radius: 50px;
      font-weight: 700;
      cursor: pointer;
      border: none;
      transition: all 0.4s;
      font-family: 'Orbitron', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 1rem;
    }
    .buy-btn {
      background: linear-gradient(135deg, var(--neon-blue), var(--accent-secondary));
      color: #000;
      box-shadow: 0 0 30px var(--accent-glow);
    }
    .read-btn {
      background: linear-gradient(135deg, var(--success), #00cc88);
      color: #000;
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
    }
    .details-btn {
      background: transparent;
      border: 2px solid var(--neon-blue);
      color: var(--neon-blue);
    }
    .buy-btn:hover, .read-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 50px var(--accent-glow);
    }
    .details-btn:hover {
      background: var(--neon-blue);
      color: #000;
    }
    .free-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      background: var(--success);
      color: #000;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 700;
      z-index: 2;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
    }

    /* BOOK DETAIL PAGE */
    .book-detail-grid {
      display: grid;
      grid-template-columns: 1fr 1.5fr;
      gap: 80px;
      align-items: start;
    }
    .book-cover-large {
      border-radius: 24px;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.9), 0 0 60px var(--accent-glow);
      border: 3px solid var(--neon-blue);
    }
    .book-info-detail h2 {
      font-size: 3rem;
      margin-bottom: 24px;
    }
    .book-description {
      font-size: 1.2rem;
      line-height: 1.9;
      margin: 40px 0;
      padding: 24px;
      background: rgba(0, 53, 102, 0.2);
      border-radius: 16px;
      border-left: 4px solid var(--neon-blue);
    }

    /* EBOOKS FILTER */
    .ebooks-filter {
      background: rgba(0, 8, 20, 0.5);
      padding: 24px;
      border-radius: 20px;
      border: 1px solid var(--border);
      backdrop-filter: blur(10px);
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .filter-select {
      background: rgba(0, 53, 102, 0.4);
      border: 2px solid var(--border);
      padding: 16px 20px;
      border-radius: 12px;
      color: var(--text-primary);
      min-width: 220px;
    }
    .filter-select:focus {
      border-color: var(--neon-blue);
      box-shadow: 0 0 30px var(--accent-glow);
    }

    /* Responsive */
    @media (max-width: 950px) {
      .hamburger-btn, .close-btn { display: block; }
      .search-container { display: none; }
      .links { position: fixed; top: 0; left: -100%; width: 100%; height: 100vh; background: var(--bg-secondary); flex-direction: column; justify-content: center; align-items: center; transition: 0.4s; gap: 40px; z-index: 999; }
      .links.show-menu { left: 0; }
      .book-detail-grid { grid-template-columns: 1fr; text-align: center; }
      .book-cover-large { max-width: 350px; margin: 0 auto; }
      .book-actions { justify-content: center; }
      .ebooks-filter { flex-direction: column; }
    }
  </style>
</head>
<body>
  <div class="parallax-bg"></div>

  <header>
    <nav class="navbar">
      <span class="hamburger-btn material-symbols-rounded">menu</span>
      <a href="#" class="logo" id="home-logo">
        <span class="material-symbols-rounded">code</span>
        <h2>Better Programmer</h2>
      </a>
      <div class="search-container">
        <div class="search-box">
          <input type="search" placeholder="Search e-books..." id="search-input">
          <span class="material-symbols-rounded search-icon" id="search-btn">search</span>
        </div>
      </div>
      <ul class="links">
        <span class="close-btn material-symbols-rounded">close</span>
        <li><a href="#" class="nav-link" data-page="home">Home</a></li>
        <li><a href="#" class="nav-link" data-page="ebooks">E-Books</a></li>
        <li><a href="#" class="nav-link" data-page="categories">Categories</a></li>
        <li><a href="#" class="nav-link" data-page="faq">FAQ</a></li>
        <li><a href="#" class="nav-link" data-page="profile">Profile</a></li>
        <li><a href="#" class="nav-link" data-page="admin" id="admin-nav" style="display: none;">Admin</a></li>
      </ul>
      <div class="header-actions">
        <button class="cart-btn" id="cart-btn">
          <span class="material-symbols-rounded">shopping_cart</span>
          <span class="cart-count" id="cart-count">0</span>
        </button>
        <button class="login-btn" id="login-btn">SIGN IN</button>
        <button class="admin-btn" id="admin-btn" style="display: none;">ADMIN</button>
      </div>
    </nav>
  </header>

  <!-- Keep all your original HTML content (popups, sections, etc.) unchanged -->
  <!-- Only the <script> section below is updated -->

  <script>
    const app = {
      ADMIN_EMAIL: 'better@gmail.com',
      ADMIN_PASSWORD: 'admin',

      init() {
        this.loadData();
        this.setupEventListeners();
        this.updateUI();
        this.showCookieBanner();
        this.checkPageState();
        this.loadBooks();
        this.loadBlogPosts();
        this.updateCategoryCounts();
        this.initFAQ();
      },

      loadData() {
        let users = JSON.parse(localStorage.getItem('users') || '[]');
        const adminExists = users.some(u => u.email.toLowerCase() === this.ADMIN_EMAIL.toLowerCase());
        
        if (!adminExists) {
          const adminUser = {
            name: 'Admin User',
            email: this.ADMIN_EMAIL,
            password: this.ADMIN_PASSWORD,
            phone: '+995555123456',
            age: 30,
            purchased: [],
            payments: [],
            joinDate: new Date().toISOString(),
            isAdmin: true
          };
          users.unshift(adminUser);
          localStorage.setItem('users', JSON.stringify(users));
        }

        if (!localStorage.getItem('cart')) localStorage.setItem('cart', JSON.stringify([]));
        if (!localStorage.getItem('books')) {
          // your default books object
          const defaultBooks = { /* ... your original default books ... */ };
          localStorage.setItem('books', JSON.stringify(defaultBooks));
        }
        if (!localStorage.getItem('blogs')) {
          // your default blogs
          const defaultBlogs = { /* ... your original blogs ... */ };
          localStorage.setItem('blogs', JSON.stringify(defaultBlogs));
        }
        if (!localStorage.getItem('sales')) localStorage.setItem('sales', JSON.stringify([]));
      },

      // Updated renderBookCards with new design
      renderBookCards(books, isFeatured = false) {
        const user = this.getCurrentUser();
        const userPurchased = user ? user.purchased || [] : [];

        return books.map(book => {
          const isPurchased = userPurchased.includes(book.id);
          const stars = '★'.repeat(Math.floor(book.rating || 4.5)) + '☆'.repeat(5 - Math.floor(book.rating || 4.5));

          return `
            <div class="book-card" data-id="${book.id}" data-category="${book.category}" data-price="${book.price}">
              ${book.price === 0 ? '<div class="free-badge">FREE</div>' : ''}
              <img src="${book.image}" alt="${book.title}" class="book-cover-img">
              <div class="book-info">
                <h3>${book.title}</h3>
                <div class="book-author">
                  <span class="material-symbols-rounded">person</span>
                  ${book.author}
                </div>
                <div class="book-category-badge">${this.getCategoryName(book.category)}</div>
                <div class="book-rating">${stars} ${book.rating || '4.5'}</div>
                <div class="book-price">${book.price === 0 ? 'FREE' : '$' + book.price.toFixed(2)}</div>
                <div class="book-actions">
                  ${isPurchased ? `
                    <button class="read-btn" data-book="${book.id}">
                      <span class="material-symbols-rounded">book</span>
                      Read Now
                    </button>
                  ` : `
                    <button class="buy-btn" data-book="${book.id}">
                      <span class="material-symbols-rounded">shopping_cart</span>
                      ${book.price === 0 ? 'Get Free' : 'Buy Now'}
                    </button>
                  `}
                  <button class="details-btn" data-book="${book.id}">
                    <span class="material-symbols-rounded">info</span>
                    Details
                  </button>
                </div>
              </div>
            </div>
          `;
        }).join('');
      },

      // Fixed login to handle case insensitivity
      handleLogin(e) {
        e.preventDefault();
        const email = document.getElementById('login-email').value.trim().toLowerCase();
        const password = document.getElementById('login-password').value;
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        const user = users.find(u => u.email.toLowerCase() === email && u.password === password);
        
        if (user) {
          localStorage.setItem('currentUser', JSON.stringify(user));
          document.body.classList.remove('show-popup');
          this.updateUI();
          this.showToast(user.isAdmin ? 'Welcome back, Admin!' : 'Logged in successfully!', user.isAdmin ? 'admin' : 'success');
          document.getElementById('login-form').reset();
        } else {
          this.showToast('Invalid email or password', 'error');
        }
      },

      // ... (rest of your original JavaScript code unchanged) ...
      // Keep all other methods exactly as in your original script
    };

    document.addEventListener('DOMContentLoaded', () => app.init());
  </script>
</body>
</html>
